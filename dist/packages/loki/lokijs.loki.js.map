{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1ac6fef0809affa3cb67","webpack:///./packages/loki/src/event_emitter.ts","webpack:///./packages/loki/src/collection.ts","webpack:///./packages/loki/src/clone.ts","webpack:///(webpack)/buildin/global.js","webpack:///./packages/loki/src/resultset.ts","webpack:///./packages/loki/src/helper.ts","webpack:///./packages/common/plugin.ts","webpack:///./packages/loki/src/index.ts","webpack:///./packages/loki/src/loki.ts","webpack:///./packages/loki/src/unique_index.ts","webpack:///./packages/loki/src/dynamic_view.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC3DA;;;;;;GAMG;AACG;IAYJ;QACE,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IAC9B,CAAC;IAED;;;;;OAKG;IACH,EAAE,CAAC,SAA4B,EAAE,QAAkB;QACjD,IAAI,KAAK,CAAC;QAEV,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC7B,SAAS,CAAC,OAAO,CAAC,CAAC,gBAAgB,EAAE,EAAE;gBACrC,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;YACtC,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,QAAQ,CAAC;QAClB,CAAC;QAED,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QACtC,CAAC;QACD,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrB,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IAED;;;;;;OAMG;IACH,IAAI,CAAC,SAAiB,EAAE,GAAG,IAAW;QACpC,EAAE,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,QAAkB,EAAE,EAAE;gBACpD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;oBACxB,UAAU,CAAC,GAAG,EAAE;wBACd,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC;oBACpB,CAAC,EAAE,CAAC,CAAC,CAAC;gBACR,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC;gBACpB,CAAC;YAEH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACH,WAAW,CAAC,SAA4B,EAAE,QAAkB;QAC1D,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED;;;;OAIG;IACH,cAAc,CAAC,SAA4B,EAAE,QAAkB;QAC7D,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC7B,SAAS,CAAC,OAAO,CAAC,CAAC,gBAAgB,EAAE,EAAE;gBACrC,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;YAClD,CAAC,CAAC,CAAC;QACL,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAmB,CAAC,CAAC,CAAC,CAAC;YACrC,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,SAAmB,CAAC,CAAC;YACnD,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC;IACH,CAAC;CACF;AAAA;AAAA;;;;;;;;;;;;;;;;ACpGgD;AACN;AACL;AACK;AACY;AAEZ;AAGC;AAIR;AAEpC;;GAEG;AACH,wBAAwB,KAAa;IACnC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;AACnC,CAAC;AAED,iBAAiB,KAAe;IAC9B,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;AAC3D,CAAC;AAED,2BAA2B,MAAgB;IACzC,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;IAC5B,MAAM,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;QACvC,MAAM,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC;QACzB,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC,CAAC,CAAC;IAEH,MAAM,aAAa,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;IAC3C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAClC,CAAC;AAED,sBAAsB,GAAW,EAAE,QAAgB,EAAE,MAAe;IAClE,EAAE,CAAC,CAAC,MAAM,KAAK,KAAK,CAAC,CAAC,CAAC;QACrB,0BAA0B;QAC1B,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACvB,CAAC;IACD,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACnC,IAAI,IAAI,GAAG,GAAG,CAAC;IACf,OAAO,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;IAC9B,CAAC;IACD,MAAM,CAAC,IAAI,CAAC;AACd,CAAC;AAED;;;GAGG;AACG,gBAA6C,SAAQ,wEAAgB;IAgGzE;;;;;;;;;;;;;;;;;OAiBG;IACH,YAAY,IAAY,EAAE,UAA8B,EAAE;QACxD,KAAK,EAAE,CAAC;QA3GV;;;WAGG;QACI,gBAAW,GAAG;YACnB,MAAM,EAAE,EAAE;SACX,CAAC;QAsGA,6BAA6B;QAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,kCAAkC;QAClC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC,cAAc;QACjC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC,uBAAuB;QAChD,IAAI,CAAC,WAAW,GAAG;YACjB,MAAM,EAAE,EAAE;SACX,CAAC;QAEF,IAAI;QACJ,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QAErB,IAAI;QACJ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAElB,kCAAkC;QAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,aAAa;QACb,qCAAqC;QACrC,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACnC,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACpC,CAAC;YACD,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAY,EAAE,EAAE;gBACtC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,kEAAW,CAAC,IAAI,CAAC,CAAC;YACxD,CAAC,CAAC,CAAC;QACL,CAAC;QAED,mBAAmB;QACnB,EAAE,CAAC,CAAC,+DAAO,CAAC,gBAAgB,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,cAAc,KAAK,SAAS;gBACzD,CAAC,CAAC,IAAI,CAAC,+DAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACrE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC9B,CAAC;QAED,IAAI;QACJ,IAAI,CAAC,qBAAqB,GAAG,OAAO,CAAC,qBAAqB,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,IAAI,CAAC;QAEhH,IAAI;QACJ,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC;QAEzF,IAAI;QACJ,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC;QAExE,IAAI;QACJ,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC;QAE5F,IAAI;QACJ,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC;QAEpG,IAAI;QACJ,IAAI,CAAC,sBAAsB,GAAG,OAAO,CAAC,sBAAsB,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC,IAAI,CAAC;QAEnH,IAAI;QACJ,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,2DAAW,CAAC,IAAI,CAAC;QAC9F,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACrC,CAAC;QAED,IAAI;QACJ,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC;QAE1G,EAAE;QACF,IAAI,CAAC,GAAG,GAAG;YACT,GAAG,EAAE,IAAI;YACT,WAAW,EAAE,IAAI;YACjB,MAAM,EAAE,IAAI;SACb,CAAC;QACF,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC;QAEpD,oDAAoD;QACpD,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QAExB,SAAS;QACT,IAAI,CAAC,MAAM,GAAG;YACZ,QAAQ,EAAE,EAAE;YACZ,QAAQ,EAAE,EAAE;YACZ,YAAY,EAAE,EAAE;YAChB,YAAY,EAAE,EAAE;YAChB,OAAO,EAAE,EAAE;YACX,aAAa,EAAE,EAAE;YACjB,OAAO,EAAE,EAAE;YACX,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,EAAE;SACd,CAAC;QAEF,IAAI;QACJ,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,0BAA0B;QAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QACrD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAExE,oCAAoC;QACpC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,EAAE,EAAE;YAChC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,EAAE,GAAW,EAAE,EAAE;YAC7C,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAW,EAAE,EAAE;YAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,OAAY,EAAE,EAAE;YAClC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QAEH,gCAAgC;QAChC,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,OAAO,GAAG;YACb,GAAG;YACH,CAAC;YACD,IAAI;YACJ,CAAC;YACD,KAAK;YACL,CAAC;SACF,CAAC;QAEF,iCAAiC;QACjC;;;WAGG;QACH,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,MAAM;QACJ,MAAM,CAAC;YACL,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,WAAW,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACjD,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,qBAAqB,EAAE,IAAI,CAAC,qBAAqB;YACjD,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,eAAe,EAAE,IAAI,CAAC,eAAe;SACtC,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,GAAQ,EAAE,OAAuC;QACrE,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE;YAClC,iBAAiB,EAAE,GAAG,CAAC,iBAAiB;YACxC,sBAAsB,EAAE,GAAG,CAAC,sBAAsB;SACnD,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC,qBAAqB,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;QACpH,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,CAAC;QACzC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,iBAAiB,CAAC;QAC/C,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC;QACrC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,IAAI,2DAAW,CAAC,IAAI,CAAC;QACvD,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;QAE3B,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC;QAEhF,oBAAoB,IAAS;YAC3B,MAAM,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEvC,EAAE,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;gBACtB,IAAI,QAAQ,GAAG,WAAW,CAAC,OAAO,IAAI,CAAC,CAAC,GAAW,EAAE,IAAY,EAAE,EAAE;oBACnE,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC;wBACrB,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;oBACzB,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,MAAM,CAAC,CAAC,IAAS,EAAE,EAAE;oBACnB,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC;oBAC1C,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;oBACxB,MAAM,CAAC,OAAO,CAAC;gBACjB,CAAC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC;QAC7B,CAAC;QAED,iCAAiC;QACjC,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,EAAE,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YAC/C,IAAI,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;YAE7B,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;QACvD,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;QAC3B,EAAE,CAAC,CAAC,GAAG,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QACzC,CAAC;QACD,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;QACnC,CAAC;QAED,IAAI,CAAC,QAAQ,EAAE,CAAC;QAEhB,4BAA4B;QAC5B,EAAE,CAAC,CAAC,GAAG,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;YAClC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;QAED,8FAA8F;QAC9F,EAAE,CAAC,CAAC,GAAG,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,iDAAiD;YACjD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACxD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,kEAAW,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACpF,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,eAAe,GAAG,+DAAO,CAAC,gBAAgB,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,eAAe,EAAE,OAAO,CAAC,cAAc,CAAC,CAAC;QAC/G,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,IAAY,EAAE,SAAgB;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YACxC,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;QAC7D,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;IACpC,CAAC;IAED;;;OAGG;IACH,YAAY,CAAC,IAAY;QACvB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,IAAY,EAAE,SAAgB;QACzC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;IACpC,CAAC;IAED;;;OAGG;IACH,eAAe,CAAC,IAAY;QAC1B,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED;;oCAEgC;IAChC,gBAAgB;QACd,MAAM,UAAU,GAAG,IAAI,CAAC;QACxB,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;QACzB,MAAM,CAAC;YACL,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YACvB,MAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,MAAW,EAAE,EAAE;gBACxD,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;gBAC7D,MAAM,IAAI,GAAG,GAAG,GAAG,SAAS,CAAC;gBAC7B,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC;YACpB,CAAC,CAAC,CAAC;YACH,QAAQ,CAAC,MAAM,EAAE,CAAC;QACpB,CAAC,CAAC;IACJ,CAAC;IAEO,MAAM,CAAC,GAAW,EAAE,QAAgB;QAC1C,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACZ,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACjC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;YACnB,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;YAChC,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,QAAQ,CAAC,CAAC;QACnE,CAAC;IACH,CAAC;IAED;;oCAEgC;IAEhC;;OAEG;IACH,mBAAmB;QACjB,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC7B,MAAM,OAAO,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC;QAC/B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YAChC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC;QACD,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAED;;;;OAIG;IACH,WAAW,CAAC,QAAgB,EAAE,KAAK,GAAG,KAAK;QACzC,sEAAsE;QACtE,EAAE,CAAC,CAAC,QAAQ,KAAK,IAAI,IAAI,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC;YAChD,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;QAC5E,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;gBAAC,MAAM,CAAC;QAClD,CAAC;QAED,mHAAmH;QACnH,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAChG,MAAM,CAAC;QACT,CAAC;QAED,MAAM,KAAK,GAAG;YACZ,MAAM,EAAE,QAAQ;YAChB,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI,CAAC,mBAAmB,EAAE;SACrC,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;QAErC,MAAM,eAAe,GACnB,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE;YACzC,IAAI,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvB,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;oBAChC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACZ,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;oBAChC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACrB,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACvB,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;gBAClB,EAAE,CAAC,CAAC,iEAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;oBAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC3C,EAAE,CAAC,CAAC,iEAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;oBAAC,MAAM,CAAC,CAAC,CAAC;YAC5C,CAAC;YACD,MAAM,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3B,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACnC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,yBAAyB;IAC9C,CAAC;IAED,uBAAuB,CAAC,QAAgB;QACtC,IAAI,GAAG,CAAC;QACR,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;QACpD,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAC1C,MAAM,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;QAClE,CAAC;QAED,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED,iBAAiB,CAAC,KAAa;QAC7B,IAAI,KAAK,GAAG,IAAI,kEAAW,CAAC,KAAK,CAAC,CAAC;QAEnC,wFAAwF;QACxF,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;QACvC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC1C,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACH,gBAAgB,CAAC,KAAK,GAAG,KAAK;QAC5B,IAAI,GAAG,CAAC;QACR,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;QACpC,GAAG,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC;IACH,CAAC;IAED,sBAAsB;QACpB,IAAI,GAAG,CAAC;QACR,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;QACpC,GAAG,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBAChC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;YAC7B,CAAC;QACH,CAAC;IACH,CAAC;IAED,oBAAoB,CAAC,KAAa;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;IAC3C,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,KAAc;QAClB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC1B,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC;IACtD,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,CAAC;QAEV,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACxB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACxC,CAAC;IACH,CAAC;IAED;;;;;;;;QAQI;IACJ,cAAc,CAAC,IAAY,EAAE,OAA6B;QACxD,MAAM,EAAE,GAAG,IAAI,kEAAW,CAAI,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAE5B,MAAM,CAAC,EAAE,CAAC;IACZ,CAAC;IAED;;;QAGI;IACJ,iBAAiB,CAAC,IAAY;QAC5B,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC1C,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACpC,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;QAII;IACJ,cAAc,CAAC,IAAY;QACzB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC1C,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YACjC,CAAC;QACH,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;OAOG;IACH,aAAa,CAAC,YAA2C,EAAE,cAA6B;QACtF,EAAE,CAAC,CAAC,OAAM,CAAC,YAAY,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;QACjD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAED;;;;OAIG;IACH,aAAa,CAAC,YAAoB;QAChC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,CAAC;IAC3C,CAAC;IASD,MAAM,CAAC,GAAY;QACjB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAC7B,CAAC;QAED,oFAAoF;QACpF,IAAI,GAAG,CAAC;QACR,IAAI,OAAO,GAAG,EAAE,CAAC;QAEjB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;QAC7B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACpC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACT,MAAM,CAAC,SAAS,CAAC;YACnB,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpB,CAAC;QACD,6EAA6E;QAC7E,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAE7B,8CAA8C;QAC9C,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,6DAAK,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QAEzE,MAAM,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;IACrD,CAAC;IAED;;;;;OAKG;IACH,SAAS,CAAC,GAAM,EAAE,UAAU,GAAG,KAAK;QAClC,IAAI,GAAG,GAAG,IAAI,CAAC;QACf,IAAI,SAAS,CAAC;QAEd,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5B,GAAG,GAAG,IAAI,SAAS,CAAC,gCAAgC,CAAC,CAAC;QACxD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;YACxB,GAAG,GAAG,IAAI,SAAS,CAAC,uBAAuB,CAAC,CAAC;QAC/C,CAAC;QAED,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACxB,MAAM,GAAG,CAAC;QACZ,CAAC;QAED,6EAA6E;QAC7E,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,6DAAK,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QAEnE,EAAE,CAAC,CAAO,GAAI,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5B,GAAI,CAAC,IAAI,GAAG;gBAChB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,CAAC;aACX,CAAC;QACJ,CAAC;QAED,6FAA6F;QAC7F,wFAAwF;QACxF,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;QAC/B,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC;QAED,SAAS,GAAG,GAAG,CAAC;QAChB,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YACzB,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,6DAAK,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACrE,CAAC;QAED,MAAM,CAAC,SAAmB,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,UAAe,EAAE;QACrB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAElB,+BAA+B;QAC/B,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,KAAK,IAAI,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YAExB,IAAI,CAAC,WAAW,GAAG;gBACjB,MAAM,EAAE,EAAE;aACX,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,uBAAuB;YACvB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC7C,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;gBACtB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;gBACzC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;YACzC,CAAC,CAAC,CAAC;YAEH,yCAAyC;YACzC,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACzD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5C,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YAClD,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC/B,CAAC;IACH,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,GAAQ;QACb,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;YACvB,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC;YACD,MAAM,CAAC;QACT,CAAC;QAED,8CAA8C;QAC9C,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5B,MAAM,IAAI,KAAK,CAAC,mGAAmG,CAAC,CAAC;QACvH,CAAC;QACD,IAAI,CAAC;YACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAEtC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACT,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;YACpE,CAAC;YAED,sBAAsB;YACtB,IAAI,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB;YAC/C,IAAI,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,yBAAyB;YAEhD,0BAA0B;YAC1B,6EAA6E;YAC7E,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,6DAAK,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;YAEzG,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YAE7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;gBACnD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC;YAEH,qBAAqB;YACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,WAAW,CAAC;YAElC,qFAAqF;YACrF,gFAAgF;YAChF,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,iBAAiB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC7D,CAAC;YAED,IAAI,GAAG,CAAC;YACR,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC/B,oGAAoG;gBACpG,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;gBACpC,GAAG,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBAChD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,CAAC;YAED,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC;YAE3C,kBAAkB;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;YACrD,CAAC;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,yBAAyB;YAE5C,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,6DAAK,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YAC1H,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,qDAAqD;QACpE,CAAC;IACH,CAAC;IAED;;OAEG;IACK,GAAG,CAAC,GAAM;QAChB,4CAA4C;QAC5C,EAAE,CAAC,CAAC,QAAQ,KAAK,OAAO,GAAG,CAAC,CAAC,CAAC;YAC5B,MAAM,IAAI,SAAS,CAAC,0CAA0C,CAAC,CAAC;QAClE,CAAC;QACD,wFAAwF;QACxF,oFAAoF;QACpF,yGAAyG;QACzG,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YAC/B,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;QAC5E,CAAC;QAED;;WAEG;QACH,IAAI,CAAC;YACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,KAAK,EAAE,CAAC;YAEb,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAC3D,CAAC;YAED,MAAM,MAAM,GAAG,GAAa,CAAC;YAC7B,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YAC1B,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YAExB,IAAI,GAAG,CAAC;YACR,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAC7C,GAAG,CAAC,CAAC,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC;gBACzB,EAAE,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBACpC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClD,CAAC;YACH,CAAC;YAED,4BAA4B;YAC5B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEhC,iBAAiB;YACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAEvB,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAEtC,qFAAqF;YACrF,gFAAgF;YAChF,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/B,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YAC1D,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC/B,oGAAoG;gBACpG,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;gBACpC,GAAG,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBAChD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,CAAC;YAED,kBAAkB;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YACrD,CAAC;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,yBAAyB;YAE5C,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,6DAAK,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;QAC5E,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,qDAAqD;QACpE,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACH,WAAW,CAAC,cAAmC,EAAE,cAA6B;QAC5E,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;QAC3C,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,GAAG,CAAC;QACR,IAAI,CAAC;YACH,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAChC,GAAG,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC;QAEH,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;IAED;;;;OAIG;IACH,WAAW,CAAC,KAAoC;QAC9C,IAAI,IAAI,CAAC;QACT,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC;YAChC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;QACpC,CAAC;IACH,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACjC,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,GAAQ;QACb,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5B,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACtB,CAAC;QAED,EAAE,CAAC,CAAC,QAAQ,KAAK,OAAO,GAAG,CAAC,CAAC,CAAC;YAC5B,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAChD,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;YACvB,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC;YACD,MAAM,CAAC;QACT,CAAC;QAED,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5B,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;QACvE,CAAC;QAED,IAAI,CAAC;YACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAEtC,MAAM,QAAQ,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAExB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;gBACnD,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBAChD,CAAC;YACH,CAAC,CAAC,CAAC;YACH,qFAAqF;YACrF,sDAAsD;YACtD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YACpD,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC/B,oGAAoG;gBACpG,IAAI,GAAG,CAAC;gBAER,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;gBACpC,GAAG,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBAChD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,CAAC;YAED,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YAE9B,yBAAyB;YACzB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YAEjC,kBAAkB;YAClB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,CAAC,CAAC;gBAClC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;YACrD,CAAC;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,yBAAyB;YAC5C,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,OAAO,GAAG,CAAC,KAAK,CAAC;YACjB,OAAO,GAAG,CAAC,IAAI,CAAC;YAChB,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAED;;oBAEgB;IAChB;;;OAGG;IACI,UAAU;QACf,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;;;OAIG;IACI,aAAa,CAAC,iBAA0B,EAAE,yBAAkC,IAAI;QACrF,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC3C,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAC;QAErD,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACrC,CAAC;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC;QAC5F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC;IAC9F,CAAC;IAED;;OAEG;IACI,YAAY;QACjB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAEO,eAAe,CAAC,SAAiB,EAAE,SAAiB;QAC1D,MAAM,aAAa,GAAG,SAAS,KAAK,IAAI,IAAI,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1G,EAAE,CAAC,CAAC,aAAa,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,OAAM,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5G,MAAM,KAAK,GAAG,EAAE,CAAC;YACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC9C,MAAM,YAAY,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;gBACtC,EAAE,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;oBAC3C,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,SAAS,IAAI,YAAY,KAAK,OAAO,IAAI,YAAY,KAAK,MAAM,CAAC,CAAC,CAAC;wBAC1J,KAAK,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC,YAAY,CAAC,CAAC;oBAChD,CAAC;oBACD,IAAI,CAAC,CAAC;wBACJ,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;wBAC7F,EAAE,CAAC,CAAC,aAAa,KAAK,SAAS,IAAI,aAAa,KAAK,EAAE,CAAC,CAAC,CAAC;4BACxD,KAAK,CAAC,YAAY,CAAC,GAAG,aAAa,CAAC;wBACtC,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YACD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC;QAC7D,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC;QACzD,CAAC;IACH,CAAC;IAED;;OAEG;IACK,eAAe,CAAC,GAAW,EAAE,GAAW;QAC9C,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACR,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED;;;OAGG;IACK,aAAa,CAAC,IAAY,EAAE,EAAU,EAAE,GAAW,EAAE,GAAY;QACvE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;YAChB,IAAI;YACJ,SAAS,EAAE,EAAE;YACb,GAAG,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SACnH,CAAC,CAAC;IACL,CAAC;IAEO,mBAAmB,CAAC,GAAW;QACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IAC1C,CAAC;IAED;;OAEG;IACK,WAAW,CAAC,GAAW;QAC7B,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QAER,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACT,MAAM,CAAC;QACT,CAAC;QAED,kBAAkB;QAClB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvB,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;YAEjB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;gBAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;oBAChC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC;gBACrB,CAAC;gBAED,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;gBAC/C,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAC7B,CAAC;YAED,MAAM,CAAC;QACT,CAAC;QAED,gBAAgB;QAChB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;YACd,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC;QAChB,CAAC;QAED,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;QAC1C,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACxB,CAAC;IAEO,WAAW,CAAC,GAAW;QAC7B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACT,MAAM,CAAC;QACT,CAAC;QACD,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;QAC1C,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC;IACzB,CAAC;IAGO,mBAAmB,CAAC,GAAW,EAAE,GAAW;QAClD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IAC/C,CAAC;IAEO,qBAAqB,CAAC,GAAW;QACvC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAEO,qBAAqB,CAAC,GAAW,EAAE,GAAW;QACpD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACrC,CAAC;IAeM,GAAG,CAAC,EAAU,EAAE,cAAc,GAAG,KAAK;QAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;QAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1B,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;QAE3B,EAAE,GAAG,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAEpD,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACd,MAAM,IAAI,SAAS,CAAC,6BAA6B,CAAC,CAAC;QACrD,CAAC;QAED,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;YAC7B,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBACnB,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,GAAG,CAAC;YACZ,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YAC/B,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,sBAAsB,CAAC,YAAoB,EAAE,eAAuB;QACzE,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,CAAC;QACrD,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QAEzD,6DAA6D;QAC7D,wDAAwD;QACxD,2CAA2C;QAC3C,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,eAAe,EAAE,GAAG,CAAC,CAAC;QAE/D,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,yBAAyB;YACzB,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACrB,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QAErB,8CAA8C;QAC9C,uDAAuD;QACvD,4DAA4D;QAC5D,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;YACtC,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,YAAY,CAAC;gBAAC,MAAM,CAAC,GAAG,CAAC;QAC9C,CAAC;QAED,OAAO;QACP,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;OAIG;IACI,yBAAyB,CAAC,YAAoB,EAAE,eAAuB;QAC5E,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QACzD,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,CAAC;QAEnD,0FAA0F;QAC1F,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,KAAK,IAAI,IAAI,GAAG,YAAY,IAAI,CAAC,CAAC,CAAC;YAC7D,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC;YACzD,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,CAAC;QACjD,CAAC;QAED,MAAM,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAEhG,wHAAwH;QACxH,4FAA4F;QAC5F,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC;IAC7E,CAAC;IAED;;;;OAIG;IACI,yBAAyB,CAAC,YAAoB,EAAE,eAAuB;QAC5E,oGAAoG;QACpG,uGAAuG;QACvG,IAAI,MAAM,CAAC;QAEX,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QACzD,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;QAEzB,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC;YACxC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,YAAY,CAAC;gBAAC,KAAK,CAAC;QAC5C,CAAC;QAED,gFAAgF;QAChF,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAE7D,sEAAsE;QACtE,IAAI,CAAC,yBAAyB,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;IAChE,CAAC;IAED;;;;OAIG;IACI,yBAAyB,CAAC,YAAoB,EAAE,eAAuB,EAAE,oBAAoB,GAAG,KAAK;QAC1G,MAAM,MAAM,GAAG,IAAI,CAAC,sBAAsB,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;QAC1E,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QACzD,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QAER,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;YACpB,gEAAgE;YAChE,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,6BAA6B;QAC7B,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAE7D,4FAA4F;QAC5F,8CAA8C;QAC9C,EAAE,CAAC,CAAC,oBAAoB,KAAK,IAAI,CAAC,CAAC,CAAC;YAClC,MAAM,CAAC;QACT,CAAC;QAED,mEAAmE;QACnE,gGAAgG;QAChG,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;QACnB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;YAC/B,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC;gBAC9B,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC;YACf,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;;;;;;OAaG;IACK,oBAAoB,CAAC,IAAY,EAAE,GAAQ,EAAE,QAAQ,GAAG,KAAK;QACnE,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;QAC9C,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QAC3B,IAAI,GAAG,GAAG,CAAC,CAAC;QAEZ,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACvB,MAAM,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC;QAED,qCAAqC;QACrC,OAAO,GAAG,GAAG,GAAG,EAAE,CAAC;YACjB,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;gBAChD,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,GAAG,CAAC;YACZ,CAAC;QACH,CAAC;QAED,MAAM,MAAM,GAAG,GAAG,CAAC;QAEnB,wBAAwB;QACxB,EAAE,CAAC,CAAC,kEAAS,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAED,2DAA2D;QAC3D,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACnD,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACxC,CAAC;QAED,2DAA2D;QAC3D,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IACxC,CAAC;IAED;;;OAGG;IACK,kBAAkB,CAAC,IAAY,EAAE,GAAQ;QAC/C,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;QAC9C,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QAC3B,IAAI,GAAG,GAAG,CAAC,CAAC;QAEZ,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACvB,MAAM,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC;QAED,qCAAqC;QACrC,OAAO,GAAG,GAAG,GAAG,EAAE,CAAC;YACjB,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;gBAChD,GAAG,GAAG,GAAG,CAAC;YACZ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YAChB,CAAC;QACH,CAAC;QAED,MAAM,MAAM,GAAG,GAAG,CAAC;QAEnB,8CAA8C;QAC9C,EAAE,CAAC,CAAC,kEAAS,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAED,2DAA2D;QAC3D,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QACpB,CAAC;QAED,gCAAgC;QAChC,EAAE,CAAC,CAAC,kEAAS,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QACpB,CAAC;QAED,iEAAiE;QACjE,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;;;;;;;;;OASG;IACI,cAAc,CAAC,EAAU,EAAE,IAAY,EAAE,GAAQ;QACtD,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;QAC9C,MAAM,GAAG,GAAG,CAAC,CAAC;QACd,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QAC7B,IAAI,MAAM,CAAC;QACX,IAAI,IAAI,CAAC;QACT,IAAI,MAAM,CAAC;QAEX,oEAAoE;QACpE,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACjB,CAAC;QAED,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACrC,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAErC,6EAA6E;QAC7E,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,MAAM;gBACT,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,IAAI,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjE,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,OAAO;gBACV,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,IAAI,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjE,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,wBAAwB;gBACxB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,uBAAuB;gBACvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBACpB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,MAAM;gBACT,wBAAwB;gBACxB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,uBAAuB;gBACvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBACpB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,wBAAwB;gBACxB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,uBAAuB;gBACvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBACpB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,MAAM;gBACT,wBAAwB;gBACxB,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,uBAAuB;gBACvB,EAAE,CAAC,CAAC,iEAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBACpB,CAAC;gBACD,KAAK,CAAC;YACR,KAAK,UAAU;gBACb,+CAA+C;gBAC/C,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACpC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,2CAA2C;gBAC3C,EAAE,CAAC,CAAC,iEAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBACpC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBAED,MAAM,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjD,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE/C,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;oBAAC,MAAM,EAAE,CAAC;gBACzB,EAAE,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC;oBAAC,MAAM,EAAE,CAAC;gBAE3B,EAAE,CAAC,CAAC,CAAC,iEAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;oBAAC,MAAM,EAAE,CAAC;gBAChE,EAAE,CAAC,CAAC,CAAC,iEAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;oBAAC,MAAM,EAAE,CAAC;gBAEhE,EAAE,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;oBAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAEpC,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;QAC9B,CAAC;QAED,gCAAgC;QAChC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,MAAM,CAAC;YACZ,KAAK,OAAO,CAAC;YACb,KAAK,MAAM,CAAC;YACZ,KAAK,KAAK;gBACR,MAAM,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;gBAC9C,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBAChC,KAAK,CAAC;YACR;gBACE,KAAK,CAAC;QACV,CAAC;QAED,gCAAgC;QAChC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,MAAM,CAAC;YACZ,KAAK,OAAO,CAAC;YACb,KAAK,MAAM,CAAC;YACZ,KAAK,KAAK;gBACR,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;gBAC5C,KAAK,CAAC;YACR;gBACE,KAAK,CAAC;QACV,CAAC;QAGD,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,MAAM,CAAC;YACZ,KAAK,OAAO;gBACV,sBAAsB;gBACtB,iEAAiE;gBACjE,mBAAmB;gBACnB,GAAG;gBACH,EAAE,CAAC,CAAC,CAAC,kEAAS,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1B,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBAED,MAAM,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAE1B,eAAe;YACf,sBAAsB;YACtB,mCAAmC;YACnC,qBAAqB;YACrB,KAAK;YAEL,4BAA4B;YAE5B,KAAK,KAAK;gBACR,8CAA8C;gBAC9C,qDAAqD;gBACrD,EAAE,CAAC,CAAC,CAAC,kEAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9C,uDAAuD;oBACvD,MAAM,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;gBACvB,CAAC;gBACD,uDAAuD;gBACvD,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;YAE3B,KAAK,MAAM;gBACT,8DAA8D;gBAC9D,EAAE,CAAC,CAAC,CAAC,kEAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9C,uDAAuD;oBACvD,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;gBAC3B,CAAC;gBACD,4DAA4D;gBAC5D,MAAM,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;YAEvB,KAAK,KAAK;gBACR,oDAAoD;gBACpD,EAAE,CAAC,CAAC,CAAC,kEAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9C,uDAAuD;oBACvD,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;gBACvB,CAAC;gBACD,sEAAsE;gBACtE,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;YAE3B,KAAK,MAAM;gBACT,sEAAsE;gBACtE,EAAE,CAAC,CAAC,CAAC,kEAAS,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9C,uDAAuD;oBACvD,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC3B,CAAC;gBACD,iEAAiE;gBACjE,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;YAEvB;gBACE,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACI,EAAE,CAAC,KAAa,EAAE,KAAU;QACjC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAC,CAAC,KAAK,CAAC,EAAE,KAAK,EAAC,CAAC,CAAC;IACxC,CAAC;IAED;;;;OAIG;IACI,OAAO,CAAC,KAAa;QAC1B,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;QAEpB,wEAAwE;QACxE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;QAErD,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,MAAM,CAAC,CAAC,CAAkB,CAAC;YACpC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,6DAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAkB,CAAC;YAC7D,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;OAOG;IACI,KAAK,CAAC,SAA0B,EAAE,UAAgB;QACvD,MAAM,EAAE,GAAG,IAAI,6DAAS,CAAI,IAAI,CAAC,CAAC;QAElC,EAAE,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5B,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,CAAiB,CAAC;IAC7D,CAAC;IAED;;;;;;OAMG;IACI,IAAI,CAAC,KAAa;QACvB,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC;IACzC,CAAC;IAED;;;OAGG;IACI,gBAAgB,CAAC,IAAY,EAAE,KAAU;QAC9C,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QACzB,IAAI,GAAG,CAAC;QACR,OAAO,CAAC,EAAE,EAAE,CAAC;YACX,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;gBACjC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACnB,MAAM,CAAC,GAAG,CAAC;YACb,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IAEH,2BAA2B;IACpB,gBAAgB;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,UAAU,GAAG,6DAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACrD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC;YAChC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,CAAC;YAE5C,8CAA8C;YAC9C,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,CAAC;YAC7C,CAAC;QACH,CAAC;IACH,CAAC;IAED,4BAA4B;IACrB,MAAM;QACX,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAE9B,oCAAoC;YACpC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;YACnC,CAAC;QACH,CAAC;IACH,CAAC;IAED,+BAA+B;IACxB,QAAQ;QACb,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,IAAI,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;gBAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;gBAChC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC;YAC9C,CAAC;YAED,sCAAsC;YACtC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;YACrC,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;;OASG;IACI,KAAK,CAAC,GAAwB;QACnC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;IACxC,CAAC;IAED;;;;;OAKG;IACI,SAAS,CAAO,WAAuD,EAAE,cAAiC;QAC/G,IAAI,CAAC;YACH,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;QACpD,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,MAAM,GAAG,CAAC;QACZ,CAAC;IACH,CAAC;IAED;;;;;;;;OAQG;IACH,uLAAuL;IACvL,kNAAkN;IAClN,yQAAyQ;IAClQ,MAAM,CAAC,QAAe,EAAE,YAAoB,EAAE,aAAqB,EAAE,MAAiB;QAC3F,2BAA2B;QAC3B,MAAM,CAAC,IAAI,6DAAS,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC;IACnF,CAAC;IAED,iCAAiC;IAEjC;;;OAGG;IAGH;;OAEG;IACH,QAAQ,CAAC,IAAY;QACnB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAED;;OAEG;IAEH;;OAEG;IACI,KAAK,CAAC,SAAiB,EAAE,GAAQ;QACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;QAC3C,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACI,WAAW,CAAC,SAAiB,EAAE,OAAe;QACnD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QACvC,IAAI,IAAI,CAAC;QACT,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;QAEvC,GAAG,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAClB,SAAS;gBACT,OAAO;gBACP,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;aAC9C,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;IAC9B,CAAC;IAED;OACG;IACI,OAAO,CAAC,KAAa;QAC1B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC7B,MAAM,aAAa,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;QAC5C,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;QAChE,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;OACG;IACI,GAAG,CAAC,KAAa;QACtB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACnD,CAAC;IAED;OACG;IACI,GAAG,CAAC,KAAa;QACtB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACnD,CAAC;IAED;OACG;IACI,SAAS,CAAC,KAAa;QAC5B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC7B,MAAM,IAAI,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;QAEnC,MAAM,MAAM,GAAG;YACb,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,CAAC;SACT,CAAC;QAEF,IAAI,GAAG,CAAC;QAER,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACxB,EAAE,CAAC,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAClD,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;oBAC9C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACpC,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC9C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACpC,CAAC;QACH,CAAC;QACD,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;QACnB,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;OACG;IACH,SAAS,CAAC,KAAa;QACrB,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC7B,MAAM,IAAI,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;QAEnC,MAAM,MAAM,GAAG;YACb,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,CAAC;SACT,CAAC;QAEF,IAAI,GAAG,CAAC;QAER,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACxB,EAAE,CAAC,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;oBAClD,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;oBAC9C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACpC,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC9C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACpC,CAAC;QACH,CAAC;QACD,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;QACnB,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;OACG;IACI,gBAAgB,CAAC,KAAa;QACnC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvF,CAAC;IAED;;;;;OAKG;IACI,GAAG,CAAC,KAAa;QACtB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC;IAC/C,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,KAAa;QACzB,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC;IACzD,CAAC;IAED;;OAEG;IACI,IAAI,CAAC,KAAa;QACvB,MAAM,IAAI,GAAG,EAAE,CAAC;QAChB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACjB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC;QACH,CAAC,CAAC,CAAC;QACH,IAAI,GAAG,CAAC;QACR,IAAI,IAAI,CAAC;QACT,IAAI,IAAI,CAAC;QACT,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;YAClB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACR,EAAE,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACrB,IAAI,GAAG,IAAI,CAAC;gBACd,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,GAAG,IAAI,CAAC;gBACZ,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YACnB,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,KAAa;QACzB,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC5C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAE7B,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAE3C,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC;QACjD,CAAC;IACH,CAAC;CACF;AAAA;AAAA;;;;;;;;;;ACniED,IAAY,WAMX;AAND,WAAY,WAAW;IACrB,mEAAe;IACf,6CAAI;IACJ,mDAAO;IACP,iEAAc;IACd,mFAAuB;AACzB,CAAC,EANW,WAAW,KAAX,WAAW,QAMtB;AAED,aAAa,IAAS,EAAE,GAAQ,EAAE,KAAU;IAC1C,EAAE,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC/B,CAAC;IACD,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,YAAY,MAAM,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAClB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;AACH,CAAC;AAED,cAAc,MAAW,EAAE,IAAS;IAClC,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC;QACvB,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;QACtB,EAAE,CAAC,CAAC,GAAG,YAAY,IAAI,CAAC,CAAC,CAAC;YACxB,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;YACpC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,QAAQ,CAAC,CAAC,CAAC;YACjC,IAAI,KAAK,GAAG,GAAG,CAAC;YAChB,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC;YAC9B,IAAI,KAAK,GAAU,EAAE,CAAC;YACtB,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAClB,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,MAAM,CAAC,CAAC,CAAC;YAC/B,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;YACjC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAClB,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,IAAI,KAAK,GAAG,GAAG,CAAC;YAChB,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACxB,CAAC;IACH,CAAC;AACH,CAAC;AAED,mCAAmC;AACnC;;;GAGG;AACH,kBAAkB,MAAW;IAC3B,EAAE,CAAC,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IACD,EAAE,CAAC,CAAC,MAAM,YAAY,IAAI,CAAC,CAAC,CAAC;QAC3B,MAAM,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC;IACpC,CAAC;IAED,MAAM,IAAI,GAAG,CAAC,MAAM,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IACjD,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACnB,MAAM,CAAC,IAAI,CAAC;AACd,CAAC;AAED;;GAEG;AACG,eAAmB,IAAO,EAAE,SAAsB,WAAW,CAAC,eAAe;IACjF,EAAE,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,IAAI,MAAW,CAAC;IAEhB,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACf,KAAK,WAAW,CAAC,eAAe;YAC9B,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1C,KAAK,CAAC;QACR,KAAK,WAAW,CAAC,IAAI;YACnB,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;YACxB,KAAK,CAAC;QACR,KAAK,WAAW,CAAC,OAAO;YACtB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC5B,KAAK,CAAC;QACR,KAAK,WAAW,CAAC,uBAAuB;YACtC,qCAAqC;YACrC,MAAM,GAAG,KAAK,CAAC,IAAI,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC;YAC1C,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/B,2FAA2F;YAC3F,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACrC,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpB,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;oBAC7E,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,WAAW,CAAC,uBAAuB,CAAC,CAAC;gBACtE,CAAC;YACH,CAAC;YACD,KAAK,CAAC;QACR;YACE,KAAK,CAAC;IACV,CAAC;IAED,MAAM,CAAC,MAAkB,CAAC;AAC5B,CAAC;;;;;;;ACvGD;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;ACpBwC;AACG;AACwB;AAMnE,qFAAqF;AACrF,gCAAgC,MAAc,EAAE,MAAc,EAAE,QAAgB,CAAC;IAC/E,IAAI,IAAI,CAAC;IACT,IAAI,KAAK,CAAC;IAEV,EAAE,CAAC,CAAC,EAAE,KAAK,IAAI,EAAE,CAAC;QAAC,MAAM,CAAC,MAAM,CAAC;IAEjC,GAAG,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;QACpB,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/E,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBAChC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC5C,MAAM,CAAC,IAAI,CAAC,GAAG,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrE,CAAC;IACH,CAAC;IAED,MAAM,CAAC,MAAM,CAAC;AAChB,CAAC;AAED,wGAAwG;AACxG,gCAAgC,SAAc,EAAE,MAAc;IAC5D,IAAI,GAAG,CAAC;IACR,IAAI,UAAU,CAAC;IACf,MAAM,iBAAiB,GAAG,EAAE,CAAC;IAE7B,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC;QAAC,MAAM,CAAC,SAAS,CAAC;IAE3C,2CAA2C;IAC3C,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;QAC5C,+EAA+E;QAC/E,UAAU,GAAG,6DAAK,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,2DAAW,CAAC,uBAAuB,CAAC,CAAC;QACxE,iBAAiB,CAAC,IAAI,CAAC,sBAAsB,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC;AAC3B,CAAC;AAED,yBAAyB,CAAM;IAC7B,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9C,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAE,CAAY,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IACrD,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;QAC/C,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtD,CAAC;IACD,MAAM,CAAC,IAAI,CAAC;AACd,CAAC;AAED,mBAAmB,GAAQ,EAAE,EAAO;IAClC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACjB,EAAE,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IACD,MAAM,CAAC,KAAK,CAAC;AACf,CAAC;AAGD;;GAEG;AACI,MAAM,OAAO,GAAG;IACrB,uBAAuB;IACvB,mCAAmC;IACnC,uBAAuB;IACvB,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;IACjB,CAAC;IAED,0BAA0B;IAC1B,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC;IAChB,CAAC;IAED,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,2BAA2B;QAC3B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACZ,+BAA+B;YAC/B,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACnB,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;IACjB,CAAC;IAED,8CAA8C;IAC9C,KAAK,CAAC,CAAM,EAAE,CAAM;QAClB,MAAM,CAAC,kEAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACzB,CAAC;IAED,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,MAAM,CAAC,iEAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IAC/B,CAAC;IAED,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,MAAM,CAAC,iEAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,MAAM,CAAC,iEAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IAC/B,CAAC;IAED,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,MAAM,CAAC,iEAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,wDAAwD;IACxD,QAAQ,CAAC,CAAM,EAAE,IAAS;QACxB,EAAE,CAAC,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,IAAI,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAChD,MAAM,CAAC,CAAC,iEAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,iEAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IACpE,CAAC;IAED,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,MAAM,CAAC,CAAM,EAAE,CAAM;QACnB,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC;IAChB,CAAC;IAED,OAAO,CAAC,CAAM,EAAE,CAAM;QACpB,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,UAAU,CAAC,CAAM,EAAE,CAAM;QACvB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC;IAC5B,CAAC;IAED,YAAY,CAAC,CAAM,EAAE,CAAM;QACzB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC;IAC5B,CAAC;IAED,MAAM,CAAC,CAAM,EAAE,CAAM;QACnB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,eAAe,CAAC,CAAM,EAAE,CAAM;QAC5B,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED,aAAa,CAAC,CAAM,EAAE,CAAM;QAC1B,MAAM,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACrC,CAAC;IAED,YAAY,CAAC,CAAM,EAAE,CAAM;QACzB,MAAM,OAAO,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QACnC,EAAE,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/D,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,SAAS,CAAC,CAAM,EAAE,CAAM;QACtB,MAAM,OAAO,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QACnC,EAAE,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAChE,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,KAAK,CAAC,CAAM,EAAE,CAAM;QAClB,IAAI,IAAI,GAAW,OAAO,CAAC,CAAC;QAC5B,EAAE,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;YACtB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrB,IAAI,GAAG,OAAO,CAAC;YACjB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC;gBAC7B,IAAI,GAAG,MAAM,CAAC;YAChB,CAAC;QACH,CAAC;QACD,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,OAAO,CAAC,CAAM,EAAE,CAAM;QACpB,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,KAAK,CAAC,CAAM,EAAE,CAAM;QAClB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC7E,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC1B,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC7E,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,MAAM,CAAC,CAAM,EAAE,CAAM;QACnB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC;IACvB,CAAC;IAED,gCAAgC;IAChC,mCAAmC;IACnC,+CAA+C;IAC/C,kEAAkE;IAClE,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1B,CAAC;IAED,IAAI,CAAC,CAAM,EAAE,CAAM;QACjB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;YACtD,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1B,MAAM,CAAC,KAAK,CAAC;YACf,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,GAAG,CAAC,CAAM,EAAE,CAAM;QAChB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;YACtD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;CACF,CAAC;AAAA;AAAA;AAEF,kGAAkG;AAClG,uGAAuG;AACvG,uGAAuG;AACvG,MAAM,UAAU,GAAG;IACjB,GAAG,EAAE,OAAO,CAAC,GAAG;IAChB,IAAI,EAAE,IAAI;IACV,KAAK,EAAE,IAAI;IACX,GAAG,EAAE,IAAI;IACT,IAAI,EAAE,IAAI;IACV,GAAG,EAAE,IAAI;IACT,IAAI,EAAE,IAAI;IACV,GAAG,EAAE,IAAI;IACT,QAAQ,EAAE,IAAI;CACf,CAAC;AAEF;;;;;;;;GAQG;AACH,oBAAoB,IAAY,EAAE,KAAe,EAAE,GAAa,EAAE,KAAU,EAAE,UAAU,GAAG,CAAC;IAC1F,MAAM,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;IAC/B,EAAE,CAAC,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;QACpE,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,IAAI,UAAU,GAAG,KAAK,CAAC;IACvB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3B,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;QACnC,oDAAoD;QACpD,gEAAgE;QAChE,UAAU,GAAG,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACnC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAClC,GAAG,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,GAAG,GAAG,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC;YAClE,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;YAC3E,EAAE,CAAC,CAAC,UAAU,KAAK,IAAI,CAAC,CAAC,CAAC;gBACxB,KAAK,CAAC;YACR,CAAC;QACH,CAAC;IACH,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,UAAU,GAAG,UAAU,CAAC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,MAAM,CAAC,UAAU,CAAC;AACpB,CAAC;AAED;;;;;;;;;GASG;AACG;IAQJ;;;OAGG;IACH,YAAY,UAAyB;QACnC,yDAAyD;QACzD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED;;;;OAIG;IACH,KAAK;QACH,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACzB,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,MAAM;QACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;QACzB,IAAI,CAAC,UAAU,GAAU,IAAI,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,KAAK,CAAC,GAAW;QACtB,yEAAyE;QACzE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QACpD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,GAAW;QACvB,yEAAyE;QACzE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACjD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;OAIG;IACI,IAAI;QACT,MAAM,MAAM,GAAG,IAAI,SAAS,CAAI,IAAI,CAAC,UAAU,CAAC,CAAC;QAEjD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACjC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAClD,CAAC;QACD,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAElD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;;OAEG;IACH,MAAM;QACJ,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;IAED;;;;;;OAMG;IACH,SAAS,CAAC,SAAyB,EAAE,UAAmB;QACtD,IAAI,GAAG,CAAC;QACR,IAAI,IAAI,CAAC;QACT,IAAI,EAAE,GAAG,IAAiB,CAAC;QAE3B,6CAA6C;QAC7C,EAAE,CAAC,CAAC,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBACxD,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YACpD,CAAC;QACH,CAAC;QAED,2EAA2E;QAC3E,EAAE,CAAC,CAAC,OAAO,SAAS,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACvC,CAAC;QAED,EAAE,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YAC7B,SAAS,GAAG,sBAAsB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QAC5D,CAAC;QAED,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAC5C,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;YAEtB,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAClB,KAAK,MAAM;oBACT,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACpB,KAAK,CAAC;gBACR,KAAK,OAAO;oBACV,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACrB,KAAK,CAAC;gBACR,KAAK,YAAY;oBACf,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxC,KAAK,CAAC;gBACR,KAAK,cAAc;oBACjB,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC5B,KAAK,CAAC;gBACR,KAAK,MAAM;oBACT,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACpB,KAAK,CAAC;gBACR,KAAK,OAAO;oBACV,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC1B,KAAK,CAAC,CAAC,uCAAuC;gBAChD,KAAK,QAAQ;oBACX,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC3B,KAAK,CAAC,CAAC,wCAAwC;gBACjD,KAAK,KAAK;oBACR,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;oBAC1C,KAAK,CAAC;gBACR,KAAK,QAAQ;oBACX,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;oBAClG,KAAK,CAAC;gBACR,mGAAmG;gBACnG,KAAK,WAAW;oBACd,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;oBACzD,KAAK,CAAC;gBACR,iFAAiF;gBACjF,KAAK,QAAQ;oBACX,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACtB,KAAK,CAAC;gBACR,KAAK,QAAQ;oBACX,EAAE,CAAC,MAAM,EAAE,CAAC;oBACZ,KAAK,CAAC;gBACR;oBACE,KAAK,CAAC;YACV,CAAC;QACH,CAAC;QACD,MAAM,CAAC,EAAkB,CAAC;IAC5B,CAAC;IAED;;;;;;;;;;;OAWG;IACI,IAAI,CAAC,UAAkC;QAC5C,8EAA8E;QAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QAED,MAAM,eAAe,GACnB,CAAC,CAAC,CAAC,YAAY,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEzH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAExC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;OAOG;IACI,UAAU,CAAC,QAAgB,EAAE,MAAgB;QAClD,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YACzB,MAAM,GAAG,KAAK,CAAC;QACjB,CAAC;QAED,8EAA8E;QAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,qGAAqG;YACrG,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC1D,gCAAgC;gBAChC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBACtC,sCAAsC;gBACtC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAE5E,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACX,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;gBAC9B,CAAC;gBAED,6DAA6D;gBAC7D,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAED,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;YAC5D,CAAC;QACH,CAAC;QAED,MAAM,eAAe,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE;YACtE,IAAI,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvB,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;oBAChC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACZ,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC;oBAChC,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACd,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACrB,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACvB,CAAC;YACD,MAAM,CAAC,mEAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAExC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;;;;OAUG;IACI,YAAY,CAAC,UAA0C;QAC5D,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,MAAM,IAAI,KAAK,CAAC,0DAA0D,CAAC,CAAC;QAC9E,CAAC;QAED,IAAI,IAAI,CAAC;QACT,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC7B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YACtC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;QAED,oFAAoF;QACpF,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACzD,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC7B,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAChC,CAAC;QACH,CAAC;QAED,8EAA8E;QAC9E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QAED,MAAM,eAAe,GACnB,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAiC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEtJ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAExC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;OAOG;IACK,aAAa,CAAC,UAA+B,EAAE,IAAO,EAAE,IAAO;QACrE,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,IAAI,CAAC;QACT,IAAI,KAAK,CAAC;QACV,IAAI,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC;QACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;YACtD,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YACrB,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACvB,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,GAAW,EAAE,CAAS,EAAE,EAAE;oBAC3C,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC;gBACT,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,GAAW,EAAE,CAAS,EAAE,EAAE;oBAC3C,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;gBACpC,CAAC,EAAE,IAAI,CAAC,CAAC;YACX,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;gBACnB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;YACrB,CAAC;YACD,GAAG,GAAG,mEAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,GAAG,CAAC;YACb,CAAC;QACH,CAAC;QACD,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAED;;;;OAIG;IACI,aAAa,CAAC,SAAS,GAAG,KAAK;QACpC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAC1C,CAAC;QAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACxF,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACxF,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,UAAU;QACf,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAC1C,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED;;;;;;;;OAQG;IACI,MAAM,CAAC,eAAwB;QACpC,IAAI,EAAE,GAAG,IAAI,CAAC;QACd,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;QAE/B,8FAA8F;QAC9F,oGAAoG;QACpG,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,eAAe,CAAC,MAAM,EAAE,EAAE,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;YAChE,qFAAqF;YACrF,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC;YAC1D,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC;YAClB,kGAAkG;YAClG,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;gBACxB,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAED,0BAA0B;YAC1B,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC;gBACjC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;gBACd,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC9B,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;oBACnB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACnB,CAAC;YACH,CAAC;QACH,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;QAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAE9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,GAAG,CAAC,eAAwB;QACjC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;IACtC,CAAC;IAED;;;;;;;;OAQG;IACI,OAAO,CAAC,eAAwB;QACrC,6EAA6E;QAC7E,6DAA6D;QAC7D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;YAC3D,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,IAAI,CAAC,eAAwB;QAClC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;IACvC,CAAC;IAED;;;;;;OAMG;IACI,IAAI,CAAC,KAAa,EAAE,SAAS,GAAG,KAAK;QAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,MAAM,WAAW,GAAG,KAAK,IAAI,QAAQ,CAAC;QACtC,IAAI,QAAQ,CAAC;QACb,IAAI,aAAa,CAAC;QAClB,IAAI,KAAK,CAAC;QAEV,EAAE,CAAC,CAAC,OAAO,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,EAAE,CAAC;YACjB,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC;gBAC1B,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,GAAG,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;gBACxB,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAElB,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBACjC,QAAQ,GAAG,CAAC,CAAC;oBACb,aAAa,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;gBACjC,CAAC;YACH,CAAC;YACD,sDAAsD;YACtD,yCAAyC;YACzC,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,OAAO,EAAC,EAAE,SAAS,CAAC,CAAC;YACjD,CAAC;QACH,CAAC;QAED,oCAAoC;QACpC,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC1C,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBACjE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAChC,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,0DAA0D;QAC1D,EAAE,CAAC,CAAC,QAAQ,KAAK,MAAM,IAAI,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;YAE9B,mCAAmC;YACnC,EAAE,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC9C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACpD,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,kEAAkE;QAClE,IAAI,QAAQ,CAAC;QACb,EAAE,CAAC,CAAC,aAAa,KAAK,IAAI,IAAI,CAAC,OAAO,aAAa,KAAK,QAAQ,IAAI,aAAa,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC;YACnG,QAAQ,GAAG,KAAK,CAAC;YACjB,KAAK,GAAG,aAAa,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,aAAa,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC7C,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,aAAa,CAAC,CAAC,CAAC;gBAC9B,EAAE,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;oBACrC,QAAQ,GAAG,GAAG,CAAC;oBACf,KAAK,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;oBAC3B,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACtD,CAAC;QAED,4BAA4B;QAC5B,EAAE,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACzB,KAAK,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,YAAY,MAAM,CAAC,CAAC,CAAC,CAAC;gBACtC,KAAK,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC;QAED,yEAAyE;QACzE,MAAM,gBAAgB,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAExD,oEAAoE;QACpE,iFAAiF;QACjF,MAAM,YAAY,GAAG,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC;QAElE,IAAI,aAAa,GAAG,KAAK,CAAC;QAC1B,EAAE,CAAC,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACpF,0DAA0D;YAC1D,+DAA+D;YAC/D,+DAA+D;YAC/D,gGAAgG;YAChG,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC;gBACnD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YACxC,CAAC;YACD,aAAa,GAAG,IAAI,CAAC;QACvB,CAAC;QAED,0BAA0B;QAC1B,MAAM,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QAE9B,iCAAiC;QACjC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAElC,4CAA4C;QAC5C,+DAA+D;QAC/D,0FAA0F;QAC1F,EAAE;QACF,2FAA2F;QAE3F,IAAI,MAAM,GAAa,EAAE,CAAC;QAC1B,uDAAuD;QACvD,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC3B,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;YAE/B,oEAAoE;YACpE,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC/B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACvC,IAAI,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;wBACnD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gBACtE,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACrC,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC9B,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,SAAS,IAAI,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC5F,oCAAoC;gBACpC,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAClE,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACzB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACnB,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACvC,IAAI,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;oBACvB,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACtB,CAAC;gBACH,CAAC;YACH,CAAC;YAED,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,wCAAwC;YACvE,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;QAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,wCAAwC;QAEvE,EAAE,CAAC,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACtE,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACtC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACrC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,oCAAoC;QACpC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,SAAS,IAAI,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;YACrF,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;YACrE,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,6EAA6E;QAC7E,4BAA4B;QAC5B,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;YACnB,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC/B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACrC,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;wBAC9C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACf,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACd,MAAM,CAAC,IAAI,CAAC;wBACd,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACrC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;wBAClC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACf,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACd,MAAM,CAAC,IAAI,CAAC;wBACd,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QAED,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;YACvB,kBAAkB;YAClB,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;YACvE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACxC,EAAE,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;oBAClC,kFAAkF;oBAClF,EAAE,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;wBACjE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACd,MAAM,CAAC,IAAI,CAAC;wBACd,CAAC;oBACH,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;wBACd,MAAM,CAAC,IAAI,CAAC;oBACd,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,MAAM,GAAG,EAAE,CAAC;YAClB,iEAAiE;YACjE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACjD,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;oBACxC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;wBAC5B,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;wBACjB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/B,CAAC;oBACD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;wBACd,MAAM,CAAC,IAAI,CAAC;oBACd,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAGD;;;;;OAKG;IACI,KAAK,CAAC,GAAwB;QACnC,IAAI,YAAY,CAAC;QACjB,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,EAAE,CAAC,CAAC,UAAU,KAAK,OAAO,GAAG,CAAC,CAAC,CAAC;YAC9B,YAAY,GAAG,GAAG,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,IAAI,SAAS,CAAC,6CAA6C,CAAC,CAAC;QACrE,CAAC;QACD,IAAI,CAAC;YACH,uDAAuD;YACvD,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBAEjC,OAAO,CAAC,EAAE,EAAE,CAAC;oBACX,EAAE,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;wBACtE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,CAAC;gBACH,CAAC;gBAED,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;gBAE3B,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YAED,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC;gBAEpC,OAAO,CAAC,EAAE,EAAE,CAAC;oBACX,EAAE,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;wBACnD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACjB,CAAC;gBACH,CAAC;gBAED,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;gBAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAE9B,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,MAAM,GAAG,CAAC;QACZ,CAAC;IACH,CAAC;IAED;;;OAGG;IACI,KAAK;QACV,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC3B,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QAClC,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IACjC,CAAC;IAED;;;;;;;;;;OAUG;IACI,IAAI,CAAC,UAAiC,EAAE;QAC7C,IAAI,WAAoB,CAAC;QACzB,IAAI,gBAA6B,CAAC;QAClC,IAAI,UAAmB,CAAC;QACxB,CACE;YACE,WAAW;YACX,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW;YAC9C,UAAU,GAAG,KAAK;SACnB,GAAG,OAAO,CACZ,CAAC;QAEF,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAChC,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,CAAC,CAAC;QACN,IAAI,MAAM,CAAC;QAEX,qGAAqG;QACrG,EAAE,CAAC,CAAC,UAAU,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YAC/B,WAAW,GAAG,IAAI,CAAC;YACnB,gBAAgB,GAAG,2DAAW,CAAC,OAAO,CAAC;QACzC,CAAC;QAED,qIAAqI;QACrI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,WAAW,GAAG,IAAI,CAAC;YACnB,gBAAgB,GAAG,2DAAW,CAAC,IAAI,CAAC;QACtC,CAAC;QAED,8DAA8D;QAC9D,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACnC,oDAAoD;gBACpD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,IAAI,WAAW,CAAC,CAAC,CAAC;oBAChD,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;oBAClB,MAAM,GAAG,gBAAgB,CAAC;oBAE1B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;wBACzB,GAAG,GAAG,6DAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;4BACf,OAAO,GAAG,CAAC,KAAK,CAAC;4BACjB,OAAO,GAAG,CAAC,IAAI,CAAC;wBAClB,CAAC;wBACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBACnB,CAAC;oBACD,MAAM,CAAC,MAAM,CAAC;gBAChB,CAAC;gBAED,IAAI,CAAC,CAAC;oBACJ,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;gBACtB,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,sDAAsD;gBACtD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAChC,CAAC;QACH,CAAC;QAED,MAAM,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;QAC7B,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC;QAEhB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,IAAI,WAAW,CAAC,CAAC,CAAC;YAChD,MAAM,GAAG,gBAAgB,CAAC;YAC1B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzB,GAAG,GAAG,6DAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;gBACjC,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;oBACf,OAAO,GAAG,CAAC,KAAK,CAAC;oBACjB,OAAO,GAAG,CAAC,IAAI,CAAC;gBAClB,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3B,CAAC;QACH,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,cAA6B;QAClC,yEAAyE;QACzE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QACrC,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAEjC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;YACnC,sFAAsF;YACtF,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAE5C,4GAA4G;YAC5G,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;OAIG;IACI,MAAM;QACX,yEAAyE;QACzE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAC5D,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,SAAS,CAAO,WAAsD,EAAE,cAAiC;QAC9G,IAAI,CAAC;YACH,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;QACtD,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,MAAM,GAAG,CAAC;QACZ,CAAC;IACH,CAAC;IAED;;;;;;;;;;;;OAYG;IACH,qLAAqL;IACrL,qPAAqP;IACrP,MAAM,CAAC,QAAa,EAAE,WAA8B,EAAE,YAA+B,EAAE,MAAiB,EAAE,WAAiB;QAC7H,qPAAqP;QACjP,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,cAAc,CAAC;QACnB,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,eAAe,CAAC;QACpB,IAAI,GAAG,CAAC;QACR,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,iBAAiB,GAAG,OAAO,WAAW,KAAK,UAAU,CAAC;QAC1D,IAAI,kBAAkB,GAAG,OAAO,YAAY,KAAK,UAAU,CAAC;QAC5D,IAAI,OAAO,GAAG,EAAE,CAAC;QAEjB,mBAAmB;QACnB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAClC,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC;QAEjC,oBAAoB;QACpB,EAAE,CAAC,CAAC,QAAQ,YAAY,+DAAU,CAAC,CAAC,CAAC;YACnC,SAAS,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjD,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,YAAY,SAAS,CAAC,CAAC,CAAC;YACzC,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACnC,SAAS,GAAG,QAAQ,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,IAAI,SAAS,CAAC,6CAA6C,CAAC,CAAC;QACrE,CAAC;QACD,eAAe,GAAG,SAAS,CAAC,MAAM,CAAC;QAEnC,0BAA0B;QAC1B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE,CAAC;YACzC,GAAG,GAAG,kBAAkB,CAAC,CAAC,CAAE,YAAyB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAsB,CAAC,CAAC;YAC3G,OAAO,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACZ,MAAM,GAAG,CAAC,IAAS,EAAE,KAAU,EAAE,EAAE,CAAC,CAAC;gBACnC,IAAI;gBACJ,KAAK;aACN,CAAC,CAAC;QACL,CAAC;QAED,oDAAoD;QACpD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,EAAE,CAAC,EAAE,EAAE,CAAC;YACxC,GAAG,GAAG,iBAAiB,CAAC,CAAC,CAAE,WAAwB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,WAAqB,CAAC,CAAC;YACtG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACvD,CAAC;QAED,wCAAwC;QACxC,IAAI,CAAC,UAAU,GAAG,IAAI,+DAAU,CAAC,UAAU,CAAC,CAAC;QAC7C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAE/B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;OAOG;IACH,GAAG,CAAmB,MAAgD,EAAE,WAAmC;QACzG,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC9C,+CAA+C;QAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,+DAAU,CAAC,YAAY,CAAC,CAAC;QAC/C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAgB,CAAC,CAAC;QACzC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAE/B,MAAM,CAAC,IAA2B,CAAC;IACrC,CAAC;CACF;AAAA;AAAA;;;;;;;;;;;AC3vCD;AAAA;;;;;;;;GAQG;AAEH;;;;;GAKG;AACG,mBAAoB,KAAU,EAAE,KAAU;IAC9C,IAAI,GAAG,CAAC;IACR,IAAI,GAAG,CAAC;IACR,IAAI,EAAE,CAAC;IACP,IAAI,EAAE,CAAC;IAEP,EAAE,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC;QAAC,MAAM,CAAC,IAAI,CAAC;IAEjC,+BAA+B;IAC/B,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC;QAC/F,8DAA8D;QAC9D,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,2BAA2B;QAC3B,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QACrB,CAAC;IACH,CAAC;IAED,mCAAmC;IACnC,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACpB,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IAEpB,sCAAsC;IACtC,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,0GAA0G;IAC1G,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IACvB,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IAEvB,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;AACtB,CAAC;AAED;;;;;GAKG;AACG,kBAAmB,KAAU,EAAE,KAAU,EAAE,KAAc;IAC7D,IAAI,GAAG,CAAC;IACR,IAAI,GAAG,CAAC;IACR,IAAI,EAAE,CAAC;IACP,IAAI,EAAE,CAAC;IAEP,wEAAwE;IACxE,6DAA6D;IAC7D,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC;QAC/F,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,iGAAiG;YACjG;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,2BAA2B;QAC3B,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,kEAAkE;IAClE,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACpB,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IAEpB,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC3B,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC5B,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;QAAC,MAAM,CAAC,IAAI,CAAC;IAC/B,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC;IAChC,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC;IAEjC,0GAA0G;IAC1G,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IACvB,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IAEvB,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;QACd,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC;QACf,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,MAAM,CAAC,KAAK,CAAC;AACf,CAAC;AAED;;;;;;GAMG;AACG,kBAAmB,KAAU,EAAE,KAAU,EAAE,KAAc;IAC7D,IAAI,GAAG,CAAC;IACR,IAAI,GAAG,CAAC;IACR,IAAI,EAAE,CAAC;IACP,IAAI,EAAE,CAAC;IAEP,+BAA+B;IAC/B,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC;QAC/F,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,QAAQ;YACR;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,SAAS;gBACZ,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,KAAK;gBACR,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,IAAI;gBACP,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR,KAAK,EAAE;gBACL,EAAE,GAAG,CAAC,CAAC;gBACP,KAAK,CAAC;YACR;gBACE,EAAE,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAK,CAAC;QACV,CAAC;QAED,2BAA2B;QAC3B,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,kEAAkE;IAClE,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACpB,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACpB,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC3B,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC5B,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;QAAC,MAAM,CAAC,IAAI,CAAC;IAC/B,EAAE,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC;IAChC,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC;IAEjC,wEAAwE;IACxE,4CAA4C;IAC5C,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IACvB,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;IAEvB,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;QACd,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC;QACf,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,MAAM,CAAC,KAAK,CAAC;AACf,CAAC;AAED;;;;;;GAMG;AACG,oBAAqB,KAAU,EAAE,KAAU,EAAE,IAAS;IAC1D,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAAC,MAAM,CAAC,CAAC,CAAC;IAEtC,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,uDAAuD;IACvD,MAAM,CAAC,CAAC,CAAC;AACX,CAAC;;;;;;;;AC9TD;IACE,IAAI,IAAI,CAAC;IACT,CAAC,UAAU,MAAM;QACf,IAAI,GAAG,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,MAAM,IAAI,IAAI,CAAC,CAAC;IAC3C,MAAM,CAAC,IAAI,CAAC;AACd,CAAC;AAGD;IACE,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAC3B,MAAM,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAQ,CAAC;IACtC,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,GAAG,CAAC,GAAG,EACb,CAAC;IACJ,CAAC;IACD,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACrB,CAAC;AAED;;GAEG;AACI,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC;AAAA;AAAA;;;;;;;;;;;;;;ACtBJ;AACY;AAEd;AAE1B,+DAAe,EAAC,yDAAI,EAAC,EAAC;;;;;;;;;;;ACL2B;AACT;AAEI;AAI5C;IACE,EAAE,CAAC,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;IACxC,CAAC;IAED,MAAM,MAAM,GAAG,MAAM,KAAK,SAAS,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,iBAAiB,CAAC;IACxF,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACX,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,aAAa;QAChD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;QAClC,CAAC;IACH,CAAC;IAED,MAAM,SAAS,GAAG,MAAM,KAAK,SAAS,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,iBAAiB,CAAC;IAC3F,EAAE,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC;QAC3B,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACtF,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;QAClC,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;IAClC,CAAC;IAED,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QACf,MAAM,WAAW,CAAC,wBAAwB,CAAC,CAAC;IAC9C,CAAC;AACH,CAAC;AAEK,UAAY,SAAQ,wEAAgB;IA2BxC;;;;;;;;OAQG;IACH,YAAY,QAAQ,GAAG,SAAS,EAAE,UAAwB,EAAE;QAC1D,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,CACE;YACE,mBAAmB,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM;YAChF,oBAAoB,EAAE,IAAI,CAAC,qBAAqB,GAAG,MAAM;YACzD,OAAO,EAAE,IAAI,CAAC,QAAQ,GAAG,KAAK;YAC9B,GAAG,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,EAAE;SAC1B,GAAG,OAAO,CACZ,CAAC;QAEF,sEAAsE;QACtE,kCAAkC;QAClC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QAEzB,yCAAyC;QACzC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,2FAA2F;QAC3F,2FAA2F;QAC3F,8GAA8G;QAE9G,gEAAgE;QAChE,8EAA8E;QAC9E,mHAAmH;QACnH,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAE/B,gFAAgF;QAChF,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAEhC,+BAA+B;QAC/B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAElC,IAAI,CAAC,MAAM,GAAG;YACZ,MAAM,EAAE,EAAE;YACV,QAAQ,EAAE,EAAE;YACZ,cAAc,EAAE,EAAE;YAClB,OAAO,EAAE,EAAE;YACX,SAAS,EAAE,EAAE;YACb,SAAS,EAAE,EAAE;SACd,CAAC;QAEF,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IACrC,CAAC;IAED;;;;;;;;;;;;;OAaG;IACH,qBAAqB,CAAC,UAAmC,EAAE;QACzD,CACE;YACE,QAAQ,EAAE,IAAI,CAAC,SAAS,GAAG,KAAK;YAChC,gBAAgB,EAAE,IAAI,CAAC,iBAAiB,GAAG,IAAI;YAC/C,iBAAiB,EAAE,IAAI,CAAC,kBAAkB;YAC1C,OAAO;YACP,gCAAgC;YAChC,cAAc,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI;SAC5C,GAAG,OAAO,CACZ,CAAC;QAEF,MAAM,mBAAmB,GAAG;YAC1B,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC;YAC/D,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC;YAC1G,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC;YAC1G,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC;SACnE,CAAC;QAEF,MAAM,mBAAmB,GAAG;YAC1B,CAAC,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,EAAE,+DAAO,CAAC,eAAe,CAAC;YAC7D,CAAC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,EAAE,+DAAO,CAAC,kBAAkB,CAAC;YACnE,CAAC,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,EAAE,+DAAO,CAAC,oBAAoB,CAAC;YACvE,CAAC,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,EAAE,+DAAO,CAAC,mBAAmB,CAAC;SACtE,CAAC;QAEF,sBAAsB;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,KAAK,SAAS,CAAC,CAAC,CAAC;YAC1C,qDAAqD;YACrD,EAAE,CAAC,CAAC,OAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC;gBACxE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAChF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,KAAK,CAAC,6BAA6B,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;QAED,kGAAkG;QAClG,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;YACzD,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC,OAAO,CAAC;QAC7C,CAAC;QAED,4GAA4G;QAC5G,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,KAAK,IAAI,CAAC,CAAC,CAAC;YACtC,IAAI,0BAA0B,GAAG,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChE,EAAE,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;gBAC/B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,0BAA0B,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3D,EAAE,CAAC,CAAC,mBAAmB,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvD,IAAI,CAAC,kBAAkB,GAAG,0BAA0B,CAAC,CAAC,CAAC,CAAC;wBACxD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACpF,KAAK,CAAC;oBACR,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QAED,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,+IAA+I;QAC/I,IAAI,MAAM,CAAC;QACX,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YACrB,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC9C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QAED,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE;YACtB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,IAAI,CAAC,UAA4B,EAAE;QACjC,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAC,CAAC,CAAC;QAE/D,qEAAqE;QACrE,YAAY,CAAC,cAAc,CAAC,IAAI,EAAE;YAChC,gBAAgB,EAAE,IAAI;SACvB,CAAC,CAAC;QAEH,0FAA0F;QAC1F,EAAE,CAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC;YAClC,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC;YACpC,YAAY,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAExC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,YAAY,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBAChE,YAAY,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC;gBAClD,YAAY,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC;YAC5C,CAAC;QACH,CAAC;QAED,MAAM,CAAC,YAAY,CAAC;IACtB,CAAC;IAED;;;;;;;;;;;;;OAaG;IACH,aAAa,CAAmB,IAAY,EAAE,UAA8B,EAAE;QAC5E,MAAM,UAAU,GAAG,IAAI,+DAAU,CAAI,IAAI,EAAE,OAAO,CAAC,CAAC;QACpD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEnC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;QAC/B,CAAC;QACD,MAAM,CAAC,UAA2B,CAAC;IACrC,CAAC;IAED,cAAc,CAAC,UAAsB;QACnC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;YACrB,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;QACvE,CAAC;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAED;;;;OAIG;IACH,aAAa,CAAmB,cAAsB;QACpD,IAAI,CAAC,CAAC;QACN,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;QAErC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;gBACjD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAkB,CAAC;YAC/C,CAAC;QACH,CAAC;QAED,qBAAqB;QACrB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,aAAa,GAAG,cAAc,GAAG,YAAY,CAAC,CAAC;QACpE,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACH,gBAAgB,CAAC,OAAe,EAAE,OAAe;QAC/C,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC;QACnB,CAAC;QAED,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAED,eAAe;QACb,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAClD,KAAK,CAAC,IAAI,CAAC;gBACT,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI;gBAC/B,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM;aACxC,CAAC,CAAC;QACL,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,gBAAgB,CAAC,cAAsB;QACrC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,cAAc,CAAC,CAAC,CAAC;gBACjD,MAAM,MAAM,GAAG,IAAI,+DAAU,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;gBAClD,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBACpC,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,MAAM,CAAC,CAAC,CAAC;oBAC1B,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,SAAS,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;wBAC7D,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;oBAC9B,CAAC;gBACH,CAAC;gBACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC/B,MAAM,CAAC;YACT,CAAC;QACH,CAAC;IACH,CAAC;IAED,OAAO;QACL,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED;;;;OAIG;IACH,SAAS,CAAC,UAAiC,EAAE;QAC3C,EAAE,CAAC,CAAC,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC,CAAC,CAAC;YAC9C,OAAO,CAAC,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC1D,CAAC;QAED,MAAM,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACpC,KAAK,IAAI,CAAC,mBAAmB,CAAC,MAAM;gBAClC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC9B,KAAK,IAAI,CAAC,mBAAmB,CAAC,MAAM;gBAClC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YACvC,KAAK,IAAI,CAAC,mBAAmB,CAAC,YAAY;gBACxC,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,sBAAsB;YAC7D;gBACE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAED,qBAAqB;IACrB,MAAM;QACJ,MAAM,CAAC;YACL,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,oBAAoB,EAAE,IAAI,CAAC,oBAAoB;YAC/C,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,mBAAmB,EAAE,IAAI,CAAC,mBAAmB;YAC7C,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;YAC3C,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,QAAQ,EAAE,IAAI,CAAC,QAAQ;SACxB,CAAC;IACJ,CAAC;IAED;;;;;;;;;;;;;OAaG;IACH,qBAAqB,CAAC,UAA6C,EAAE;QACnE,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;YACtC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;QAC9B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC;QACjD,CAAC;QAED,wGAAwG;QACxG,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,IAAI,IAAI,OAAO,CAAC,SAAS,KAAK,SAAS,IAAI,OAAO,CAAC,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9F,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC;gBAC9B,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,eAAe,EAAE,OAAO,CAAC,SAAS;aACnC,CAAC,CAAC;QACL,CAAC;QAED,gGAAgG;QAChG,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAE5B,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAC1D,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC;QACrC,CAAC;QAED,8DAA8D;QAC9D,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,IAAI,IAAI,OAAO,CAAC,SAAS,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7D,+EAA+E;YAC/E,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC;gBACtB,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM;aACrD,CAAC,CAAC;QACL,CAAC;QAED,8DAA8D;QAC9D,6DAA6D;QAC7D,MAAM,WAAW,GAAa,EAAE,CAAC;QACjC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;YAChC,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM;SACrD,CAAW,CAAC,CAAC;QAEd,MAAM,GAAG,IAAI,CAAC;QAEd,gDAAgD;QAChD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACxD,IAAI,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC;gBACpC,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,eAAe,EAAE,GAAG;aACrB,CAAC,CAAC;YAEH,sGAAsG;YACtG,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,KAAK,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;gBACjE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAC3B,MAAM,IAAI,KAAK,CAAC,2FAA2F,CAAC,CAAC;gBAC/G,CAAC;gBAED,6EAA6E;gBAC7E,uEAAuE;gBACvE,uEAAuE;gBACvE,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC;oBAChD,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC/B,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;gBACtB,CAAC;gBACD,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACvB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,WAAW,CAAC,IAAI,CAAC,MAAgB,CAAC,CAAC;YACrC,CAAC;QACH,CAAC;QAED,kFAAkF;QAClF,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YACxB,8GAA8G;YAC9G,uGAAuG;YACvG,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,WAAW,CAAC;YACrB,CAAC;YAID,IAAI,CAAC,CAAC;gBACJ,MAAM,CAAC,WAAW,CAAC;YACrB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,wEAAwE;YACxE,iEAAiE;YACjE,yGAAyG;YACzG,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;gBACtB,+BAA+B;gBAC/B,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAErB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC7C,CAAC;YAGD,IAAI,CAAC,CAAC;gBACJ,+BAA+B;gBAC/B,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAErB,MAAM,CAAC,WAAW,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;;OASG;IACH,mBAAmB,CAAC,UAAe,EAAE;QACnC,IAAI,QAAQ,CAAC;QACb,IAAI,MAAM,CAAC;QACX,IAAI,WAAW,GAAG,EAAE,CAAC;QAErB,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC,CAAC,CAAC;YAC1C,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;QACjF,CAAC;QAED,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAElE,WAAW,GAAG,EAAE,CAAC;QAEjB,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,QAAQ,EAAE,MAAM,EAAE,EAAE,CAAC;YAC7C,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC5F,CAAC;QAED,WAAW;QACX,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;YACtB,wEAAwE;YACxE,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAErB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC7C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,eAAe;YACf,MAAM,CAAC,WAAW,CAAC;QACrB,CAAC;IACH,CAAC;IAED;;;;;;;;;;;;;;OAcG;IACH,uBAAuB,CAAC,kBAAuB,EAAE,UAA6C,EAAE;QAC9F,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,IAAI,SAAS,CAAC;QACd,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,IAAI,IAAI,GAAG,KAAK,CAAC;QACjB,IAAI,UAAU,CAAC;QAEf,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;YACtC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;QAC9B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC;QACjD,CAAC;QAED,cAAc;QACd,8GAA8G;QAC9G,gIAAgI;QAChI,wBAAwB;QACxB,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;YACxB,0BAA0B;YAC1B,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;gBACpC,UAAU;gBACV,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7B,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;oBAExC,MAAM,CAAC,GAAG,CAAC;gBACb,CAAC;gBAED,sCAAsC;gBACtC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;YACxF,CAAC;YAED,sDAAsD;YACtD,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC;YACpC,GAAG,CAAC,CAAC,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC;gBACvD,iHAAiH;gBACjH,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;YAC5G,CAAC;YAED,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAED,kBAAkB;QAClB,wEAAwE;QACxE,kIAAkI;QAElI,IAAI;QACJ,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;YACtB,SAAS,GAAG,kBAAkB,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACxD,kBAAkB,GAAG,IAAI,CAAC,CAAC,wBAAwB;YACnD,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC;YAEvB,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;gBACd,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,SAAS,GAAG,kBAAkB,CAAC;QACjC,CAAC;QAED,+CAA+C;QAC/C,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/B,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC;QACpC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QAEpB,OAAO,CAAC,IAAI,EAAE,CAAC;YACb,iEAAiE;YACjE,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBAChC,mDAAmD;gBACnD,EAAE,CAAC,CAAC,EAAE,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC;oBAC5B,IAAI,GAAG,IAAI,CAAC;gBACd,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC9C,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACpD,CAAC;YAED,6CAA6C;YAC7C,SAAS,CAAC,SAAS,EAAE,CAAC,GAAG,IAAI,CAAC;QAChC,CAAC;QAED,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;;;;OASG;IACH,qBAAqB,CAAmB,kBAAqC,EAAE,UAA6C,EAAE;QAC5H,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;YACtC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;QAC9B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YACpC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC;QACjD,CAAC;QAED,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;YACtB,SAAS,GAAI,kBAA6B,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACpE,SAAS,CAAC,GAAG,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,SAAS,GAAG,kBAA8B,CAAC;QAC7C,CAAC;QAED,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAChD,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QAC9C,CAAC;QACD,MAAM,CAAC,SAA0B,CAAC;IACpC,CAAC;IAED;;;;;;OAMG;IACH,QAAQ,CAAC,YAA+B,EAAE,OAAa;QACrD,IAAI,QAAQ,CAAC;QACb,EAAE,CAAC,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC9B,QAAQ,GAAG,EAAE,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,wEAAwE;YACxE,MAAM,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAClC,KAAK,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;gBACrC,KAAK,IAAI,CAAC,mBAAmB,CAAC,MAAM;oBAClC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAsB,CAAC,CAAC;oBAC9C,KAAK,CAAC;gBACR,KAAK,IAAI,CAAC,mBAAmB,CAAC,YAAY;oBACxC,QAAQ,GAAG,IAAI,CAAC,uBAAuB,CAAC,YAAY,CAAC,CAAC;oBACtD,KAAK,CAAC;gBACR;oBACE,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAsB,CAAC,CAAC;oBAC9C,KAAK,CAAC;YACV,CAAC;QACH,CAAC;QACD,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;IACzC,CAAC;IAED;;;;;;OAMG;IACH,cAAc,CAAC,QAAa,EAAE,UAAyC,EAAE;QACvE,MAAM,GAAG,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAErE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,+DAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;QACvF,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACH,KAAK;QACH,IAAI,KAAK,CAAC;QACV,0EAA0E;QAC1E,sGAAsG;QACtG,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,kCAAkC;YAClC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACxD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACjC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;oBAC5B,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;QACH,CAAC;QAED,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACtC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;kCAE8B;IAE9B;;;OAGG;IAEH;;;;;;;;OAQG;IACH,2BAA2B,CAAC,sBAAiC;QAC3D,IAAI,OAAO,GAAU,EAAE,CAAC;QACxB,MAAM,mBAAmB,GAAG,sBAAsB;eAC7C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAgB,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5D,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YACjC,EAAE,CAAC,CAAC,mBAAmB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClD,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;YAC9C,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAED;;;OAGG;IACH,gBAAgB,CAAC,oBAA+B;QAC9C,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC,CAAC;IAChF,CAAC;IAED;;OAEG;IACH,YAAY;QACV,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YACjC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;;;;;;OASG;IACH,kBAAkB,CAAC,UAAsC,EAAE;QACzD,MAAM,GAAG,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;QAEnC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC1B,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC;YACxC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC;QAC/B,CAAC;QACD,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC,CAAC,CAAC;YAC7C,OAAO,CAAC,kBAAkB,GAAG,KAAK,CAAC;QACrC,CAAC;QACD,EAAE,CAAC,CAAC,OAAO,CAAC,0BAA0B,KAAK,SAAS,CAAC,CAAC,CAAC;YACrD,OAAO,CAAC,0BAA0B,GAAG,IAAI,CAAC;QAC5C,CAAC;QACD,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;YAClC,OAAO,CAAC,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;QAC/B,CAAC;QAED,qBAAqB;QACrB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC;YAChE,qFAAqF;YACrF,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC1B,0DAA0D;gBAC1D,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBACtG,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,IAAI,IAAI,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC;wBAC/E,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;4BACzG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;wBAC5B,CAAC;wBACD,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;oBAC1C,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;oBAC3B,CAAC;gBACH,CAAC,CAAC,CAAC;YACL,CAAC;YAED,IAAI,CAAC,CAAC;gBACJ,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACK,aAAa,CAAC,OAAO,GAAG,EAAE;QAChC,+EAA+E;QAC/E,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,KAAK,IAAI,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAC;QACxE,CAAC;QAED,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACzE,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;YACjB,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC1B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,QAAQ,GAAG,QAAkB,CAAC;gBAC9B,mGAAmG;gBACnG,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,QAAQ,IAAI,QAAQ,KAAK,IAAI,IAAI,CAAC,CAAC,QAAQ,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC;oBACxF,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;oBACvC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBAC1B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,QAAQ,YAAY,KAAK,CAAC;wBAC5B,MAAM,QAAQ,CAAC;oBAEjB,MAAM,IAAI,SAAS,CAAC,wEAAwE,CAAC,CAAC;gBAChG,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;;;;;;;;;;;OAcG;IACI,YAAY,CAAC,UAAoC,EAAE;QACxD,6CAA6C;QAC7C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC1B,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC;QAED,qEAAqE;QACrE,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChD,8CAA8C;YAC9C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACjE,6EAA6E;gBAC7E,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;YACpC,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC;QACpC,CAAC,EAAE,GAAG,EAAE;YACN,MAAM,IAAI,KAAK,CAAC,8DAA8D,CAAC,CAAC;QAClF,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,aAAa;QACnB,+EAA+E;QAC/E,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,KAAK,IAAI,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAC;QACxE,CAAC;QAED,IAAI,KAAK,CAAC;QAEV,8EAA8E;QAC9E,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,KAAK,WAAW,IAAI,OAAO,IAAI,CAAC,mBAAmB,CAAC,cAAc,KAAK,UAAU,CAAC,CAAC,CAAC;YACnH,sFAAsF;YACtF,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,EAAC,qBAAqB,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;QAC3G,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAY,CAAC,CAAC;QAC3F,CAAC;QAED,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YACtC,gCAAgC;YAChC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBACxD,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;YACvC,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;;;;;OAQG;IACH,YAAY;QACV,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC1B,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC9B,CAAC;QAED,mFAAmF;QACnF,qFAAqF;QACrF,kCAAkC;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,IAAI,IAAI,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC;YAC/E,IAAI,CAAC,qBAAqB,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACjF,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;gBAClC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;gBAClC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YAC7B,CAAC,CAAC,CAAC;QACL,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC;QACpC,CAAC;QACD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YAC1D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC;IACpC,CAAC;IAED;;;;OAIG;IACH,cAAc;QACZ,+EAA+E;QAC/E,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,KAAK,IAAI,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAC;QACxE,CAAC;QAED,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IACjF,CAAC;IAED;;OAEG;IACH,cAAc;QACZ,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC;QACT,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,eAAe,GAAG,GAAG,EAAE;YAC1B,OAAO,GAAG,KAAK,CAAC;YAChB,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;QACnC,CAAC,CAAC;QAEF,UAAU,CAAC,GAAG,EAAE;YACd,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACZ,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACjE,CAAC;QACH,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;IACH,CAAC;CACF;AAAA;AAAA;AAED,WAAiB,IAAI;IAgDnB,IAAY,mBAIX;IAJD,WAAY,mBAAmB;QAC7B,iEAAM;QACN,iEAAM;QACN,6EAAY;IACd,CAAC,EAJW,mBAAmB,GAAnB,wBAAmB,KAAnB,wBAAmB,QAI9B;IAED,IAAY,iBAMX;IAND,WAAY,iBAAiB;QAC3B,qEAAU;QACV,2EAAa;QACb,+EAAe;QACf,6EAAc;QACd,+DAAO;IACT,CAAC,EANW,iBAAiB,GAAjB,sBAAiB,KAAjB,sBAAiB,QAM5B;IAED,IAAY,WAMX;IAND,WAAY,WAAW;QACrB,mDAAO;QACP,+DAAa;QACb,mDAAO;QACP,mDAAO;QACP,iDAAM;IACR,CAAC,EANW,WAAW,GAAX,gBAAW,KAAX,gBAAW,QAMtB;AACH,CAAC,EArEgB,IAAI,KAAJ,IAAI,QAqEpB;;;;;;;;;AC1lCK;IAMJ;;;OAGG;IACH,YAAY,aAA8B;QACxC,IAAI,CAAC,MAAM,GAAG,aAAa,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAED;;;;OAIG;IACI,GAAG,CAAC,GAAQ,EAAE,GAAW;QAC9B,MAAM,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACpC,EAAE,CAAC,CAAC,UAAU,KAAK,IAAI,IAAI,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;YACpD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC3C,MAAM,IAAI,KAAK,CAAC,6BAA6B,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,UAAU,CAAC,CAAC;YACnF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC;YACjC,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;OAIG;IACI,GAAG,CAAC,KAAsB;QAC/B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,GAAQ,EAAE,GAAW;QACjC,0CAA0C;QAC1C,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC9C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzC,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpC,KAAK,CAAC;YACR,CAAC;QACH,CAAC;QACD,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACrB,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,KAAsB;QAClC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YACtC,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,IAAI,KAAK,CAAC,8BAA8B,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;IAED;;OAEG;IACI,KAAK;QACV,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;CACF;AAAA;AAAA;;;;;;;;;;AC7EgD;AACX;AAOtC;;;;;;;;;;;;;;GAcG;AACG,iBAA8C,SAAQ,wEAAgB;IAuB1E;;;;;;;;OAQG;IACH,YAAY,UAAyB,EAAE,IAAY,EAAE,UAA+B,EAAE;QACpF,KAAK,EAAE,CAAC;QACR,CACE;YACE,UAAU,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK;YACpC,YAAY,EAAE,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,YAAY,CAAC,OAAO;YACnE,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,GAAG,CAAC;SACjD,GAAG,OAAO,CACZ,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAE7B,uFAAuF;QACvF,yEAAyE;QACzE,uEAAuE;QAEvE,IAAI,CAAC,UAAU,GAAG,IAAI,6DAAS,CAAC,UAAU,CAAC,CAAC;QAC5C,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAE3B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,+BAA+B;QAC/B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1B,2BAA2B;QAC3B,oFAAoF;QACpF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,kEAAkE;QAClE,4EAA4E;QAE5E,IAAI,CAAC,MAAM,GAAG;YACZ,SAAS,EAAE,EAAE;SACd,CAAC;IACJ,CAAC;IAED;;;;;;;;;OASG;IACH,cAAc,CAAC,EAAC,kBAAkB,GAAG,KAAK,EAAC;QACzC,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QAER,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,6DAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAElD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACzB,CAAC;QAED,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;YACvB,4EAA4E;YAC5E,8DAA8D;YAC9D,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAClC,GAAG,GAAG,GAAG,CAAC;YACV,OAAO,GAAG,EAAE,EAAE,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;oBAC/C,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC5C,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACpF,CAAC;oBACD,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;gBAChC,CAAC;YACH,CAAC;QACH,CAAC;QAED,+EAA+E;QAC/E,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC;QACjC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1B,yCAAyC;QACzC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;QACjB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;YAC/B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC;QAED,kFAAkF;QAClF,IAAI,CAAC,IAAI,EAAE,CAAC;QAEZ,uDAAuD;QACvD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAE3B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;;OAQG;IACH,eAAe,CAAC,SAAyB,EAAE,UAAmB;QAC5D,MAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;QACpC,EAAE,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;YAC5B,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IAC7C,CAAC;IAED;;;OAGG;IACH,MAAM;QACJ,MAAM,CAAC;YACL,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,mBAAmB,EAAE,IAAI,CAAC,mBAAmB;YAC7C,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,aAAa,EAAE,IAAI;YACnB,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,UAAU,EAAE,IAAI,CAAC,UAAU;SAC5B,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,UAAe,EAAE,GAAQ;QAC7C,IAAI,EAAE,GAAG,IAAI,WAAW,CAAC,UAAU,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAC5D,EAAE,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QACrC,EAAE,CAAC,eAAe,GAAG,GAAG,CAAC,eAAe,CAAC;QACzC,EAAE,CAAC,WAAW,GAAG,EAAE,CAAC;QAEpB,EAAE,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;QACrC,EAAE,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,CAAC;QACvC,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;QAC/B,EAAE,CAAC,UAAU,CAAC,YAAY,GAAG,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC;QACzD,EAAE,CAAC,UAAU,CAAC,iBAAiB,GAAG,GAAG,CAAC,UAAU,CAAC,iBAAiB,CAAC;QACnE,EAAE,CAAC,cAAc,CAAC;YAChB,kBAAkB,EAAE,IAAI;SACzB,CAAC,CAAC;QACH,MAAM,CAAC,EAAE,CAAC;IACZ,CAAC;IAED;;;;OAIG;IACI,aAAa,CAAC,EAAC,cAAc,GAAG,KAAK,EAAC,GAAG,EAAE;QAChD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,+BAA+B;QAC/B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1B,2BAA2B;QAC3B,oFAAoF;QACpF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,EAAE,CAAC,CAAC,cAAc,KAAK,IAAI,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;IACH,CAAC;IAED;;;;;;;;;;;OAWG;IACI,SAAS,CAAC,UAAsC;QACrD,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC;QAChC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;;OAQG;IACI,eAAe,CAAC,QAAgB,EAAE,MAAgB;QACvD,IAAI,CAAC,aAAa,GAAG;YACnB,CAAC,QAAQ,EAAE,MAAM,IAAI,KAAK,CAAC;SAC5B,CAAC;QACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;;;;;;OAYG;IACI,iBAAiB,CAAC,QAAwC;QAC/D,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,kBAAkB,CAAC,SAAS,GAAG,KAAK;QACzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,UAAU;QACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;IACtC,CAAC;IAED;;;OAGG;IACI,gBAAgB;QACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QAC/C,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,MAAM;QACX,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,QAAQ;QACb,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAExC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,oFAAoF;YACpF,+GAA+G;YAC/G,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAE1C,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACK,oBAAoB,CAAC,GAAoB;QAC/C,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YACvD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;gBACzE,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBAC1C,MAAM,CAAC,GAAG,CAAC;gBACb,CAAC;YACH,CAAC;QACH,CAAC;QACD,MAAM,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC;IAED;;;;OAIG;IACK,UAAU,CAAC,MAAiB;QAClC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC3C,CAAC;IAED;;;;OAIG;IACI,cAAc;QACnB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QAExB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC;QACrC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1B,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;YAC5D,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAChC,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,WAAW,CAAC,MAAiB;QAClC,MAAM,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClD,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;YACnC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAC/B,CAAC;QAED,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAExB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,CAAC,CAAC;YAC7E,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,SAAS,CAAC,KAAa,EAAE,MAAuB,EAAE;QACvD,IAAI,CAAC,WAAW,CAAC;YACf,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,KAAK;YACV,GAAG;SACJ,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACI,UAAU,CAAC,GAAwB,EAAE,GAAqB;QAC/D,IAAI,CAAC,WAAW,CAAC;YACf,IAAI,EAAE,OAAO;YACb,GAAG,EAAE,GAAG;YACR,GAAG;SACJ,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACI,YAAY,CAAC,GAAoB;QACtC,MAAM,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACZ,MAAM,IAAI,KAAK,CAAC,kDAAkD,GAAG,GAAG,CAAC,CAAC;QAC5E,CAAC;QAED,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACpC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACI,KAAK;QACV,2FAA2F;QAC3F,sFAAsF;QACtF,8EAA8E;QAC9E,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QAC5C,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IACjC,CAAC;IAED;;;;;;;;;;;OAWG;IACH,IAAI,CAAC,UAAkB,EAAE;QACvB,uFAAuF;QACvF,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,iBAAiB,CAAC;gBACrB,oBAAoB,EAAE,IAAI;aAC3B,CAAC,CAAC;QACL,CAAC;QACD,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IACnF,CAAC;IAED;;;OAGG;IACK,kBAAkB;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAE5B,UAAU,CAAC,GAAG,EAAE;YACd,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAC/B,CAAC;IAED;;;;OAIG;IACK,eAAe;QACrB,6CAA6C;QAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,KAAK,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3D,yFAAyF;YACzF,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAC/B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,iHAAiH;YACjH,iDAAiD;YACjD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;IAED;;OAEG;IACK,iBAAiB,CAAC,UAA8C,EAAE;QACxE,kGAAkG;QAClG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YAC5C,MAAM,CAAC;QACT,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YACnD,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACrD,CAAC;YAED,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,kDAAkD;YAClD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC7B,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC7B,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACH,iBAAiB,CAAC,QAAgB,EAAE,KAAc;QAChD,wEAAwE;QACxE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAC5C,CAAC;YACD,uCAAuC;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;YACD,MAAM,CAAC;QACT,CAAC;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC;QACzC,MAAM,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzD,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QAE1B,+FAA+F;QAC/F,2GAA2G;QAC3G,MAAM,aAAa,GAAG,IAAI,6DAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACtD,aAAa,CAAC,YAAY,GAAG,CAAC,QAAQ,CAAC,CAAC;QACxC,aAAa,CAAC,iBAAiB,GAAG,IAAI,CAAC;QACvC,IAAI,MAAM,CAAC;QACX,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;YACtE,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YACnC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;QAED,+EAA+E;QAC/E,MAAM,MAAM,GAAG,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAElE,gDAAgD;QAChD,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,MAAM,KAAK,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAE3C,4CAA4C;QAC5C,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEnB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACzD,CAAC;YAED,uCAAuC;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;YAED,MAAM,CAAC;QACT,CAAC;QAED,+CAA+C;QAC/C,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAEtB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACrC,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBAExB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;YAED,gDAAgD;YAChD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;YACD,MAAM,CAAC;QACT,CAAC;QAED,qEAAqE;QACrE,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,kGAAkG;gBAClG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7D,CAAC;YAED,gDAAgD;YAChD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC;IACH,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,QAAgB;QAC9B,wEAAwE;QACxE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAC5C,CAAC;YACD,gDAAgD;YAChD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;YACD,MAAM,CAAC;QACT,CAAC;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC;QACzC,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,GAAG,CAAC;QAER,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,yEAAyE;YACzE,EAAE,CAAC,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC9B,GAAG,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBAExB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACxD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;YAED,IAAI,CAAC,CAAC;gBACJ,GAAG,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBAExB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,MAAM,GAAG,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;YAED,gDAAgD;YAChD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC;QAED,gEAAgE;QAChE,0DAA0D;QAC1D,6FAA6F;QAC7F,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACpB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YAClC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;gBACxB,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;YACb,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACI,SAAS,CAAO,WAAsD,EAAE,cAAiC;QAC9G,IAAI,CAAC;YACH,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;QACtD,CAAC;QAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,MAAM,GAAG,CAAC;QACZ,CAAC;IACH,CAAC;CACF;AAAA;AAAA;AAED,WAAiB,WAAW;IAO1B,IAAY,YAGX;IAHD,WAAY,YAAY;QACtB,qDAAO;QACP,mDAAM;IACR,CAAC,EAHW,YAAY,GAAZ,wBAAY,KAAZ,wBAAY,QAGvB;AACH,CAAC,EAXgB,WAAW,KAAX,WAAW,QAW3B","file":"lokijs.loki.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@lokijs/loki\"] = factory();\n\telse\n\t\troot[\"@lokijs/loki\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1ac6fef0809affa3cb67","export type ANY = any;\n\n/**\n * LokiEventEmitter is a minimalist version of EventEmitter. It enables any\n * constructor that inherits EventEmitter to emit events and trigger\n * listeners that have been added to the event through the on(event, callback) method\n *\n * @constructor LokiEventEmitter\n */\nexport class LokiEventEmitter {\n  /**\n   * A map, with each property being an array of callbacks.\n   */\n  protected events: object;\n\n  /**\n   * Determines whether or not the callbacks associated with each event should happen in an async fashion or not.\n   * Default is false, which means events are synchronous\n   */\n  protected asyncListeners: boolean;\n\n  constructor() {\n    this.events = {};\n    this.asyncListeners = false;\n  }\n\n  /**\n   * on(eventName, listener) - adds a listener to the queue of callbacks associated to an event\n   * @param {string|string[]} eventName - the name(s) of the event(s) to listen to\n   * @param {function} listener - callback function of listener to attach\n   * @returns {int} the index of the callback in the array of listeners for a particular event\n   */\n  on(eventName: string | string[], listener: Function) {\n    let event;\n\n    if (Array.isArray(eventName)) {\n      eventName.forEach((currentEventName) => {\n        this.on(currentEventName, listener);\n      });\n      return listener;\n    }\n\n    event = this.events[eventName];\n    if (!event) {\n      event = this.events[eventName] = [];\n    }\n    event.push(listener);\n    return listener;\n  }\n\n  /**\n   * emit(eventName, data) - emits a particular event\n   * with the option of passing optional parameters which are going to be processed by the callback\n   * provided signatures match (i.e. if passing emit(event, arg0, arg1) the listener should take two parameters)\n   * @param {string} eventName - the name of the event\n   * @param {object} data - optional object passed with the event\n   */\n  emit(eventName: string, ...data: ANY[]) {\n    if (eventName && this.events[eventName]) {\n      this.events[eventName].forEach((listener: Function) => {\n        if (this.asyncListeners) {\n          setTimeout(() => {\n            listener(...data);\n          }, 1);\n        } else {\n          listener(...data);\n        }\n\n      });\n    }\n  }\n\n  /**\n   * Alias of LokiEventEmitter.prototype.on\n   * addListener(eventName, listener) - adds a listener to the queue of callbacks associated to an event\n   * @param {string|string[]} eventName - the name(s) of the event(s) to listen to\n   * @param {function} listener - callback function of listener to attach\n   * @returns {int} the index of the callback in the array of listeners for a particular event\n   */\n  addListener(eventName: string | string[], listener: Function) {\n    return this.on(eventName, listener);\n  }\n\n  /**\n   * removeListener() - removes the listener at position 'index' from the event 'eventName'\n   * @param {string|string[]} eventName - the name(s) of the event(s) which the listener is attached to\n   * @param {function} listener - the listener callback function to remove from emitter\n   */\n  removeListener(eventName: string | string[], listener: Function) {\n    if (Array.isArray(eventName)) {\n      eventName.forEach((currentEventName) => {\n        this.removeListener(currentEventName, listener);\n      });\n    }\n\n    if (this.events[eventName as string]) {\n      const listeners = this.events[eventName as string];\n      listeners.splice(listeners.indexOf(listener), 1);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/event_emitter.ts","import {LokiEventEmitter} from \"./event_emitter\";\nimport {UniqueIndex} from \"./unique_index\";\nimport {Resultset} from \"./resultset\";\nimport {DynamicView} from \"./dynamic_view\";\nimport {ltHelper, gtHelper, aeqHelper} from \"./helper\";\nimport {Loki} from \"./loki\";\nimport {clone, CloneMethod} from \"./clone\";\nimport {Doc, Dict, Query} from \"../../common/types\";\nimport {FullTextSearch} from \"../../full-text-search/src/full_text_search\";\nimport {PLUGINS} from \"../../common/plugin\";\nimport {Tokenizer} from \"../../full-text-search/src/tokenizer\";\n\nexport type ANY = any;\nexport {CloneMethod} from \"./clone\";\n\n/**\n * General utils, including statistical functions\n */\nfunction isDeepProperty(field: string) {\n  return field.indexOf(\".\") !== -1;\n}\n\nfunction average(array: number[]) {\n  return (array.reduce((a, b) => a + b, 0)) / array.length;\n}\n\nfunction standardDeviation(values: number[]) {\n  const avg = average(values);\n  const squareDiffs = values.map((value) => {\n    const diff = value - avg;\n    return diff * diff;\n  });\n\n  const avgSquareDiff = average(squareDiffs);\n  return Math.sqrt(avgSquareDiff);\n}\n\nfunction deepProperty(obj: object, property: string, isDeep: boolean) {\n  if (isDeep === false) {\n    // pass without processing\n    return obj[property];\n  }\n  const pieces = property.split(\".\");\n  let root = obj;\n  while (pieces.length > 0) {\n    root = root[pieces.shift()];\n  }\n  return root;\n}\n\n/**\n * Collection class that handles documents of same type\n * @extends LokiEventEmitter\n */\nexport class Collection<E extends object = object> extends LokiEventEmitter {\n\n  public name: string;\n  // the data held by the collection\n  public data: Doc<E>[];\n  private idIndex: number[]; // index of id\n  public binaryIndices: Dict<Collection.BinaryIndex>; // user defined indexes\n\n  /**\n   * Unique contraints contain duplicate object references, so they are not persisted.\n   * We will keep track of properties which have unique contraint applied here, and regenerate on load.\n   */\n  public constraints = {\n    unique: {}\n  };\n\n  /**\n   * Transforms will be used to store frequently used query chains as a series of steps which itself can be stored along\n   * with the database.\n   */\n  public transforms: {};\n\n  /**\n   * In autosave scenarios we will use collection level dirty flags to determine whether save is needed.\n   * currently, if any collection is dirty we will autosave the whole database if autosave is configured.\n   * Defaulting to true since this is called from addCollection and adding a collection should trigger save.\n   */\n  public dirty: boolean;\n\n  private cachedIndex: ANY;\n  private cachedBinaryIndex: ANY;\n  private cachedData: ANY;\n\n  /**\n   * If set to true we will optimally keep indices 'fresh' during insert/update/remove ops (never dirty/never needs rebuild).\n   * If you frequently intersperse insert/update/remove ops between find ops this will likely be significantly faster option.\n   */\n  public adaptiveBinaryIndices: boolean;\n\n  /**\n   * Is collection transactional.\n   */\n  private transactional: boolean;\n\n\n  /**\n   * Options to clone objects when inserting them.\n   */\n  public cloneObjects: boolean;\n\n  /**\n   * Default clone method (if enabled) is parse-stringify.\n   */\n  public cloneMethod: CloneMethod;\n\n\n  /**\n   * Disable track changes.\n   */\n  private disableChangesApi: boolean;\n\n  /**\n   * Disable delta update object style on changes.\n   */\n  public disableDeltaChangesApi: ANY;\n\n  /**\n   * By default, if you insert a document into a collection with binary indices, if those indexed properties contain\n   * a DateTime we will convert to epoch time format so that (across serializations) its value position will be the\n   * same 'after' serialization as it was 'before'.\n   */\n  private serializableIndices: boolean;\n\n  /**\n   * Option to activate a cleaner daemon - clears \"aged\" documents at set intervals.\n   */\n  public ttl: ANY;\n\n  private maxId: number;\n  private _dynamicViews: DynamicView<E>[];\n\n  /**\n   * Changes are tracked by collection and aggregated by the db.\n   */\n  private changes: Collection.Change[];\n\n  /* assign correct handler based on ChangesAPI flag */\n  private insertHandler: ANY;\n  private updateHandler: ANY;\n\n  public console: ANY;\n  private stages: object;\n  private commitLog: ANY[];\n\n  public _fullTextSearch: FullTextSearch;\n\n  /**\n   * @param {string} name - collection name\n   * @param {(object)} [options={}] - a configuration object\n   * @param {string[]} [options.unique=[]] - array of property names to define unique constraints for\n   * @param {string[]} [options.exact=[]] - array of property names to define exact constraints for\n   * @param {string[]} [options.indices=[]] - array property names to define binary indexes for\n   * @param {boolean} [options.adaptiveBinaryIndices=true] - collection indices will be actively rebuilt rather than lazily\n   * @param {boolean} [options.asyncListeners=false] - whether listeners are invoked asynchronously\n   * @param {boolean} [options.disableChangesApi=true] - set to false to enable Changes API\n   * @param {boolean} [options.disableDeltaChangesApi=true] - set to false to enable Delta Changes API (requires Changes API, forces cloning)\n   * @param {boolean} [options.clone=false] - specify whether inserts and queries clone to/from user\n   * @param {boolean} [options.serializableIndices =true] - converts date values on binary indexed property values are serializable\n   * @param {string} [options.cloneMethod=CloneMethod.DEEP] - the clone method\n   * @param {number} [options.transactional=false] - ?\n   * @param {number} options.ttl - ?\n   * @param {number} options.ttlInterval - time interval for clearing out 'aged' documents; not set by default.\n   * @see {@link Loki#addCollection} for normal creation of collections\n   */\n  constructor(name: string, options: Collection.Options = {}) {\n    super();\n    // the name of the collection\n    this.name = name;\n    // the data held by the collection\n    this.data = [];\n    this.idIndex = []; // index of id\n    this.binaryIndices = {}; // user defined indexes\n    this.constraints = {\n      unique: {},\n    };\n\n    // .\n    this.transforms = {};\n\n    // .\n    this.dirty = true;\n\n    // private holders for cached data\n    this.cachedIndex = null;\n    this.cachedBinaryIndex = null;\n    this.cachedData = null;\n\n    /* OPTIONS */\n    // exact match and unique constraints\n    if (options.unique !== undefined) {\n      if (!Array.isArray(options.unique)) {\n        options.unique = [options.unique];\n      }\n      options.unique.forEach((prop: string) => {\n        this.constraints.unique[prop] = new UniqueIndex(prop);\n      });\n    }\n\n    // Full text search\n    if (PLUGINS[\"FullTextSearch\"] !== undefined) {\n      this._fullTextSearch = options.fullTextSearch !== undefined\n        ? new (PLUGINS[\"FullTextSearch\"])(options.fullTextSearch) : null;\n    } else {\n      this._fullTextSearch = null;\n    }\n\n    // .\n    this.adaptiveBinaryIndices = options.adaptiveBinaryIndices !== undefined ? options.adaptiveBinaryIndices : true;\n\n    // .\n    this.transactional = options.transactional !== undefined ? options.transactional : false;\n\n    // .\n    this.cloneObjects = options.clone !== undefined ? options.clone : false;\n\n    // .\n    this.asyncListeners = options.asyncListeners !== undefined ? options.asyncListeners : false;\n\n    // .\n    this.disableChangesApi = options.disableChangesApi !== undefined ? options.disableChangesApi : true;\n\n    // .\n    this.disableDeltaChangesApi = options.disableDeltaChangesApi !== undefined ? options.disableDeltaChangesApi : true;\n\n    // .\n    this.cloneMethod = options.cloneMethod !== undefined ? options.cloneMethod : CloneMethod.DEEP;\n    if (this.disableChangesApi) {\n      this.disableDeltaChangesApi = true;\n    }\n\n    // .\n    this.serializableIndices = options.serializableIndices !== undefined ? options.serializableIndices : true;\n\n    //\n    this.ttl = {\n      age: null,\n      ttlInterval: null,\n      daemon: null\n    };\n    this.setTTL(options.ttl || -1, options.ttlInterval);\n\n    // currentMaxId - change manually at your own peril!\n    this.maxId = 0;\n\n    this._dynamicViews = [];\n\n    // events\n    this.events = {\n      \"insert\": [],\n      \"update\": [],\n      \"pre-insert\": [],\n      \"pre-update\": [],\n      \"close\": [],\n      \"flushbuffer\": [],\n      \"error\": [],\n      \"delete\": [],\n      \"warning\": []\n    };\n\n    // .\n    this.changes = [];\n\n    // initialize the id index\n    this.ensureId();\n    let indices = options.indices ? options.indices : [];\n    for (let idx = 0; idx < indices.length; idx++) {\n      this.ensureIndex(options.indices[idx]);\n    }\n\n    this.setChangesApi(this.disableChangesApi, this.disableDeltaChangesApi);\n\n    // Add change api to event callback.\n    this.on(\"insert\", (obj: Doc<E>) => {\n      this.insertHandler(obj);\n    });\n\n    this.on(\"update\", (obj: Doc<E>, old: Doc<E>) => {\n      this.updateHandler(obj, old);\n    });\n\n    this.on(\"delete\", (obj: Doc<E>) => {\n      if (!this.disableChangesApi) {\n        this._createChange(this.name, \"R\", obj);\n      }\n    });\n\n    this.on(\"warning\", (warning: ANY) => {\n      this.console.warn(warning);\n    });\n\n    // for de-serialization purposes\n    this.flushChanges();\n\n    this.console = {\n      log() {\n      },\n      warn() {\n      },\n      error() {\n      },\n    };\n\n    /* ------ STAGING API -------- */\n    /**\n     * stages: a map of uniquely identified 'stages', which hold copies of objects to be\n     * manipulated without affecting the data in the original collection\n     */\n    this.stages = {};\n    this.commitLog = [];\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      _dynamicViews: this._dynamicViews,\n      uniqueNames: Object.keys(this.constraints.unique),\n      transforms: this.transforms,\n      binaryIndices: this.binaryIndices,\n      data: this.data,\n      idIndex: this.idIndex,\n      maxId: this.maxId,\n      dirty: this.dirty,\n      adaptiveBinaryIndices: this.adaptiveBinaryIndices,\n      transactional: this.transactional,\n      asyncListeners: this.asyncListeners,\n      disableChangesApi: this.disableChangesApi,\n      cloneObjects: this.cloneObjects,\n      cloneMethod: this.cloneMethod,\n      changes: this.changes,\n      _fullTextSearch: this._fullTextSearch\n    };\n  }\n\n  static fromJSONObject(obj: ANY, options?: Collection.DeserializeOptions) {\n    let coll = new Collection(obj.name, {\n      disableChangesApi: obj.disableChangesApi,\n      disableDeltaChangesApi: obj.disableDeltaChangesApi\n    });\n\n    coll.adaptiveBinaryIndices = obj.adaptiveBinaryIndices !== undefined ? (obj.adaptiveBinaryIndices === true) : false;\n    coll.transactional = obj.transactional;\n    coll.asyncListeners = obj.asyncListeners;\n    coll.disableChangesApi = obj.disableChangesApi;\n    coll.cloneObjects = obj.cloneObjects;\n    coll.cloneMethod = obj.cloneMethod || CloneMethod.DEEP;\n    coll.changes = obj.changes;\n\n    coll.dirty = (options && options.retainDirtyFlags === true) ? obj.dirty : false;\n\n    function makeLoader(coll: ANY) {\n      const collOptions = options[coll.name];\n\n      if (collOptions.proto) {\n        let inflater = collOptions.inflate || ((src: object, dest: object) => {\n          for (let prop in src) {\n            dest[prop] = src[prop];\n          }\n        });\n\n        return (data: ANY) => {\n          const collObj = new (collOptions.proto)();\n          inflater(data, collObj);\n          return collObj;\n        };\n      }\n\n      return collOptions.inflate;\n    }\n\n    // load each element individually\n    let clen = obj.data.length;\n    let j = 0;\n    if (options && options[obj.name] !== undefined) {\n      let loader = makeLoader(obj);\n\n      for (j; j < clen; j++) {\n        coll.data[j] = loader(obj.data[j]);\n      }\n    } else {\n      for (j; j < clen; j++) {\n        coll.data[j] = obj.data[j];\n      }\n    }\n\n    coll.maxId = (obj.maxId === undefined) ? 0 : obj.maxId;\n    coll.idIndex = obj.idIndex;\n    if (obj.binaryIndices !== undefined) {\n      coll.binaryIndices = obj.binaryIndices;\n    }\n    if (obj.transforms !== undefined) {\n      coll.transforms = obj.transforms;\n    }\n\n    coll.ensureId();\n\n    // regenerate unique indexes\n    if (obj.uniqueNames !== undefined) {\n      for (j = 0; j < obj.uniqueNames.length; j++) {\n        coll.ensureUniqueIndex(obj.uniqueNames[j]);\n      }\n    }\n\n    // in case they are loading a database created before we added dynamic views, handle undefined\n    if (obj._dynamicViews !== undefined) {\n      // reinflate DynamicViews and attached Resultsets\n      for (let idx = 0; idx < obj._dynamicViews.length; idx++) {\n        coll._dynamicViews.push(DynamicView.fromJSONObject(coll, obj._dynamicViews[idx]));\n      }\n    }\n\n    if (obj._fullTextSearch) {\n      coll._fullTextSearch = PLUGINS[\"FullTextSearch\"].fromJSONObject(obj._fullTextSearch, options.fullTextSearch);\n    }\n\n    return coll;\n  }\n\n  /**\n   * Adds a named collection transform to the collection\n   * @param {string} name - name to associate with transform\n   * @param {array} transform - an array of transformation 'step' objects to save into the collection\n   */\n  addTransform(name: string, transform: ANY[]) {\n    if (this.transforms[name] !== undefined) {\n      throw new Error(\"a transform by that name already exists\");\n    }\n\n    this.transforms[name] = transform;\n  }\n\n  /**\n   * Retrieves a named transform from the collection.\n   * @param {string} name - name of the transform to lookup.\n   */\n  getTransform(name: string) {\n    return this.transforms[name];\n  }\n\n  /**\n   * Updates a named collection transform to the collection\n   * @param {string} name - name to associate with transform\n   * @param {object} transform - a transformation object to save into collection\n   */\n  setTransform(name: string, transform: ANY[]) {\n    this.transforms[name] = transform;\n  }\n\n  /**\n   * Removes a named collection transform from the collection\n   * @param {string} name - name of collection transform to remove\n   */\n  removeTransform(name: string) {\n    delete this.transforms[name];\n  }\n\n  /*----------------------------+\n   | TTL daemon                  |\n   +----------------------------*/\n  ttlDaemonFuncGen() {\n    const collection = this;\n    const age = this.ttl.age;\n    return function ttlDaemon() {\n      const now = Date.now();\n      const toRemove = collection.chain().where((member: ANY) => {\n        const timestamp = member.meta.updated || member.meta.created;\n        const diff = now - timestamp;\n        return age < diff;\n      });\n      toRemove.remove();\n    };\n  }\n\n  private setTTL(age: number, interval: number) {\n    if (age < 0) {\n      clearInterval(this.ttl.daemon);\n    } else {\n      this.ttl.age = age;\n      this.ttl.ttlInterval = interval;\n      this.ttl.daemon = setInterval(this.ttlDaemonFuncGen(), interval);\n    }\n  }\n\n  /*----------------------------+\n   | INDEXING                    |\n   +----------------------------*/\n\n  /**\n   * create a row filter that covers all documents in the collection\n   */\n  prepareFullDocIndex() {\n    const len = this.data.length;\n    const indexes = new Array(len);\n    for (let i = 0; i < len; i += 1) {\n      indexes[i] = i;\n    }\n    return indexes;\n  }\n\n  /**\n   * Ensure binary index on a certain field\n   * @param {string} property - name of property to create binary index on\n   * @param {boolean} force - (Optional) flag indicating whether to construct index immediately\n   */\n  ensureIndex(property: string, force = false) {\n    // optional parameter to force rebuild whether flagged as dirty or not\n    if (property === null || property === undefined) {\n      throw new Error(\"Attempting to set index without an associated property\");\n    }\n\n    if (this.binaryIndices[property] && !force) {\n      if (!this.binaryIndices[property].dirty) return;\n    }\n\n    // if the index is already defined and we are using adaptiveBinaryIndices and we are not forcing a rebuild, return.\n    if (this.adaptiveBinaryIndices === true && this.binaryIndices[property] !== undefined && !force) {\n      return;\n    }\n\n    const index = {\n      \"name\": property,\n      \"dirty\": true,\n      \"values\": this.prepareFullDocIndex()\n    };\n    this.binaryIndices[property] = index;\n\n    const wrappedComparer =\n      (((prop, data) => (a: string, b: string) => {\n        let val1, val2, arr;\n        if (~prop.indexOf(\".\")) {\n          arr = prop.split(\".\");\n          val1 = arr.reduce(function (obj, i) {\n            return obj && obj[i] || undefined;\n          }, data[a]);\n          val2 = arr.reduce(function (obj, i) {\n            return obj && obj[i] || undefined;\n          }, data[b]);\n        } else {\n          val1 = data[a][prop];\n          val2 = data[b][prop];\n        }\n\n        if (val1 !== val2) {\n          if (ltHelper(val1, val2, false)) return -1;\n          if (gtHelper(val1, val2, false)) return 1;\n        }\n        return 0;\n      }))(property, this.data);\n\n    index.values.sort(wrappedComparer);\n    index.dirty = false;\n\n    this.dirty = true; // for autosave scenarios\n  }\n\n  getSequencedIndexValues(property: string) {\n    let idx;\n    const idxvals = this.binaryIndices[property].values;\n    let result = \"\";\n\n    for (idx = 0; idx < idxvals.length; idx++) {\n      result += \" [\" + idx + \"] \" + this.data[idxvals[idx]][property];\n    }\n\n    return result;\n  }\n\n  ensureUniqueIndex(field: string) {\n    let index = new UniqueIndex(field);\n\n    // if index already existed, (re)loading it will likely cause collisions, rebuild always\n    this.constraints.unique[field] = index;\n    for (let i = 0; i < this.data.length; i++) {\n      index.set(this.data[i], i);\n    }\n    return index;\n  }\n\n  /**\n   * Ensure all binary indices\n   */\n  ensureAllIndexes(force = false) {\n    let key;\n    const bIndices = this.binaryIndices;\n    for (key in bIndices) {\n      if (bIndices[key] !== undefined) {\n        this.ensureIndex(key, force);\n      }\n    }\n  }\n\n  flagBinaryIndexesDirty() {\n    let key;\n    const bIndices = this.binaryIndices;\n    for (key in bIndices) {\n      if (bIndices[key] !== undefined) {\n        bIndices[key].dirty = true;\n      }\n    }\n  }\n\n  flagBinaryIndexDirty(index: string) {\n    if (this.binaryIndices[index])\n      this.binaryIndices[index].dirty = true;\n  }\n\n  /**\n   * Quickly determine number of documents in collection (or query)\n   * @param {object} query - (optional) query object to count results of\n   * @returns {number} number of documents in the collection\n   */\n  count(query?: object): number {\n    if (!query) {\n      return this.data.length;\n    }\n\n    return this.chain().find(query).filteredrows.length;\n  }\n\n  /**\n   * Rebuild idIndex\n   */\n  ensureId() {\n    const len = this.data.length;\n    let i = 0;\n\n    this.idIndex = [];\n    for (i; i < len; i += 1) {\n      this.idIndex.push(this.data[i].$loki);\n    }\n  }\n\n  /**\n   * Add a dynamic view to the collection\n   * @param {string} name - name of dynamic view to add\n   * @param {object} options - (optional) options to configure dynamic view with\n   * @param {boolean} [options.persistent=false] - indicates if view is to main internal results array in 'resultdata'\n   * @param {string} [options.sortPriority=SortPriority.PASSIVE] - the sort priority\n   * @param {number} options.minRebuildInterval - minimum rebuild interval (need clarification to docs here)\n   * @returns {DynamicView} reference to the dynamic view added\n   **/\n  addDynamicView(name: string, options?: DynamicView.Options): DynamicView<E> {\n    const dv = new DynamicView<E>(this, name, options);\n    this._dynamicViews.push(dv);\n\n    return dv;\n  }\n\n  /**\n   * Remove a dynamic view from the collection\n   * @param {string} name - name of dynamic view to remove\n   **/\n  removeDynamicView(name: string) {\n    for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n      if (this._dynamicViews[idx].name === name) {\n        this._dynamicViews.splice(idx, 1);\n      }\n    }\n  }\n\n  /**\n   * Look up dynamic view reference from within the collection\n   * @param {string} name - name of dynamic view to retrieve reference of\n   * @returns {DynamicView} A reference to the dynamic view with that name\n   **/\n  getDynamicView(name: string) {\n    for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n      if (this._dynamicViews[idx].name === name) {\n        return this._dynamicViews[idx];\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Applies a 'mongo-like' find query object and passes all results to an update function.\n   * For filter function querying you should migrate to [\n   * Where()]{@link Collection#updateWhere}.\n   *\n   * @param {object|function} filterObject - 'mongo-like' query object (or deprecated filterFunction mode)\n   * @param {function} updateFunction - update function to run against filtered documents\n   */\n  findAndUpdate(filterObject: Query | ((obj: E) => boolean), updateFunction: (obj: E) => E) {\n    if (typeof(filterObject) === \"function\") {\n      this.updateWhere(filterObject, updateFunction);\n    } else {\n      this.chain().find(filterObject).update(updateFunction);\n    }\n  }\n\n  /**\n   * Applies a 'mongo-like' find query object removes all documents which match that filter.\n   *\n   * @param {object} filterObject - 'mongo-like' query object\n   */\n  findAndRemove(filterObject: object) {\n    this.chain().find(filterObject).remove();\n  }\n\n  /**\n   * Adds object(s) to collection, ensure object(s) have meta properties, clone it if necessary, etc.\n   * @param {(object|array)} doc - the document (or array of documents) to be inserted\n   * @returns {(object|array)} document or documents inserted\n   */\n  insert(doc: E | E[]): Doc<E>;\n  insert(doc: E[]): Doc<E>[];\n  insert(doc: E | E[]) {\n    if (!Array.isArray(doc)) {\n      return this.insertOne(doc);\n    }\n\n    // holder to the clone of the object inserted if collections is set to clone objects\n    let obj;\n    let results = [];\n\n    this.emit(\"pre-insert\", doc);\n    for (let i = 0; i < doc.length; i++) {\n      obj = this.insertOne(doc[i], true);\n      if (!obj) {\n        return undefined;\n      }\n      results.push(obj);\n    }\n    // at the 'batch' level, if clone option is true then emitted docs are clones\n    this.emit(\"insert\", results);\n\n    // if clone option is set, clone return values\n    results = this.cloneObjects ? clone(results, this.cloneMethod) : results;\n\n    return results.length === 1 ? results[0] : results;\n  }\n\n  /**\n   * Adds a single object, ensures it has meta properties, clone it if necessary, etc.\n   * @param {object} doc - the document to be inserted\n   * @param {boolean} bulkInsert - quiet pre-insert and insert event emits\n   * @returns {object} document or 'undefined' if there was a problem inserting it\n   */\n  insertOne(doc: E, bulkInsert = false): Doc<E> {\n    let err = null;\n    let returnObj;\n\n    if (typeof doc !== \"object\") {\n      err = new TypeError(\"Document needs to be an object\");\n    } else if (doc === null) {\n      err = new TypeError(\"Object cannot be null\");\n    }\n\n    if (err !== null) {\n      this.emit(\"error\", err);\n      throw err;\n    }\n\n    // if configured to clone, do so now... otherwise just use same obj reference\n    const obj = this.cloneObjects ? clone(doc, this.cloneMethod) : doc;\n\n    if ((<any>obj).meta === undefined) {\n      (<any>obj).meta = {\n        revision: 0,\n        created: 0\n      };\n    }\n\n    // both 'pre-insert' and 'insert' events are passed internal data reference even when cloning\n    // insert needs internal reference because that is where loki itself listens to add meta\n    if (!bulkInsert) {\n      this.emit(\"pre-insert\", obj);\n    }\n    if (!this.add(obj)) {\n      return undefined;\n    }\n\n    returnObj = obj;\n    if (!bulkInsert) {\n      this.emit(\"insert\", obj);\n      returnObj = this.cloneObjects ? clone(obj, this.cloneMethod) : obj;\n    }\n\n    return returnObj as Doc<E>;\n  }\n\n  /**\n   * Empties the collection.\n   * @param {object} options - configure clear behavior\n   * @param {boolean} options.removeIndices - (default: false)\n   */\n  clear(options: ANY = {}) {\n    this.data = [];\n    this.idIndex = [];\n    this.cachedIndex = null;\n    this.cachedBinaryIndex = null;\n    this.cachedData = null;\n    this.maxId = 0;\n    this._dynamicViews = [];\n    this.dirty = true;\n\n    // if removing indices entirely\n    if (options.removeIndices === true) {\n      this.binaryIndices = {};\n\n      this.constraints = {\n        unique: {},\n      };\n    }\n    // clear indices but leave definitions in place\n    else {\n      // clear binary indices\n      const keys = Object.keys(this.binaryIndices);\n      keys.forEach((biname) => {\n        this.binaryIndices[biname].dirty = false;\n        this.binaryIndices[biname].values = [];\n      });\n\n      // clear entire unique indices definition\n      const uniqueNames = Object.keys(this.constraints.unique);\n      for (let i = 0; i < uniqueNames.length; i++) {\n        this.constraints.unique[uniqueNames[i]].clear();\n      }\n    }\n\n    if (this._fullTextSearch !== null) {\n      this._fullTextSearch.clear();\n    }\n  }\n\n  /**\n   * Updates an object and notifies collection that the document has changed.\n   * @param {object} doc - document to update within the collection\n   */\n  update(doc: ANY) {\n    if (Array.isArray(doc)) {\n      let k = 0;\n      const len = doc.length;\n      for (k; k < len; k += 1) {\n        this.update(doc[k]);\n      }\n      return;\n    }\n\n    // verify object is a properly formed document\n    if (doc.$loki === undefined) {\n      throw new Error(\"Trying to update unsynced document. Please save the document first by using insert() or addMany()\");\n    }\n    try {\n      this.startTransaction();\n      const arr = this.get(doc.$loki, true);\n\n      if (!arr) {\n        throw new Error(\"Trying to update a document not in collection.\");\n      }\n\n      // ref to existing obj\n      let oldInternal = arr[0]; // -internal- obj ref\n      let position = arr[1]; // position in data array\n\n      // ref to new internal obj\n      // if configured to clone, do so now... otherwise just use same obj reference\n      let newInternal = this.cloneObjects || !this.disableDeltaChangesApi ? clone(doc, this.cloneMethod) : doc;\n\n      this.emit(\"pre-update\", doc);\n\n      Object.keys(this.constraints.unique).forEach((key) => {\n        this.constraints.unique[key].update(newInternal, position);\n      });\n\n      // operate the update\n      this.data[position] = newInternal;\n\n      // now that we can efficiently determine the data[] position of newly added document,\n      // submit it for all registered DynamicViews to evaluate for inclusion/exclusion\n      for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n        this._dynamicViews[idx]._evaluateDocument(position, false);\n      }\n\n      let key;\n      if (this.adaptiveBinaryIndices) {\n        // for each binary index defined in collection, immediately update rather than flag for lazy rebuild\n        const bIndices = this.binaryIndices;\n        for (key in bIndices) {\n          this.adaptiveBinaryIndexUpdate(position, key);\n        }\n      } else {\n        this.flagBinaryIndexesDirty();\n      }\n\n      this.idIndex[position] = newInternal.$loki;\n\n      // FullTextSearch.\n      if (this._fullTextSearch !== null) {\n        this._fullTextSearch.updateDocument(doc, position);\n      }\n\n      this.commit();\n      this.dirty = true; // for autosave scenarios\n\n      this.emit(\"update\", doc, this.cloneObjects || !this.disableDeltaChangesApi ? clone(oldInternal, this.cloneMethod) : null);\n      return doc;\n    } catch (err) {\n      this.rollback();\n      this.console.error(err.message);\n      this.emit(\"error\", err);\n      throw (err); // re-throw error so user does not think it succeeded\n    }\n  }\n\n  /**\n   * Add object to collection\n   */\n  private add(obj: E) {\n    // if parameter isn't object exit with throw\n    if (\"object\" !== typeof obj) {\n      throw new TypeError(\"Object being added needs to be an object\");\n    }\n    // if object you are adding already has id column it is either already in the collection\n    // or the object is carrying its own 'id' property.  If it also has a meta property,\n    // then this is already in collection so throw error, otherwise rename to originalId and continue adding.\n    if (obj[\"$loki\"] !== undefined) {\n      throw new Error(\"Document is already in collection, please use update()\");\n    }\n\n    /*\n     * try adding object to collection\n     */\n    try {\n      this.startTransaction();\n      this.maxId++;\n\n      if (isNaN(this.maxId)) {\n        this.maxId = (this.data[this.data.length - 1].$loki + 1);\n      }\n\n      const newDoc = obj as Doc<E>;\n      newDoc.$loki = this.maxId;\n      newDoc.meta.version = 0;\n\n      let key;\n      const constrUnique = this.constraints.unique;\n      for (key in constrUnique) {\n        if (constrUnique[key] !== undefined) {\n          constrUnique[key].set(newDoc, this.data.length);\n        }\n      }\n\n      // add new obj id to idIndex\n      this.idIndex.push(newDoc.$loki);\n\n      // add the object\n      this.data.push(newDoc);\n\n      const addedPos = this.data.length - 1;\n\n      // now that we can efficiently determine the data[] position of newly added document,\n      // submit it for all registered DynamicViews to evaluate for inclusion/exclusion\n      const dvlen = this._dynamicViews.length;\n      for (let i = 0; i < dvlen; i++) {\n        this._dynamicViews[i]._evaluateDocument(addedPos, true);\n      }\n\n      if (this.adaptiveBinaryIndices) {\n        // for each binary index defined in collection, immediately update rather than flag for lazy rebuild\n        const bIndices = this.binaryIndices;\n        for (key in bIndices) {\n          this.adaptiveBinaryIndexInsert(addedPos, key);\n        }\n      } else {\n        this.flagBinaryIndexesDirty();\n      }\n\n      // FullTextSearch.\n      if (this._fullTextSearch !== null) {\n        this._fullTextSearch.addDocument(newDoc, addedPos);\n      }\n\n      this.commit();\n      this.dirty = true; // for autosave scenarios\n\n      return (this.cloneObjects) ? (clone(newDoc, this.cloneMethod)) : (newDoc);\n    } catch (err) {\n      this.rollback();\n      this.console.error(err.message);\n      this.emit(\"error\", err);\n      throw (err); // re-throw error so user does not think it succeeded\n    }\n  }\n\n  /**\n   * Applies a filter function and passes all results to an update function.\n   *\n   * @param {function} filterFunction - filter function whose results will execute update\n   * @param {function} updateFunction - update function to run against filtered documents\n   */\n  updateWhere(filterFunction: (obj: E) => boolean, updateFunction: (obj: E) => E) {\n    const results = this.where(filterFunction);\n    let i = 0;\n    let obj;\n    try {\n      for (i; i < results.length; i++) {\n        obj = updateFunction(results[i]);\n        this.update(obj);\n      }\n\n    } catch (err) {\n      this.rollback();\n      this.console.error(err.message);\n    }\n  }\n\n  /**\n   * Remove all documents matching supplied filter function.\n   * For 'mongo-like' querying you should migrate to [findAndRemove()]{@link Collection#findAndRemove}.\n   * @param {function|object} query - query object to filter on\n   */\n  removeWhere(query: Query | ((obj: E) => boolean)) {\n    let list;\n    if (typeof query === \"function\") {\n      list = this.data.filter(query);\n      this.remove(list);\n    } else {\n      this.chain().find(query).remove();\n    }\n  }\n\n  removeDataOnly() {\n    this.remove(this.data.slice());\n  }\n\n  /**\n   * Remove a document from the collection\n   * @param {object} doc - document to remove from collection\n   */\n  remove(doc: ANY) {\n    if (typeof doc === \"number\") {\n      doc = this.get(doc);\n    }\n\n    if (\"object\" !== typeof doc) {\n      throw new Error(\"Parameter is not an object\");\n    }\n    if (Array.isArray(doc)) {\n      let k = 0;\n      const len = doc.length;\n      for (k; k < len; k += 1) {\n        this.remove(doc[k]);\n      }\n      return;\n    }\n\n    if (doc.$loki === undefined) {\n      throw new Error(\"Object is not a document stored in the collection\");\n    }\n\n    try {\n      this.startTransaction();\n      const arr = this.get(doc.$loki, true);\n\n      const position = arr[1];\n\n      Object.keys(this.constraints.unique).forEach((key) => {\n        if (doc[key] !== null && doc[key] !== undefined) {\n          this.constraints.unique[key].remove(doc[key]);\n        }\n      });\n      // now that we can efficiently determine the data[] position of newly added document,\n      // submit it for all registered DynamicViews to remove\n      for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n        this._dynamicViews[idx]._removeDocument(position);\n      }\n\n      if (this.adaptiveBinaryIndices) {\n        // for each binary index defined in collection, immediately update rather than flag for lazy rebuild\n        let key;\n\n        const bIndices = this.binaryIndices;\n        for (key in bIndices) {\n          this.adaptiveBinaryIndexRemove(position, key);\n        }\n      } else {\n        this.flagBinaryIndexesDirty();\n      }\n\n      this.data.splice(position, 1);\n\n      // remove id from idIndex\n      this.idIndex.splice(position, 1);\n\n      // FullTextSearch.\n      if (this._fullTextSearch !== null) {\n        this._fullTextSearch.removeDocument(doc, position);\n      }\n\n      this.commit();\n      this.dirty = true; // for autosave scenarios\n      this.emit(\"delete\", arr[0]);\n      delete doc.$loki;\n      delete doc.meta;\n      return doc;\n    } catch (err) {\n      this.rollback();\n      this.console.error(err.message);\n      this.emit(\"error\", err);\n      return null;\n    }\n  }\n\n  /*------------+\n   | Change API |\n   +------------*/\n  /**\n   * Returns all changes.\n   * @returns {ANY}\n   */\n  public getChanges() {\n    return this.changes;\n  }\n\n  /**\n   * Enables/disables changes api.\n   * @param {boolean} disableChangesApi\n   * @param {boolean} disableDeltaChangesApi\n   */\n  public setChangesApi(disableChangesApi: boolean, disableDeltaChangesApi: boolean = true) {\n    this.disableChangesApi = disableChangesApi;\n    this.disableDeltaChangesApi = disableDeltaChangesApi;\n\n    if (disableChangesApi) {\n      this.disableDeltaChangesApi = true;\n    }\n\n    this.insertHandler = this.disableChangesApi ? this._insertMeta : this._insertMetaWithChange;\n    this.updateHandler = this.disableChangesApi ? this._updateMeta : this._updateMetaWithChange;\n  }\n\n  /**\n   * Clears all the changes.\n   */\n  public flushChanges() {\n    this.changes = [];\n  }\n\n  private _getObjectDelta(oldObject: Doc<E>, newObject: Doc<E>) {\n    const propertyNames = newObject !== null && typeof newObject === \"object\" ? Object.keys(newObject) : null;\n    if (propertyNames && propertyNames.length && [\"string\", \"boolean\", \"number\"].indexOf(typeof(newObject)) < 0) {\n      const delta = {};\n      for (let i = 0; i < propertyNames.length; i++) {\n        const propertyName = propertyNames[i];\n        if (newObject.hasOwnProperty(propertyName)) {\n          if (!oldObject.hasOwnProperty(propertyName) || this.constraints.unique[propertyName] !== undefined || propertyName === \"$loki\" || propertyName === \"meta\") {\n            delta[propertyName] = newObject[propertyName];\n          }\n          else {\n            const propertyDelta = this._getObjectDelta(oldObject[propertyName], newObject[propertyName]);\n            if (propertyDelta !== undefined && propertyDelta !== {}) {\n              delta[propertyName] = propertyDelta;\n            }\n          }\n        }\n      }\n      return Object.keys(delta).length === 0 ? undefined : delta;\n    }\n    else {\n      return oldObject === newObject ? undefined : newObject;\n    }\n  }\n\n  /**\n   * Compare changed object (which is a forced clone) with existing object and return the delta\n   */\n  private _getChangeDelta(obj: Doc<E>, old: Doc<E>) {\n    if (old) {\n      return this._getObjectDelta(old, obj);\n    }\n    else {\n      return JSON.parse(JSON.stringify(obj));\n    }\n  }\n\n  /**\n   * This method creates a clone of the current status of an object and associates operation and collection name,\n   * so the parent db can aggregate and generate a changes object for the entire db\n   */\n  private _createChange(name: string, op: string, obj: Doc<E>, old?: Doc<E>) {\n    this.changes.push({\n      name,\n      operation: op,\n      obj: op === \"U\" && !this.disableDeltaChangesApi ? this._getChangeDelta(obj, old) : JSON.parse(JSON.stringify(obj))\n    });\n  }\n\n  private _createInsertChange(obj: Doc<E>) {\n    this._createChange(this.name, \"I\", obj);\n  }\n\n  /**\n   * If the changes API is disabled make sure only metadata is added without re-evaluating everytime if the changesApi is enabled\n   */\n  private _insertMeta(obj: Doc<E>) {\n    let len;\n    let idx;\n\n    if (!obj) {\n      return;\n    }\n\n    // if batch insert\n    if (Array.isArray(obj)) {\n      len = obj.length;\n\n      for (idx = 0; idx < len; idx++) {\n        if (obj[idx].meta === undefined) {\n          obj[idx].meta = {};\n        }\n\n        obj[idx].meta.created = (new Date()).getTime();\n        obj[idx].meta.revision = 0;\n      }\n\n      return;\n    }\n\n    // single object\n    if (!obj.meta) {\n      obj.meta = {};\n    }\n\n    obj.meta.created = (new Date()).getTime();\n    obj.meta.revision = 0;\n  }\n\n  private _updateMeta(obj: Doc<E>) {\n    if (!obj) {\n      return;\n    }\n    obj.meta.updated = (new Date()).getTime();\n    obj.meta.revision += 1;\n  }\n\n\n  private _createUpdateChange(obj: Doc<E>, old: Doc<E>) {\n    this._createChange(this.name, \"U\", obj, old);\n  }\n\n  private _insertMetaWithChange(obj: Doc<E>) {\n    this._insertMeta(obj);\n    this._createInsertChange(obj);\n  }\n\n  private _updateMetaWithChange(obj: Doc<E>, old: Doc<E>) {\n    this._updateMeta(obj);\n    this._createUpdateChange(obj, old);\n  }\n\n  /*---------------------+\n   | Finding methods     |\n   +----------------------*/\n\n  /**\n   * Get by Id - faster than other methods because of the searching algorithm\n   * @param {int} id - $loki id of document you want to retrieve\n   * @param {boolean} returnPosition - if 'true' we will return [object, position]\n   * @returns {(object|array|null)} Object reference if document was found, null if not,\n   *     or an array if 'returnPosition' was passed.\n   */\n  public get(id: number): Doc<E>;\n  public get(id: number, returnPosition: boolean): Doc<E> | [Doc<E>, number];\n  public get(id: number, returnPosition = false) {\n    const data = this.idIndex;\n    let max = data.length - 1;\n    let min = 0;\n    let mid = (min + max) >> 1;\n\n    id = typeof id === \"number\" ? id : parseInt(id, 10);\n\n    if (isNaN(id)) {\n      throw new TypeError(\"Passed id is not an integer\");\n    }\n\n    while (data[min] < data[max]) {\n      mid = (min + max) >> 1;\n\n      if (data[mid] < id) {\n        min = mid + 1;\n      } else {\n        max = mid;\n      }\n    }\n\n    if (max === min && data[min] === id) {\n      if (returnPosition) {\n        return [this.data[min], min];\n      }\n      return this.data[min];\n    }\n    return null;\n  }\n\n  /**\n   * Perform binary range lookup for the data[dataPosition][binaryIndexName] property value\n   *    Since multiple documents may contain the same value (which the index is sorted on),\n   *    we hone in on range and then linear scan range to find exact index array position.\n   * @param {int} dataPosition : coll.data array index/position\n   * @param {string} binaryIndexName : index to search for dataPosition in\n   */\n  public getBinaryIndexPosition(dataPosition: number, binaryIndexName: string) {\n    const val = this.data[dataPosition][binaryIndexName];\n    const index = this.binaryIndices[binaryIndexName].values;\n\n    // i think calculateRange can probably be moved to collection\n    // as it doesn't seem to need resultset.  need to verify\n    //let rs = new Resultset(this, null, null);\n    const range = this.calculateRange(\"$eq\", binaryIndexName, val);\n\n    if (range[0] === 0 && range[1] === -1) {\n      // uhoh didn't find range\n      return null;\n    }\n\n    const min = range[0];\n    const max = range[1];\n\n    // narrow down the sub-segment of index values\n    // where the indexed property value exactly matches our\n    // value and then linear scan to find exact -index- position\n    for (let idx = min; idx <= max; idx++) {\n      if (index[idx] === dataPosition) return idx;\n    }\n\n    // uhoh\n    return null;\n  }\n\n  /**\n   * Adaptively insert a selected item to the index.\n   * @param {int} dataPosition : coll.data array index/position\n   * @param {string} binaryIndexName : index to search for dataPosition in\n   */\n  public adaptiveBinaryIndexInsert(dataPosition: number, binaryIndexName: string) {\n    const index = this.binaryIndices[binaryIndexName].values;\n    let val = this.data[dataPosition][binaryIndexName];\n\n    // If you are inserting a javascript Date value into a binary index, convert to epoch time\n    if (this.serializableIndices === true && val instanceof Date) {\n      this.data[dataPosition][binaryIndexName] = val.getTime();\n      val = this.data[dataPosition][binaryIndexName];\n    }\n\n    const idxPos = (index.length === 0) ? 0 : this._calculateRangeStart(binaryIndexName, val, true);\n\n    // insert new data index into our binary index at the proper sorted location for relevant property calculated by idxPos.\n    // doing this after adjusting dataPositions so no clash with previous item at that position.\n    this.binaryIndices[binaryIndexName].values.splice(idxPos, 0, dataPosition);\n  }\n\n  /**\n   * Adaptively update a selected item within an index.\n   * @param {int} dataPosition : coll.data array index/position\n   * @param {string} binaryIndexName : index to search for dataPosition in\n   */\n  public adaptiveBinaryIndexUpdate(dataPosition: number, binaryIndexName: string) {\n    // linear scan needed to find old position within index unless we optimize for clone scenarios later\n    // within (my) node 5.6.0, the following for() loop with strict compare is -much- faster than indexOf()\n    let idxPos;\n\n    const index = this.binaryIndices[binaryIndexName].values;\n    const len = index.length;\n\n    for (idxPos = 0; idxPos < len; idxPos++) {\n      if (index[idxPos] === dataPosition) break;\n    }\n\n    //let idxPos = this.binaryIndices[binaryIndexName].values.indexOf(dataPosition);\n    this.binaryIndices[binaryIndexName].values.splice(idxPos, 1);\n\n    //this.adaptiveBinaryIndexRemove(dataPosition, binaryIndexName, true);\n    this.adaptiveBinaryIndexInsert(dataPosition, binaryIndexName);\n  }\n\n  /**\n   * Adaptively remove a selected item from the index.\n   * @param {int} dataPosition : coll.data array index/position\n   * @param {string} binaryIndexName : index to search for dataPosition in\n   */\n  public adaptiveBinaryIndexRemove(dataPosition: number, binaryIndexName: string, removedFromIndexOnly = false): ANY {\n    const idxPos = this.getBinaryIndexPosition(dataPosition, binaryIndexName);\n    const index = this.binaryIndices[binaryIndexName].values;\n    let len;\n    let idx;\n\n    if (idxPos === null) {\n      // throw new Error('unable to determine binary index position');\n      return null;\n    }\n\n    // remove document from index\n    this.binaryIndices[binaryIndexName].values.splice(idxPos, 1);\n\n    // if we passed this optional flag parameter, we are calling from adaptiveBinaryIndexUpdate,\n    // in which case data positions stay the same.\n    if (removedFromIndexOnly === true) {\n      return;\n    }\n\n    // since index stores data array positions, if we remove a document\n    // we need to adjust array positions -1 for all document positions greater than removed position\n    len = index.length;\n    for (idx = 0; idx < len; idx++) {\n      if (index[idx] > dataPosition) {\n        index[idx]--;\n      }\n    }\n  }\n\n  /**\n   * Internal method used for index maintenance and indexed searching.\n   * Calculates the beginning of an index range for a given value.\n   * For index maintainance (adaptive:true), we will return a valid index position to insert to.\n   * For querying (adaptive:false/undefined), we will :\n   *    return lower bound/index of range of that value (if found)\n   *    return next lower index position if not found (hole)\n   * If index is empty it is assumed to be handled at higher level, so\n   * this method assumes there is at least 1 document in index.\n   *\n   * @param {string} prop - name of property which has binary index\n   * @param {any} val - value to find within index\n   * @param {bool?} adaptive - if true, we will return insert position\n   */\n  private _calculateRangeStart(prop: string, val: ANY, adaptive = false): number {\n    const rcd = this.data;\n    const index = this.binaryIndices[prop].values;\n    let min = 0;\n    let max = index.length - 1;\n    let mid = 0;\n\n    if (index.length === 0) {\n      return -1;\n    }\n\n    // hone in on start position of value\n    while (min < max) {\n      mid = (min + max) >> 1;\n\n      if (ltHelper(rcd[index[mid]][prop], val, false)) {\n        min = mid + 1;\n      } else {\n        max = mid;\n      }\n    }\n\n    const lbound = min;\n\n    // found it... return it\n    if (aeqHelper(val, rcd[index[lbound]][prop])) {\n      return lbound;\n    }\n\n    // if not in index and our value is less than the found one\n    if (ltHelper(val, rcd[index[lbound]][prop], false)) {\n      return adaptive ? lbound : lbound - 1;\n    }\n\n    // not in index and our value is greater than the found one\n    return adaptive ? lbound + 1 : lbound;\n  }\n\n  /**\n   * Internal method used for indexed $between.  Given a prop (index name), and a value\n   * (which may or may not yet exist) this will find the final position of that upper range value.\n   */\n  private _calculateRangeEnd(prop: string, val: ANY) {\n    const rcd = this.data;\n    const index = this.binaryIndices[prop].values;\n    let min = 0;\n    let max = index.length - 1;\n    let mid = 0;\n\n    if (index.length === 0) {\n      return -1;\n    }\n\n    // hone in on start position of value\n    while (min < max) {\n      mid = (min + max) >> 1;\n\n      if (ltHelper(val, rcd[index[mid]][prop], false)) {\n        max = mid;\n      } else {\n        min = mid + 1;\n      }\n    }\n\n    const ubound = max;\n\n    // only eq if last element in array is our val\n    if (aeqHelper(val, rcd[index[ubound]][prop])) {\n      return ubound;\n    }\n\n    // if not in index and our value is less than the found one\n    if (gtHelper(val, rcd[index[ubound]][prop], false)) {\n      return ubound + 1;\n    }\n\n    // either hole or first nonmatch\n    if (aeqHelper(val, rcd[index[ubound - 1]][prop])) {\n      return ubound - 1;\n    }\n\n    // hole, so ubound if nearest gt than the val we were looking for\n    return ubound;\n  }\n\n  /**\n   * Binary Search utility method to find range/segment of values matching criteria.\n   *    this is used for collection.find() and first find filter of resultset/dynview\n   *    slightly different than get() binary search in that get() hones in on 1 value,\n   *    but we have to hone in on many (range)\n   * @param {string} op - operation, such as $eq\n   * @param {string} prop - name of property to calculate range for\n   * @param {object} val - value to use for range calculation.\n   * @returns {array} [start, end] index array positions\n   */\n  public calculateRange(op: string, prop: string, val: ANY): [number, number] {\n    const rcd = this.data;\n    const index = this.binaryIndices[prop].values;\n    const min = 0;\n    const max = index.length - 1;\n    let lbound;\n    let lval;\n    let ubound;\n\n    // when no documents are in collection, return empty range condition\n    if (rcd.length === 0) {\n      return [0, -1];\n    }\n\n    const minVal = rcd[index[min]][prop];\n    const maxVal = rcd[index[max]][prop];\n\n    // if value falls outside of our range return [0, -1] to designate no results\n    switch (op) {\n      case \"$eq\":\n      case \"$aeq\":\n        if (ltHelper(val, minVal, false) || gtHelper(val, maxVal, false)) {\n          return [0, -1];\n        }\n        break;\n      case \"$dteq\":\n        if (ltHelper(val, minVal, false) || gtHelper(val, maxVal, false)) {\n          return [0, -1];\n        }\n        break;\n      case \"$gt\":\n        // none are within range\n        if (gtHelper(val, maxVal, true)) {\n          return [0, -1];\n        }\n        // all are within range\n        if (gtHelper(minVal, val, false)) {\n          return [min, max];\n        }\n        break;\n      case \"$gte\":\n        // none are within range\n        if (gtHelper(val, maxVal, false)) {\n          return [0, -1];\n        }\n        // all are within range\n        if (gtHelper(minVal, val, true)) {\n          return [min, max];\n        }\n        break;\n      case \"$lt\":\n        // none are within range\n        if (ltHelper(val, minVal, true)) {\n          return [0, -1];\n        }\n        // all are within range\n        if (ltHelper(maxVal, val, false)) {\n          return [min, max];\n        }\n        break;\n      case \"$lte\":\n        // none are within range\n        if (ltHelper(val, minVal, false)) {\n          return [0, -1];\n        }\n        // all are within range\n        if (ltHelper(maxVal, val, true)) {\n          return [min, max];\n        }\n        break;\n      case \"$between\":\n        // none are within range (low range is greater)\n        if (gtHelper(val[0], maxVal, false)) {\n          return [0, -1];\n        }\n        // none are within range (high range lower)\n        if (ltHelper(val[1], minVal, false)) {\n          return [0, -1];\n        }\n\n        lbound = this._calculateRangeStart(prop, val[0]);\n        ubound = this._calculateRangeEnd(prop, val[1]);\n\n        if (lbound < 0) lbound++;\n        if (ubound > max) ubound--;\n\n        if (!gtHelper(rcd[index[lbound]][prop], val[0], true)) lbound++;\n        if (!ltHelper(rcd[index[ubound]][prop], val[1], true)) ubound--;\n\n        if (ubound < lbound) return [0, -1];\n\n        return ([lbound, ubound]);\n    }\n\n    // determine lbound where needed\n    switch (op) {\n      case \"$eq\":\n      case \"$aeq\":\n      case \"$dteq\":\n      case \"$gte\":\n      case \"$lt\":\n        lbound = this._calculateRangeStart(prop, val);\n        lval = rcd[index[lbound]][prop];\n        break;\n      default:\n        break;\n    }\n\n    // determine ubound where needed\n    switch (op) {\n      case \"$eq\":\n      case \"$aeq\":\n      case \"$dteq\":\n      case \"$lte\":\n      case \"$gt\":\n        ubound = this._calculateRangeEnd(prop, val);\n        break;\n      default:\n        break;\n    }\n\n\n    switch (op) {\n      case \"$eq\":\n      case \"$aeq\":\n      case \"$dteq\":\n        // if hole (not found)\n        //if (ltHelper(lval, val, false) || gtHelper(lval, val, false)) {\n        //  return [0, -1];\n        //}\n        if (!aeqHelper(lval, val)) {\n          return [0, -1];\n        }\n\n        return [lbound, ubound];\n\n      //case '$dteq':\n      // if hole (not found)\n      //  if (lval > val || lval < val) {\n      //    return [0, -1];\n      //  }\n\n      //  return [lbound, ubound];\n\n      case \"$gt\":\n        // (an eqHelper would probably be better test)\n        // if hole (not found) ub position is already greater\n        if (!aeqHelper(rcd[index[ubound]][prop], val)) {\n          //if (gtHelper(rcd[index[ubound]][prop], val, false)) {\n          return [ubound, max];\n        }\n        // otherwise (found) so ubound is still equal, get next\n        return [ubound + 1, max];\n\n      case \"$gte\":\n        // if hole (not found) lb position marks left outside of range\n        if (!aeqHelper(rcd[index[lbound]][prop], val)) {\n          //if (ltHelper(rcd[index[lbound]][prop], val, false)) {\n          return [lbound + 1, max];\n        }\n        // otherwise (found) so lb is first position where its equal\n        return [lbound, max];\n\n      case \"$lt\":\n        // if hole (not found) position already is less than\n        if (!aeqHelper(rcd[index[lbound]][prop], val)) {\n          //if (ltHelper(rcd[index[lbound]][prop], val, false)) {\n          return [min, lbound];\n        }\n        // otherwise (found) so lb marks left inside of eq range, get previous\n        return [min, lbound - 1];\n\n      case \"$lte\":\n        // if hole (not found) ub position marks right outside so get previous\n        if (!aeqHelper(rcd[index[ubound]][prop], val)) {\n          //if (gtHelper(rcd[index[ubound]][prop], val, false)) {\n          return [min, ubound - 1];\n        }\n        // otherwise (found) so ub is last position where its still equal\n        return [min, ubound];\n\n      default:\n        return [0, rcd.length - 1];\n    }\n  }\n\n  /**\n   * Retrieve doc by Unique index\n   * @param {string} field - name of uniquely indexed property to use when doing lookup\n   * @param {any} value - unique value to search for\n   * @returns {object} document matching the value passed\n   */\n  public by(field: string, value: ANY): Doc<E> {\n    return this.findOne({[field]: value});\n  }\n\n  /**\n   * Find one object by index property, by property equal to value\n   * @param {object} query - query object used to perform search with\n   * @returns {(object|null)} First matching document, or null if none\n   */\n  public findOne(query: object): Doc<E> {\n    query = query || {};\n\n    // Instantiate Resultset and exec find op passing firstOnly = true param\n    const result = this.chain().find(query, true).data();\n\n    if (Array.isArray(result) && result.length === 0) {\n      return null;\n    } else {\n      if (!this.cloneObjects) {\n        return result[0] as any as Doc<E>;\n      } else {\n        return clone(result[0], this.cloneMethod) as any as Doc<E>;\n      }\n    }\n  }\n\n  /**\n   * Chain method, used for beginning a series of chained find() and/or view() operations\n   * on a collection.\n   *\n   * @param {array} transform - Ordered array of transform step objects similar to chain\n   * @param {object} parameters - Object containing properties representing parameters to substitute\n   * @returns {Resultset} (this) resultset, or data array if any map or join functions where called\n   */\n  public chain(transform?: string | ANY[], parameters?: ANY): Resultset<E> {\n    const rs = new Resultset<E>(this);\n\n    if (transform === undefined) {\n      return rs;\n    }\n    return rs.transform(transform, parameters) as Resultset<E>;\n  }\n\n  /**\n   * Find method, api is similar to mongodb.\n   * for more complex queries use [chain()]{@link Collection#chain} or [where()]{@link Collection#where}.\n   * @example {@tutorial Query Examples}\n   * @param {object} query - 'mongo-like' query object\n   * @returns {array} Array of matching documents\n   */\n  public find(query?: Query): Doc<E>[] {\n    return this.chain().find(query).data();\n  }\n\n  /**\n   * Find object by unindexed field by property equal to value,\n   * simply iterates and returns the first element matching the query\n   */\n  public findOneUnindexed(prop: string, value: ANY) {\n    let i = this.data.length;\n    let doc;\n    while (i--) {\n      if (this.data[i][prop] === value) {\n        doc = this.data[i];\n        return doc;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Transaction methods\n   */\n\n  /** start the transation */\n  public startTransaction(): void {\n    if (this.transactional) {\n      this.cachedData = clone(this.data, this.cloneMethod);\n      this.cachedIndex = this.idIndex;\n      this.cachedBinaryIndex = this.binaryIndices;\n\n      // propagate startTransaction to dynamic views\n      for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n        this._dynamicViews[idx].startTransaction();\n      }\n    }\n  }\n\n  /** commit the transation */\n  public commit(): void {\n    if (this.transactional) {\n      this.cachedData = null;\n      this.cachedIndex = null;\n      this.cachedBinaryIndex = null;\n\n      // propagate commit to dynamic views\n      for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n        this._dynamicViews[idx].commit();\n      }\n    }\n  }\n\n  /** roll back the transation */\n  public rollback(): void {\n    if (this.transactional) {\n      if (this.cachedData !== null && this.cachedIndex !== null) {\n        this.data = this.cachedData;\n        this.idIndex = this.cachedIndex;\n        this.binaryIndices = this.cachedBinaryIndex;\n      }\n\n      // propagate rollback to dynamic views\n      for (let idx = 0; idx < this._dynamicViews.length; idx++) {\n        this._dynamicViews[idx].rollback();\n      }\n    }\n  }\n\n  /**\n   * Query the collection by supplying a javascript filter function.\n   * @example\n   * let results = coll.where(function(obj) {\n\t *   return obj.legs === 8;\n\t * });\n   *\n   * @param {function} fun - filter function to run against all collection docs\n   * @returns {array} all documents which pass your filter function\n   */\n  public where(fun: (obj: E) => boolean): Doc<E>[] {\n    return this.chain().where(fun).data();\n  }\n\n  /**\n   * Map Reduce operation\n   * @param {function} mapFunction - function to use as map function\n   * @param {function} reduceFunction - function to use as reduce function\n   * @returns {data} The result of your mapReduce operation\n   */\n  public mapReduce<T, U>(mapFunction: (value: E, index: number, array: E[]) => T, reduceFunction: (array: T[]) => U): U {\n    try {\n      return reduceFunction(this.data.map(mapFunction));\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  /**\n   * Join two collections on specified properties\n   *\n   * @param {array} joinData - array of documents to 'join' to this collection\n   * @param {string} leftJoinProp - property name in collection\n   * @param {string} rightJoinProp - property name in joinData\n   * @param {function} mapFun - (Optional) map function to use\n   * @returns {Resultset} Result of the mapping operation\n   */\n  //eqJoin<T extends object>(joinData: T[] | Resultset<T>, leftJoinProp: string | ((obj: E) => string), rightJoinProp: string | ((obj: T) => string)): Resultset<{ left: E; right: T; }>;\n  // eqJoin<T extends object, U extends object>(joinData: T[] | Resultset<T>, leftJoinProp: string | ((obj: E) => string), rightJoinProp: string | ((obj: T) => string), mapFun?: (a: E, b: T) => U): Resultset<U> {\n  //eqJoin<T extends object, U extends object>(joinData: T[] | Resultset<T>, leftJoinKey: string | ((obj: E) => string), rightJoinKey: string | ((obj: T) => string), mapFun?: (a: E, b: T) => U, dataOptions?: Resultset.DataOptions): Resultset<{ left: E; right: T; }> {\n  public eqJoin(joinData: ANY[], leftJoinProp: string, rightJoinProp: string, mapFun?: Function): Resultset {\n    // logic in Resultset class\n    return new Resultset(this).eqJoin(joinData, leftJoinProp, rightJoinProp, mapFun);\n  }\n\n  /* ------ STAGING API -------- */\n\n  /**\n   * stages: a map of uniquely identified 'stages', which hold copies of objects to be\n   * manipulated without affecting the data in the original collection\n   */\n\n\n  /**\n   * (Staging API) create a stage and/or retrieve it\n   */\n  getStage(name: string) {\n    if (!this.stages[name]) {\n      this.stages[name] = {};\n    }\n    return this.stages[name];\n  }\n\n  /**\n   * a collection of objects recording the changes applied through a commmitStage\n   */\n\n  /**\n   * (Staging API) create a copy of an object and insert it into a stage\n   */\n  public stage(stageName: string, obj: ANY) {\n    const copy = JSON.parse(JSON.stringify(obj));\n    this.getStage(stageName)[obj.$loki] = copy;\n    return copy;\n  }\n\n  /**\n   * (Staging API) re-attach all objects to the original collection, so indexes and views can be rebuilt\n   * then create a message to be inserted in the commitlog\n   * @param {string} stageName - name of stage\n   * @param {string} message\n   */\n  public commitStage(stageName: string, message: string) {\n    const stage = this.getStage(stageName);\n    let prop;\n    const timestamp = new Date().getTime();\n\n    for (prop in stage) {\n      this.update(stage[prop]);\n      this.commitLog.push({\n        timestamp,\n        message,\n        data: JSON.parse(JSON.stringify(stage[prop]))\n      });\n    }\n    this.stages[stageName] = {};\n  }\n\n  /**\n   */\n  public extract(field: string) {\n    let i = 0;\n    const len = this.data.length;\n    const isDotNotation = isDeepProperty(field);\n    const result = [];\n    for (i; i < len; i += 1) {\n      result.push(deepProperty(this.data[i], field, isDotNotation));\n    }\n    return result;\n  }\n\n  /**\n   */\n  public max(field: string) {\n    return Math.max.apply(null, this.extract(field));\n  }\n\n  /**\n   */\n  public min(field: string) {\n    return Math.min.apply(null, this.extract(field));\n  }\n\n  /**\n   */\n  public maxRecord(field: string) {\n    let i = 0;\n    const len = this.data.length;\n    const deep = isDeepProperty(field);\n\n    const result = {\n      index: 0,\n      value: 0\n    };\n\n    let max;\n\n    for (i; i < len; i += 1) {\n      if (max !== undefined) {\n        if (max < deepProperty(this.data[i], field, deep)) {\n          max = deepProperty(this.data[i], field, deep);\n          result.index = this.data[i].$loki;\n        }\n      } else {\n        max = deepProperty(this.data[i], field, deep);\n        result.index = this.data[i].$loki;\n      }\n    }\n    result.value = max;\n    return result;\n  }\n\n  /**\n   */\n  minRecord(field: string) {\n    let i = 0;\n    const len = this.data.length;\n    const deep = isDeepProperty(field);\n\n    const result = {\n      index: 0,\n      value: 0\n    };\n\n    let min;\n\n    for (i; i < len; i += 1) {\n      if (min !== undefined) {\n        if (min > deepProperty(this.data[i], field, deep)) {\n          min = deepProperty(this.data[i], field, deep);\n          result.index = this.data[i].$loki;\n        }\n      } else {\n        min = deepProperty(this.data[i], field, deep);\n        result.index = this.data[i].$loki;\n      }\n    }\n    result.value = min;\n    return result;\n  }\n\n  /**\n   */\n  public extractNumerical(field: string) {\n    return this.extract(field).map(parseFloat).filter(Number).filter((n) => !(isNaN(n)));\n  }\n\n  /**\n   * Calculates the average numerical value of a property\n   *\n   * @param {string} field - name of property in docs to average\n   * @returns {number} average of property in all docs in the collection\n   */\n  public avg(field: string) {\n    return average(this.extractNumerical(field));\n  }\n\n  /**\n   * Calculate standard deviation of a field\n   * @param {string} field\n   */\n  public stdDev(field: string) {\n    return standardDeviation(this.extractNumerical(field));\n  }\n\n  /**\n   * @param {string} field\n   */\n  public mode(field: string) {\n    const dict = {};\n    const data = this.extract(field);\n    data.forEach((obj) => {\n      if (dict[obj]) {\n        dict[obj] += 1;\n      } else {\n        dict[obj] = 1;\n      }\n    });\n    let max;\n    let prop;\n    let mode;\n    for (prop in dict) {\n      if (max) {\n        if (max < dict[prop]) {\n          mode = prop;\n        }\n      } else {\n        mode = prop;\n        max = dict[prop];\n      }\n    }\n    return mode;\n  }\n\n  /**\n   * @param {string} field - property name\n   */\n  public median(field: string) {\n    const values = this.extractNumerical(field);\n    values.sort((a, b) => a - b);\n\n    const half = Math.floor(values.length / 2);\n\n    if (values.length % 2) {\n      return values[half];\n    } else {\n      return (values[half - 1] + values[half]) / 2.0;\n    }\n  }\n}\n\nexport namespace Collection {\n  export interface Options {\n    unique?: string[];\n    indices?: string[];\n    adaptiveBinaryIndices?: boolean;\n    asyncListeners?: boolean;\n    disableChangesApi?: boolean;\n    disableDeltaChangesApi?: boolean;\n    clone?: boolean;\n    serializableIndices?: boolean;\n    cloneMethod?: CloneMethod;\n    transactional?: boolean;\n    ttl?: number;\n    ttlInterval?: number;\n    fullTextSearch?: FullTextSearch.FieldOptions[];\n  }\n\n  export interface DeserializeOptions {\n    retainDirtyFlags?: boolean;\n    fullTextSearch?: Dict<Tokenizer.FunctionSerialization>;\n  }\n\n  export interface BinaryIndex {\n    dirty: boolean;\n    values: any;\n  }\n\n  export type Change = any;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/collection.ts","export enum CloneMethod {\n  PARSE_STRINGIFY,\n  DEEP,\n  SHALLOW,\n  SHALLOW_ASSIGN,\n  SHALLOW_RECURSE_OBJECTS,\n}\n\nfunction add(copy: any, key: any, value: any) {\n  if (copy instanceof Array) {\n    copy.push(value);\n    return copy[copy.length - 1];\n  }\n  else if (copy instanceof Object) {\n    copy[key] = value;\n    return copy[key];\n  }\n}\n\nfunction walk(target: any, copy: any) {\n  for (let key in target) {\n    let obj = target[key];\n    if (obj instanceof Date) {\n      let value = new Date(obj.getTime());\n      add(copy, key, value);\n    }\n    else if (obj instanceof Function) {\n      let value = obj;\n      add(copy, key, value);\n    }\n    else if (obj instanceof Array) {\n      let value: any[] = [];\n      let last = add(copy, key, value);\n      walk(obj, last);\n    }\n    else if (obj instanceof Object) {\n      let value = {};\n      let last = add(copy, key, value);\n      walk(obj, last);\n    }\n    else {\n      let value = obj;\n      add(copy, key, value);\n    }\n  }\n}\n\n// Deep copy from Simeon Velichkov.\n/**\n * @param target\n * @returns {any}\n */\nfunction deepCopy(target: any) {\n  if (/number|string|boolean/.test(typeof target)) {\n    return target;\n  }\n  if (target instanceof Date) {\n    return new Date(target.getTime());\n  }\n\n  const copy = (target instanceof Array) ? [] : {};\n  walk(target, copy);\n  return copy;\n}\n\n/**\n * @hidden\n */\nexport function clone<T>(data: T, method: CloneMethod = CloneMethod.PARSE_STRINGIFY): T {\n  if (data === null || data === undefined) {\n    return null;\n  }\n\n  let cloned: any;\n\n  switch (method) {\n    case CloneMethod.PARSE_STRINGIFY:\n      cloned = JSON.parse(JSON.stringify(data));\n      break;\n    case CloneMethod.DEEP:\n      cloned = deepCopy(data);\n      break;\n    case CloneMethod.SHALLOW:\n      cloned = Object.create(data.constructor.prototype);\n      Object.assign(cloned, data);\n      break;\n    case CloneMethod.SHALLOW_RECURSE_OBJECTS:\n      // shallow clone top level properties\n      cloned = clone(data, CloneMethod.SHALLOW);\n      const keys = Object.keys(data);\n      // for each of the top level properties which are object literals, recursively shallow copy\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (typeof data[key] === \"object\" && data[key].constructor.name === \"Object\") {\n          cloned[key] = clone(data[key], CloneMethod.SHALLOW_RECURSE_OBJECTS);\n        }\n      }\n      break;\n    default:\n      break;\n  }\n\n  return cloned as any as T;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/clone.ts","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 3\n// module chunks = 0","import {Collection} from \"./collection\";\nimport {clone, CloneMethod} from \"./clone\";\nimport {ltHelper, gtHelper, aeqHelper, sortHelper} from \"./helper\";\nimport {Dict, Doc, Query} from \"../../common/types\";\nimport {ScoreResult} from \"../../full-text-search/src/scorer\";\n\nexport type ANY = any;\n\n// used to recursively scan hierarchical transform step object for param substitution\nfunction resolveTransformObject(subObj: object, params: object, depth: number = 0) {\n  let prop;\n  let pname;\n\n  if (++depth >= 10) return subObj;\n\n  for (prop in subObj) {\n    if (typeof subObj[prop] === \"string\" && subObj[prop].indexOf(\"[%lktxp]\") === 0) {\n      pname = subObj[prop].substring(8);\n      if (params[pname] !== undefined) {\n        subObj[prop] = params[pname];\n      }\n    } else if (typeof subObj[prop] === \"object\") {\n      subObj[prop] = resolveTransformObject(subObj[prop], params, depth);\n    }\n  }\n\n  return subObj;\n}\n\n// top level utility to resolve an entire (single) transform (array of steps) for parameter substitution\nfunction resolveTransformParams(transform: any, params: object) {\n  let idx;\n  let clonedStep;\n  const resolvedTransform = [];\n\n  if (params === undefined) return transform;\n\n  // iterate all steps in the transform array\n  for (idx = 0; idx < transform.length; idx++) {\n    // clone transform so our scan/replace can operate directly on cloned transform\n    clonedStep = clone(transform[idx], CloneMethod.SHALLOW_RECURSE_OBJECTS);\n    resolvedTransform.push(resolveTransformObject(clonedStep, params));\n  }\n\n  return resolvedTransform;\n}\n\nfunction containsCheckFn(a: ANY) {\n  if (typeof a === \"string\" || Array.isArray(a)) {\n    return (b: ANY) => (a as string).indexOf(b) !== -1;\n  } else if (typeof a === \"object\" && a !== null) {\n    return (b: ANY) => Object.hasOwnProperty.call(a, b);\n  }\n  return null;\n}\n\nfunction doQueryOp(val: ANY, op: ANY) {\n  for (let p in op) {\n    if (Object.hasOwnProperty.call(op, p)) {\n      return LokiOps[p](val, op[p]);\n    }\n  }\n  return false;\n}\n\n\n/**\n * @hidden\n */\nexport const LokiOps = {\n  // comparison operators\n  // a is the value in the collection\n  // b is the query value\n  $eq(a: ANY, b: ANY) {\n    return a === b;\n  },\n\n  // abstract/loose equality\n  $aeq(a: ANY, b: ANY) {\n    return a == b;\n  },\n\n  $ne(a: ANY, b: ANY) {\n    // ecma 5 safe test for NaN\n    if (b !== b) {\n      // ecma 5 test value is not NaN\n      return (a === a);\n    }\n\n    return a !== b;\n  },\n\n  // date equality / loki abstract equality test\n  $dteq(a: ANY, b: ANY) {\n    return aeqHelper(a, b);\n  },\n\n  $gt(a: ANY, b: ANY) {\n    return gtHelper(a, b, false);\n  },\n\n  $gte(a: ANY, b: ANY) {\n    return gtHelper(a, b, true);\n  },\n\n  $lt(a: ANY, b: ANY) {\n    return ltHelper(a, b, false);\n  },\n\n  $lte(a: ANY, b: ANY) {\n    return ltHelper(a, b, true);\n  },\n\n  // ex : coll.find({'orderCount': {$between: [10, 50]}});\n  $between(a: ANY, vals: ANY) {\n    if (a === undefined || a === null) return false;\n    return (gtHelper(a, vals[0], true) && ltHelper(a, vals[1], true));\n  },\n\n  $in(a: ANY, b: ANY) {\n    return b.indexOf(a) !== -1;\n  },\n\n  $nin(a: ANY, b: ANY) {\n    return b.indexOf(a) === -1;\n  },\n\n  $keyin(a: ANY, b: ANY) {\n    return a in b;\n  },\n\n  $nkeyin(a: ANY, b: ANY) {\n    return !(a in b);\n  },\n\n  $definedin(a: ANY, b: ANY) {\n    return b[a] !== undefined;\n  },\n\n  $undefinedin(a: ANY, b: ANY) {\n    return b[a] === undefined;\n  },\n\n  $regex(a: ANY, b: ANY) {\n    return b.test(a);\n  },\n\n  $containsString(a: ANY, b: ANY) {\n    return (typeof a === \"string\") && (a.indexOf(b) !== -1);\n  },\n\n  $containsNone(a: ANY, b: ANY) {\n    return !LokiOps.$containsAny(a, b);\n  },\n\n  $containsAny(a: ANY, b: ANY) {\n    const checkFn = containsCheckFn(a);\n    if (checkFn !== null) {\n      return (Array.isArray(b)) ? (b.some(checkFn)) : (checkFn(b));\n    }\n    return false;\n  },\n\n  $contains(a: ANY, b: ANY) {\n    const checkFn = containsCheckFn(a);\n    if (checkFn !== null) {\n      return (Array.isArray(b)) ? (b.every(checkFn)) : (checkFn(b));\n    }\n    return false;\n  },\n\n  $type(a: ANY, b: ANY) {\n    let type: string = typeof a;\n    if (type === \"object\") {\n      if (Array.isArray(a)) {\n        type = \"array\";\n      } else if (a instanceof Date) {\n        type = \"date\";\n      }\n    }\n    return (typeof b !== \"object\") ? (type === b) : doQueryOp(type, b);\n  },\n\n  $finite(a: ANY, b: ANY) {\n    return (b === isFinite(a));\n  },\n\n  $size(a: ANY, b: ANY) {\n    if (Array.isArray(a)) {\n      return (typeof b !== \"object\") ? (a.length === b) : doQueryOp(a.length, b);\n    }\n    return false;\n  },\n\n  $len(a: ANY, b: ANY) {\n    if (typeof a === \"string\") {\n      return (typeof b !== \"object\") ? (a.length === b) : doQueryOp(a.length, b);\n    }\n    return false;\n  },\n\n  $where(a: ANY, b: ANY) {\n    return b(a) === true;\n  },\n\n  // field-level logical operators\n  // a is the value in the collection\n  // b is the nested query operation (for '$not')\n  //   or an array of nested query operations (for '$and' and '$or')\n  $not(a: ANY, b: ANY) {\n    return !doQueryOp(a, b);\n  },\n\n  $and(a: ANY, b: ANY) {\n    for (let idx = 0, len = b.length; idx < len; idx += 1) {\n      if (!doQueryOp(a, b[idx])) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  $or(a: ANY, b: ANY) {\n    for (let idx = 0, len = b.length; idx < len; idx += 1) {\n      if (doQueryOp(a, b[idx])) {\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// if an op is registered in this object, our 'calculateRange' can use it with our binary indices.\n// if the op is registered to a function, we will run that function/op as a 2nd pass filter on results.\n// those 2nd pass filter functions should be similar to LokiOps functions, accepting 2 vals to compare.\nconst indexedOps = {\n  $eq: LokiOps.$eq,\n  $aeq: true,\n  $dteq: true,\n  $gt: true,\n  $gte: true,\n  $lt: true,\n  $lte: true,\n  $in: true,\n  $between: true\n};\n\n/**\n * dotSubScan - helper function used for dot notation queries.\n *\n * @param {object} root - object to traverse\n * @param {array} paths - array of properties to drill into\n * @param {function} fun - evaluation function to test with\n * @param {any} value - comparative value to also pass to (compare) fun\n * @param {number} pathOffset - index of the item in 'paths' to start the sub-scan from\n */\nfunction dotSubScan(root: object, paths: string[], fun: Function, value: ANY, pathOffset = 0) {\n  const path = paths[pathOffset];\n  if (root === undefined || root === null || root[path] === undefined) {\n    return false;\n  }\n\n  let valueFound = false;\n  const element = root[path];\n  if (pathOffset + 1 >= paths.length) {\n    // if we have already expanded out the dot notation,\n    // then just evaluate the test function and value on the element\n    valueFound = fun(element, value);\n  } else if (Array.isArray(element)) {\n    for (let index = 0, len = element.length; index < len; index += 1) {\n      valueFound = dotSubScan(element[index], paths, fun, value, pathOffset + 1);\n      if (valueFound === true) {\n        break;\n      }\n    }\n  } else {\n    valueFound = dotSubScan(element, paths, fun, value, pathOffset + 1);\n  }\n\n  return valueFound;\n}\n\n/**\n * Resultset class allowing chainable queries.  Intended to be instanced internally.\n *    Collection.find(), Collection.where(), and Collection.chain() instantiate this.\n *\n * @example\n *    mycollection.chain()\n *      .find({ 'doors' : 4 })\n *      .where(function(obj) { return obj.name === 'Toyota' })\n *      .data();\n */\nexport class Resultset<E extends object = object> {\n\n  public collection: Collection<E>;\n  public filteredrows: number[];\n  public filterInitialized: boolean;\n  // Holds the scoring result of the last full-text search.\n  private _scoring: ScoreResult;\n\n  /**\n   * Constructor.\n   * @param {Collection} collection - the collection which this Resultset will query against\n   */\n  constructor(collection: Collection<E>) {\n    // retain reference to collection we are querying against\n    this.collection = collection;\n    this.filteredrows = [];\n    this.filterInitialized = false;\n    this._scoring = null;\n  }\n\n  /**\n   * reset() - Reset the resultset to its initial state.\n   *\n   * @returns {Resultset} Reference to this resultset, for future chain operations.\n   */\n  reset(): Resultset<E> {\n    if (this.filteredrows.length > 0) {\n      this.filteredrows = [];\n    }\n    this.filterInitialized = false;\n    return this;\n  }\n\n  /**\n   * toJSON() - Override of toJSON to avoid circular references\n   *\n   */\n  public toJSON(): Resultset<E> {\n    const copy = this.copy();\n    copy.collection = <never>null;\n    return copy;\n  }\n\n  /**\n   * Allows you to limit the number of documents passed to next chain operation.\n   *    A resultset copy() is made to avoid altering original resultset.\n   *\n   * @param {int} qty - The number of documents to return.\n   * @returns {Resultset} Returns a copy of the resultset, limited by qty, for subsequent chain ops.\n   */\n  public limit(qty: number): Resultset<E> {\n    // if this has no filters applied, we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n\n    this.filteredrows = this.filteredrows.slice(0, qty);\n    this.filterInitialized = true;\n    return this;\n  }\n\n  /**\n   * Used for skipping 'pos' number of documents in the resultset.\n   *\n   * @param {int} pos - Number of documents to skip; all preceding documents are filtered out.\n   * @returns {Resultset} Returns a copy of the resultset, containing docs starting at 'pos' for subsequent chain ops.\n   */\n  public offset(pos: number): Resultset<E> {\n    // if this has no filters applied, we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n\n    this.filteredrows = this.filteredrows.slice(pos);\n    this.filterInitialized = true;\n    return this;\n  }\n\n  /**\n   * copy() - To support reuse of resultset in branched query situations.\n   *\n   * @returns {Resultset} Returns a copy of the resultset (set) but the underlying document references will be the same.\n   */\n  public copy(): Resultset<E> {\n    const result = new Resultset<E>(this.collection);\n\n    if (this.filteredrows.length > 0) {\n      result.filteredrows = this.filteredrows.slice();\n    }\n    result.filterInitialized = this.filterInitialized;\n\n    return result;\n  }\n\n  /**\n   * Alias of copy()\n   */\n  branch() {\n    return this.copy();\n  }\n\n  /**\n   * Executes a named collection transform or raw array of transform steps against the resultset.\n   *\n   * @param {(string|array)} transform - name of collection transform or raw transform array\n   * @param {object} [parameters=] - object property hash of parameters, if the transform requires them.\n   * @returns {Resultset} either (this) resultset or a clone of of this resultset (depending on steps)\n   */\n  transform(transform: string | any[], parameters?: object): Resultset<E> {\n    let idx;\n    let step;\n    let rs = this as Resultset;\n\n    // if transform is name, then do lookup first\n    if (typeof transform === \"string\") {\n      if (this.collection.transforms[transform] !== undefined) {\n        transform = this.collection.transforms[transform];\n      }\n    }\n\n    // either they passed in raw transform array or we looked it up, so process\n    if (typeof transform !== \"object\" || !Array.isArray(transform)) {\n      throw new Error(\"Invalid transform\");\n    }\n\n    if (parameters !== undefined) {\n      transform = resolveTransformParams(transform, parameters);\n    }\n\n    for (idx = 0; idx < transform.length; idx++) {\n      step = transform[idx];\n\n      switch (step.type) {\n        case \"find\":\n          rs.find(step.value);\n          break;\n        case \"where\":\n          rs.where(step.value);\n          break;\n        case \"simplesort\":\n          rs.simplesort(step.property, step.desc);\n          break;\n        case \"compoundsort\":\n          rs.compoundsort(step.value);\n          break;\n        case \"sort\":\n          rs.sort(step.value);\n          break;\n        case \"limit\":\n          rs = rs.limit(step.value);\n          break; // limit makes copy so update reference\n        case \"offset\":\n          rs = rs.offset(step.value);\n          break; // offset makes copy so update reference\n        case \"map\":\n          rs = rs.map(step.value, step.dataOptions);\n          break;\n        case \"eqJoin\":\n          rs = rs.eqJoin(step.joinData, step.leftJoinKey, step.rightJoinKey, step.mapFun, step.dataOptions);\n          break;\n        // following cases break chain by returning array data so make any of these last in transform steps\n        case \"mapReduce\":\n          rs = rs.mapReduce(step.mapFunction, step.reduceFunction);\n          break;\n        // following cases update documents in current filtered resultset (use carefully)\n        case \"update\":\n          rs.update(step.value);\n          break;\n        case \"remove\":\n          rs.remove();\n          break;\n        default:\n          break;\n      }\n    }\n    return rs as Resultset<E>;\n  }\n\n  /**\n   * User supplied compare function is provided two documents to compare. (chainable)\n   * @example\n   *    rslt.sort(function(obj1, obj2) {\n\t *      if (obj1.name === obj2.name) return 0;\n\t *      if (obj1.name > obj2.name) return 1;\n\t *      if (obj1.name < obj2.name) return -1;\n\t *    });\n   *\n   * @param {function} comparefun - A javascript compare function used for sorting.\n   * @returns {Resultset} Reference to this resultset, sorted, for future chain operations.\n   */\n  public sort(comparefun: (a: E, b: E) => number): Resultset<E> {\n    // if this has no filters applied, just we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n\n    const wrappedComparer =\n      (((userComparer, data) => (a: number, b: number) => userComparer(data[a], data[b])))(comparefun, this.collection.data);\n\n    this.filteredrows.sort(wrappedComparer);\n\n    return this;\n  }\n\n  /**\n   * Simpler, loose evaluation for user to sort based on a property name. (chainable).\n   *    Sorting based on the same lt/gt helper functions used for binary indices.\n   *\n   * @param {string} propname - name of property to sort by.\n   * @param {boolean} isdesc - (Optional) If true, the property will be sorted in descending order\n   * @returns {Resultset} Reference to this resultset, sorted, for future chain operations.\n   */\n  public simplesort(propname: string, isdesc?: boolean): Resultset<E> {\n    if (isdesc === undefined) {\n      isdesc = false;\n    }\n\n    // if this has no filters applied, just we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      // if we have a binary index and no other filters applied, we can use that instead of sorting (again)\n      if (this.collection.binaryIndices[propname] !== undefined) {\n        // make sure index is up-to-date\n        this.collection.ensureIndex(propname);\n        // copy index values into filteredrows\n        this.filteredrows = this.collection.binaryIndices[propname].values.slice(0);\n\n        if (isdesc) {\n          this.filteredrows.reverse();\n        }\n\n        // we are done, return this (resultset) for further chain ops\n        return this;\n      }\n      // otherwise initialize array for sort below\n      else {\n        this.filteredrows = this.collection.prepareFullDocIndex();\n      }\n    }\n\n    const wrappedComparer = ((prop, desc, data) => (a: number, b: number) => {\n      let val1, val2, arr;\n      if (~prop.indexOf(\".\")) {\n        arr = prop.split(\".\");\n        val1 = arr.reduce(function (obj, i) {\n          return obj && obj[i] || undefined;\n        }, data[a]);\n        val2 = arr.reduce(function (obj, i) {\n          return obj && obj[i] || undefined;\n        }, data[b]);\n      } else {\n        val1 = data[a][prop];\n        val2 = data[b][prop];\n      }\n      return sortHelper(val1, val2, desc);\n    })(propname, isdesc, this.collection.data);\n\n    this.filteredrows.sort(wrappedComparer);\n\n    return this;\n  }\n\n  /**\n   * Allows sorting a resultset based on multiple columns.\n   * @example\n   * // to sort by age and then name (both ascending)\n   * rs.compoundsort(['age', 'name']);\n   * // to sort by age (ascending) and then by name (descending)\n   * rs.compoundsort(['age', ['name', true]);\n   *\n   * @param {array} properties - array of property names or subarray of [propertyname, isdesc] used evaluate sort order\n   * @returns {Resultset} Reference to this resultset, sorted, for future chain operations.\n   */\n  public compoundsort(properties: (string | [string, boolean])[]): Resultset<E> {\n    if (properties.length === 0) {\n      throw new Error(\"Invalid call to compoundsort, need at least one property\");\n    }\n\n    let prop;\n    if (properties.length === 1) {\n      prop = properties[0];\n      if (typeof prop === \"string\") {\n        return this.simplesort(prop, false);\n      } else {\n        return this.simplesort(prop[0], prop[1]);\n      }\n    }\n\n    // unify the structure of 'properties' to avoid checking it repeatedly while sorting\n    for (let i = 0, len = properties.length; i < len; i += 1) {\n      prop = properties[i];\n      if (typeof prop === \"string\") {\n        properties[i] = [prop, false];\n      }\n    }\n\n    // if this has no filters applied, just we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n\n    const wrappedComparer =\n      (((props, data) => (a: number, b: number) => this._compoundeval(props, data[a], data[b])))(properties as [string, boolean][], this.collection.data);\n\n    this.filteredrows.sort(wrappedComparer);\n\n    return this;\n  }\n\n  /**\n   * Helper function for compoundsort(), performing individual object comparisons\n   *\n   * @param {Array} properties - array of property names, in order, by which to evaluate sort order\n   * @param {object} obj1 - first object to compare\n   * @param {object} obj2 - second object to compare\n   * @returns {number} 0, -1, or 1 to designate if identical (sortwise) or which should be first\n   */\n  private _compoundeval(properties: [string, boolean][], obj1: E, obj2: E): number {\n    let res = 0;\n    let prop;\n    let field;\n    let val1, val2, arr;\n    for (let i = 0, len = properties.length; i < len; i++) {\n      prop = properties[i];\n      field = prop[0];\n      if (~field.indexOf(\".\")) {\n        arr = field.split(\".\");\n        val1 = arr.reduce((obj: object, i: string) => {\n          return obj && obj[i] || undefined;\n        }, obj1);\n        val2 = arr.reduce((obj: object, i: string) => {\n          return obj && obj[i] || undefined;\n        }, obj2);\n      } else {\n        val1 = obj1[field];\n        val2 = obj2[field];\n      }\n      res = sortHelper(val1, val2, prop[1]);\n      if (res !== 0) {\n        return res;\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * Sorts the resultset based on the last full-text-search scoring.\n   * @param {boolean} [ascending=false] - sort ascending\n   * @returns {Resultset<E extends Object>}\n   */\n  public sortByScoring(ascending = false): Resultset<E> {\n    if (this._scoring === null) {\n      throw new Error(\"No scoring available\");\n    }\n\n    if (ascending) {\n      this.filteredrows.sort((a: number, b: number) => this._scoring[a] - this._scoring[b]);\n    } else {\n      this.filteredrows.sort((a: number, b: number) => this._scoring[b] - this._scoring[a]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Returns the scoring of the last full-text-search.\n   * @returns {ScoreResult}\n   */\n  public getScoring(): ScoreResult {\n    if (this._scoring === null) {\n      throw new Error(\"No scoring available\");\n    }\n\n    return this._scoring;\n  }\n\n  /**\n   * findOr() - oversee the operation of OR'ed query expressions.\n   *    OR'ed expression evaluation runs each expression individually against the full collection,\n   *    and finally does a set OR on each expression's results.\n   *    Each evaluation can utilize a binary index to prevent multiple linear array scans.\n   *\n   * @param {array} expressionArray - array of expressions\n   * @returns {Resultset} this resultset for further chain ops.\n   */\n  public findOr(expressionArray: Query[]): Resultset<E> {\n    let fr = null;\n    let fri = 0;\n    let frlen = 0;\n    const docset = [];\n    const idxset = [];\n    let idx = 0;\n    const origCount = this.count();\n\n    // If filter is already initialized, then we query against only those items already in filter.\n    // This means no index utilization for fields, so hopefully its filtered to a smallish filteredrows.\n    for (let ei = 0, elen = expressionArray.length; ei < elen; ei++) {\n      // we need to branch existing query to run each filter separately and combine results\n      fr = this.branch().find(expressionArray[ei]).filteredrows;\n      frlen = fr.length;\n      // if the find operation did not reduce the initial set, then the initial set is the actual result\n      if (frlen === origCount) {\n        return this;\n      }\n\n      // add any document 'hits'\n      for (fri = 0; fri < frlen; fri++) {\n        idx = fr[fri];\n        if (idxset[idx] === undefined) {\n          idxset[idx] = true;\n          docset.push(idx);\n        }\n      }\n    }\n\n    this.filteredrows = docset;\n    this.filterInitialized = true;\n\n    return this;\n  }\n\n  public $or(expressionArray: Query[]): Resultset<E> {\n    return this.findOr(expressionArray);\n  }\n\n  /**\n   * findAnd() - oversee the operation of AND'ed query expressions.\n   *    AND'ed expression evaluation runs each expression progressively against the full collection,\n   *    internally utilizing existing chained resultset functionality.\n   *    Only the first filter can utilize a binary index.\n   *\n   * @param {array} expressionArray - array of expressions\n   * @returns {Resultset} this resultset for further chain ops.\n   */\n  public findAnd(expressionArray: Query[]): Resultset<E> {\n    // we have already implementing method chaining in this (our Resultset class)\n    // so lets just progressively apply user supplied and filters\n    for (let i = 0, len = expressionArray.length; i < len; i++) {\n      if (this.count() === 0) {\n        return this;\n      }\n      this.find(expressionArray[i]);\n    }\n    return this;\n  }\n\n  public $and(expressionArray: Query[]): Resultset<E> {\n    return this.findAnd(expressionArray);\n  }\n\n  /**\n   * Used for querying via a mongo-style query object.\n   *\n   * @param {object} query - A mongo-style query object used for filtering current results.\n   * @param {boolean} firstOnly - (Optional) Used by collection.findOne() - flag if this was invoked via findOne()\n   * @returns {Resultset} this resultset for further chain ops.\n   */\n  public find(query?: Query, firstOnly = false): Resultset<E> {\n    if (this.collection.data.length === 0) {\n      this.filteredrows = [];\n      this.filterInitialized = true;\n      return this;\n    }\n\n    const queryObject = query || \"getAll\";\n    let property;\n    let queryObjectOp;\n    let value;\n\n    if (typeof queryObject === \"object\") {\n      let filters = [];\n      for (let p in queryObject) {\n        let obj = {};\n        obj[p] = queryObject[p];\n        filters.push(obj);\n\n        if (queryObject[p] !== undefined) {\n          property = p;\n          queryObjectOp = queryObject[p];\n        }\n      }\n      // if more than one expression in single query object,\n      // convert implicit $and to explicit $and\n      if (filters.length > 1) {\n        return this.find({\"$and\": filters}, firstOnly);\n      }\n    }\n\n    // apply no filters if they want all\n    if (!property || queryObject === \"getAll\") {\n      if (firstOnly) {\n        this.filteredrows = (this.collection.data.length > 0) ? [0] : [];\n        this.filterInitialized = true;\n      }\n      return this;\n    }\n\n    // injecting $and and $or expression tree evaluation here.\n    if (property === \"$and\" || property === \"$or\") {\n      this[property](queryObjectOp);\n\n      // for chained find with firstonly,\n      if (firstOnly && this.filteredrows.length > 1) {\n        this.filteredrows = this.filteredrows.slice(0, 1);\n      }\n\n      return this;\n    }\n\n    // see if query object is in shorthand mode (assuming eq operator)\n    let operator;\n    if (queryObjectOp === null || (typeof queryObjectOp !== \"object\" || queryObjectOp instanceof Date)) {\n      operator = \"$eq\";\n      value = queryObjectOp;\n    } else if (typeof queryObjectOp === \"object\") {\n      for (let key in queryObjectOp) {\n        if (queryObjectOp[key] !== undefined) {\n          operator = key;\n          value = queryObjectOp[key];\n          break;\n        }\n      }\n    } else {\n      throw new Error(\"Do not know what you want to do.\");\n    }\n\n    // for regex ops, precompile\n    if (operator === \"$regex\") {\n      if (Array.isArray(value)) {\n        value = new RegExp(value[0], value[1]);\n      } else if (!(value instanceof RegExp)) {\n        value = new RegExp(value);\n      }\n    }\n\n    // if user is deep querying the object such as find('name.first': 'odin')\n    const usingDotNotation = (property.indexOf(\".\") !== -1);\n\n    // if an index exists for the property being queried against, use it\n    // for now only enabling where it is the first filter applied and prop is indexed\n    const doIndexCheck = !usingDotNotation && !this.filterInitialized;\n\n    let searchByIndex = false;\n    if (doIndexCheck && this.collection.binaryIndices[property] && indexedOps[operator]) {\n      // this is where our lazy index rebuilding will take place\n      // basically we will leave all indexes dirty until we need them\n      // so here we will rebuild only the index tied to this property\n      // ensureIndex() will only rebuild if flagged as dirty since we are not passing force=true param\n      if (this.collection.adaptiveBinaryIndices !== true) {\n        this.collection.ensureIndex(property);\n      }\n      searchByIndex = true;\n    }\n\n    // the comparison function\n    const fun = LokiOps[operator];\n\n    // \"shortcut\" for collection data\n    const data = this.collection.data;\n\n    // Query executed differently depending on :\n    //    - whether the property being queried has an index defined\n    //    - if chained, we handle first pass differently for initial filteredrows[] population\n    //\n    // For performance reasons, each case has its own if block to minimize in-loop calculations\n\n    let result: number[] = [];\n    // If the filteredrows[] is already initialized, use it\n    if (this.filterInitialized) {\n      let filter = this.filteredrows;\n\n      // currently supporting dot notation for non-indexed conditions only\n      if (usingDotNotation) {\n        property = property.split(\".\");\n        for (let i = 0; i < filter.length; i++) {\n          let rowIdx = filter[i];\n          if (dotSubScan(data[rowIdx], property, fun, value)) {\n            result.push(rowIdx);\n          }\n        }\n      } else if (property === \"$fts\") {\n        this._scoring = this.collection._fullTextSearch.search(query[\"$fts\"]);\n        let keys = Object.keys(this._scoring);\n        for (let i = 0; i < keys.length; i++) {\n          if (filter.includes(+keys[i])) {\n            result.push(+keys[i]);\n          }\n        }\n      } else if (this.collection.constraints.unique[property] !== undefined && operator === \"$eq\") {\n        // Use unique constraint for search.\n        let row = this.collection.constraints.unique[property].get(value);\n        if (filter.includes(row)) {\n          result.push(row);\n        }\n      } else {\n        for (let i = 0; i < filter.length; i++) {\n          let rowIdx = filter[i];\n          if (fun(data[rowIdx][property], value)) {\n            result.push(rowIdx);\n          }\n        }\n      }\n\n      this.filteredrows = result;\n      this.filterInitialized = true; // next time work against filteredrows[]\n      return this;\n    }\n\n    this.filteredrows = result;\n    this.filterInitialized = true; // next time work against filteredrows[]\n\n    if (property === \"$fts\") {\n      this._scoring = this.collection._fullTextSearch.search(query[\"$fts\"]);\n      let keys = Object.keys(this._scoring);\n      for (let i = 0; i < keys.length; i++) {\n        result.push(+keys[i]);\n      }\n      return this;\n    }\n\n    // Use unique constraint for search.\n    if (this.collection.constraints.unique[property] !== undefined && operator === \"$eq\") {\n      result.push(this.collection.constraints.unique[property].get(value));\n      return this;\n    }\n\n    // first chained query so work against data[] but put results in filteredrows\n    // if not searching by index\n    if (!searchByIndex) {\n      if (usingDotNotation) {\n        property = property.split(\".\");\n        for (let i = 0; i < data.length; i++) {\n          if (dotSubScan(data[i], property, fun, value)) {\n            result.push(i);\n            if (firstOnly) {\n              return this;\n            }\n          }\n        }\n      } else {\n        for (let i = 0; i < data.length; i++) {\n          if (fun(data[i][property], value)) {\n            result.push(i);\n            if (firstOnly) {\n              return this;\n            }\n          }\n        }\n      }\n      return this;\n    }\n\n    let index = this.collection.binaryIndices[property];\n    if (operator !== \"$in\") {\n      // search by index\n      const segm = this.collection.calculateRange(operator, property, value);\n      for (let i = segm[0]; i <= segm[1]; i++) {\n        if (indexedOps[operator] !== true) {\n          // must be a function, implying 2nd phase filtering of results from calculateRange\n          if (indexedOps[operator](data[index.values[i]][property], value)) {\n            result.push(index.values[i]);\n            if (firstOnly) {\n              return this;\n            }\n          }\n        } else {\n          result.push(index.values[i]);\n          if (firstOnly) {\n            return this;\n          }\n        }\n      }\n    } else {\n      const idxset = [];\n      // query each value '$eq' operator and merge the segment results.\n      for (let j = 0, len = value.length; j < len; j++) {\n        const segm = this.collection.calculateRange(\"$eq\", property, value[j]);\n        for (let i = segm[0]; i <= segm[1]; i++) {\n          if (idxset[i] === undefined) {\n            idxset[i] = true;\n            result.push(index.values[i]);\n          }\n          if (firstOnly) {\n            return this;\n          }\n        }\n      }\n    }\n    return this;\n  }\n\n\n  /**\n   * Used for filtering via a javascript filter function.\n   *\n   * @param {function} fun - A javascript function used for filtering current results by.\n   * @returns {Resultset} this resultset for further chain ops.\n   */\n  public where(fun: (obj: E) => boolean): Resultset<E> {\n    let viewFunction;\n    let result = [];\n\n    if (\"function\" === typeof fun) {\n      viewFunction = fun;\n    } else {\n      throw new TypeError(\"Argument is not a stored view or a function\");\n    }\n    try {\n      // If the filteredrows[] is already initialized, use it\n      if (this.filterInitialized) {\n        let j = this.filteredrows.length;\n\n        while (j--) {\n          if (viewFunction(this.collection.data[this.filteredrows[j]]) === true) {\n            result.push(this.filteredrows[j]);\n          }\n        }\n\n        this.filteredrows = result;\n\n        return this;\n      }\n      // otherwise this is initial chained op, work against data, push into filteredrows[]\n      else {\n        let k = this.collection.data.length;\n\n        while (k--) {\n          if (viewFunction(this.collection.data[k]) === true) {\n            result.push(k);\n          }\n        }\n\n        this.filteredrows = result;\n        this.filterInitialized = true;\n\n        return this;\n      }\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  /**\n   * Returns the number of documents in the resultset.\n   * @returns {number} The number of documents in the resultset.\n   */\n  public count(): number {\n    if (this.filterInitialized) {\n      return this.filteredrows.length;\n    }\n    return this.collection.count();\n  }\n\n  /**\n   * Terminates the chain and returns array of filtered documents\n   * @param {object} options\n   * @param {boolean} options.forceClones - Allows forcing the return of cloned objects even when\n   *        the collection is not configured for clone object.\n   * @param {string} options.forceCloneMethod - Allows overriding the default or collection specified cloning method.\n   *        Possible values include 'parse-stringify', 'jquery-extend-deep', and 'shallow'\n   * @param {boolean} options.removeMeta - Will force clones and strip $loki and meta properties from documents\n   *\n   * @returns {Array} Array of documents in the resultset\n   */\n  public data(options: Resultset.DataOptions = {}): Doc<E>[] {\n    let forceClones: boolean;\n    let forceCloneMethod: CloneMethod;\n    let removeMeta: boolean;\n    (\n      {\n        forceClones,\n        forceCloneMethod = this.collection.cloneMethod,\n        removeMeta = false\n      } = options\n    );\n\n    let result = [];\n    let data = this.collection.data;\n    let obj;\n    let len;\n    let i;\n    let method;\n\n    // if user opts to strip meta, then force clones and use 'shallow' if 'force' options are not present\n    if (removeMeta && !forceClones) {\n      forceClones = true;\n      forceCloneMethod = CloneMethod.SHALLOW;\n    }\n\n    // if collection has delta changes active, then force clones and use CloneMethod.DEEP for effective change tracking of nested objects\n    if (!this.collection.disableDeltaChangesApi) {\n      forceClones = true;\n      forceCloneMethod = CloneMethod.DEEP;\n    }\n\n    // if this has no filters applied, just return collection.data\n    if (!this.filterInitialized) {\n      if (this.filteredrows.length === 0) {\n        // determine whether we need to clone objects or not\n        if (this.collection.cloneObjects || forceClones) {\n          len = data.length;\n          method = forceCloneMethod;\n\n          for (i = 0; i < len; i++) {\n            obj = clone(data[i], method);\n            if (removeMeta) {\n              delete obj.$loki;\n              delete obj.meta;\n            }\n            result.push(obj);\n          }\n          return result;\n        }\n        // otherwise we are not cloning so return sliced array with same object references\n        else {\n          return data.slice();\n        }\n      } else {\n        // filteredrows must have been set manually, so use it\n        this.filterInitialized = true;\n      }\n    }\n\n    const fr = this.filteredrows;\n    len = fr.length;\n\n    if (this.collection.cloneObjects || forceClones) {\n      method = forceCloneMethod;\n      for (i = 0; i < len; i++) {\n        obj = clone(data[fr[i]], method);\n        if (removeMeta) {\n          delete obj.$loki;\n          delete obj.meta;\n        }\n        result.push(obj);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        result.push(data[fr[i]]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used to run an update operation on all documents currently in the resultset.\n   *\n   * @param {function} updateFunction - User supplied updateFunction(obj) will be executed for each document object.\n   * @returns {Resultset} this resultset for further chain ops.\n   */\n  update(updateFunction: (obj: E) => E): Resultset<E> {\n    // if this has no filters applied, we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n\n    const len = this.filteredrows.length;\n    const rcd = this.collection.data;\n\n    for (let idx = 0; idx < len; idx++) {\n      // pass in each document object currently in resultset to user supplied updateFunction\n      updateFunction(rcd[this.filteredrows[idx]]);\n\n      // notify collection we have changed this object so it can update meta and allow DynamicViews to re-evaluate\n      this.collection.update(rcd[this.filteredrows[idx]]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes all document objects which are currently in resultset from collection (as well as resultset)\n   *\n   * @returns {Resultset} this (empty) resultset for further chain ops.\n   */\n  public remove(): Resultset<E> {\n    // if this has no filters applied, we need to populate filteredrows first\n    if (!this.filterInitialized && this.filteredrows.length === 0) {\n      this.filteredrows = this.collection.prepareFullDocIndex();\n    }\n    this.collection.remove(this.data());\n    this.filteredrows = [];\n    return this;\n  }\n\n  /**\n   * data transformation via user supplied functions\n   *\n   * @param {function} mapFunction - this function accepts a single document for you to transform and return\n   * @param {function} reduceFunction - this function accepts many (array of map outputs) and returns single value\n   * @returns {value} The output of your reduceFunction\n   */\n  public mapReduce<T, U>(mapFunction: (item: E, index: number, array: E[]) => T, reduceFunction: (array: T[]) => U): U {\n    try {\n      return reduceFunction(this.data().map(mapFunction));\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  /**\n   * Left joining two sets of data. Join keys can be defined or calculated properties\n   * eqJoin expects the right join key values to be unique.  Otherwise left data will be joined on the last joinData object with that key\n   * @param {Array|Resultset|Collection} joinData - Data array to join to.\n   * @param {(string|function)} leftJoinKey - Property name in this result set to join on or a function to produce a value to join on\n   * @param {(string|function)} rightJoinKey - Property name in the joinData to join on or a function to produce a value to join on\n   * @param {function} [mapFun=] - a function that receives each matching pair and maps them into output objects - function(left,right){return joinedObject}\n   * @param {object} [dataOptions=] - optional options to apply to data() calls for left and right sides\n   * @param {boolean} dataOptions.removeMeta - allows removing meta before calling mapFun\n   * @param {boolean} dataOptions.forceClones - forcing the return of cloned objects to your map object\n   * @param {string} dataOptions.forceCloneMethod - Allows overriding the default or collection specified cloning method.\n   * @returns {Resultset} A resultset with data in the format [{left: leftObj, right: rightObj}]\n   */\n  //eqJoin<T extends object>(joinData: T[] | Resultset<T>, leftJoinKey: string | ((obj: E) => string), rightJoinKey: string | ((obj: T) => string)): Resultset<{ left: E; right: T; }>;\n  // eqJoin<T extends object, U extends object>(joinData: T[] | Resultset<T>, leftJoinKey: string | ((obj: E) => string), rightJoinKey: string | ((obj: T) => string), mapFun?: (a: E, b: T) => U, dataOptions?: Resultset.DataOptions): Resultset<U> {\n  eqJoin(joinData: ANY, leftJoinKey: string | Function, rightJoinKey: string | Function, mapFun?: Function, dataOptions?: ANY): ANY {\n// eqJoin<T extends object, U extends object>(joinData: T[] | Resultset<T>, leftJoinKey: string | ((obj: E) => string), rightJoinKey: string | ((obj: T) => string), mapFun?: (a: E, b: T) => U, dataOptions?: Resultset.DataOptions): Resultset<U> {\n    let leftData = [];\n    let leftDataLength;\n    let rightData = [];\n    let rightDataLength;\n    let key;\n    let result = [];\n    let leftKeyisFunction = typeof leftJoinKey === \"function\";\n    let rightKeyisFunction = typeof rightJoinKey === \"function\";\n    let joinMap = {};\n\n    //get the left data\n    leftData = this.data(dataOptions);\n    leftDataLength = leftData.length;\n\n    //get the right data\n    if (joinData instanceof Collection) {\n      rightData = joinData.chain().data(dataOptions);\n    } else if (joinData instanceof Resultset) {\n      rightData = joinData.data(dataOptions);\n    } else if (Array.isArray(joinData)) {\n      rightData = joinData;\n    } else {\n      throw new TypeError(\"joinData needs to be an array or result set\");\n    }\n    rightDataLength = rightData.length;\n\n    //construct a lookup table\n    for (let i = 0; i < rightDataLength; i++) {\n      key = rightKeyisFunction ? (rightJoinKey as Function)(rightData[i]) : rightData[i][rightJoinKey as string];\n      joinMap[key] = rightData[i];\n    }\n\n    if (!mapFun) {\n      mapFun = (left: ANY, right: ANY) => ({\n        left,\n        right\n      });\n    }\n\n    //Run map function over each object in the resultset\n    for (let j = 0; j < leftDataLength; j++) {\n      key = leftKeyisFunction ? (leftJoinKey as Function)(leftData[j]) : leftData[j][leftJoinKey as string];\n      result.push(mapFun(leftData[j], joinMap[key] || {}));\n    }\n\n    //return a new resultset with no filters\n    this.collection = new Collection(\"joinData\");\n    this.collection.insert(result);\n    this.filteredrows = [];\n    this.filterInitialized = false;\n\n    return this;\n  }\n\n  /**\n   * Applies a map function into a new collection for further chaining.\n   * @param {function} mapFun - javascript map function\n   * @param {object} [dataOptions=] - options to data() before input to your map function\n   * @param {boolean} dataOptions.removeMeta - allows removing meta before calling mapFun\n   * @param {boolean} dataOptions.forceClones - forcing the return of cloned objects to your map object\n   * @param {string} dataOptions.forceCloneMethod - Allows overriding the default or collection specified cloning method.\n   */\n  map<U extends object>(mapFun: (obj: E, index: number, array: E[]) => U, dataOptions?: Resultset.DataOptions): Resultset<U> {\n    let data = this.data(dataOptions).map(mapFun);\n    //return return a new resultset with no filters\n    this.collection = new Collection(\"mappedData\");\n    this.collection.insert(data as any as E);\n    this.filteredrows = [];\n    this.filterInitialized = false;\n\n    return this as any as Resultset<U>;\n  }\n}\n\nexport namespace Resultset {\n  export interface DataOptions {\n    forceClones?: boolean;\n    forceCloneMethod?: CloneMethod;\n    removeMeta?: boolean;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/resultset.ts","/**\n * @hidden\n */\nexport type ANY = any;\n\n/** Helper function for determining 'loki' abstract equality which is a little more abstract than ==\n *     aeqHelper(5, '5') === true\n *     aeqHelper(5.0, '5') === true\n *     aeqHelper(new Date(\"1/1/2011\"), new Date(\"1/1/2011\")) === true\n *     aeqHelper({a:1}, {z:4}) === true (all objects sorted equally)\n *     aeqHelper([1, 2, 3], [1, 3]) === false\n *     aeqHelper([1, 2, 3], [1, 2, 3]) === true\n *     aeqHelper(undefined, null) === true\n */\n\n/**\n * @hidden\n * @param {ANY} prop1\n * @param {ANY} prop2\n * @returns {boolean}\n */\nexport function aeqHelper(prop1: ANY, prop2: ANY) {\n  let cv1;\n  let cv2;\n  let t1;\n  let t2;\n\n  if (prop1 === prop2) return true;\n\n  // 'falsy' and Boolean handling\n  if (!prop1 || !prop2 || prop1 === true || prop2 === true || prop1 !== prop1 || prop2 !== prop2) {\n    // dates and NaN conditions (typed dates before serialization)\n    switch (prop1) {\n      case undefined:\n        t1 = 1;\n        break;\n      case null:\n        t1 = 1;\n        break;\n      case false:\n        t1 = 3;\n        break;\n      case true:\n        t1 = 4;\n        break;\n      case \"\":\n        t1 = 5;\n        break;\n      default:\n        t1 = (prop1 === prop1) ? 9 : 0;\n        break;\n    }\n\n    switch (prop2) {\n      case undefined:\n        t2 = 1;\n        break;\n      case null:\n        t2 = 1;\n        break;\n      case false:\n        t2 = 3;\n        break;\n      case true:\n        t2 = 4;\n        break;\n      case \"\":\n        t2 = 5;\n        break;\n      default:\n        t2 = (prop2 === prop2) ? 9 : 0;\n        break;\n    }\n\n    // one or both is edge case\n    if (t1 !== 9 || t2 !== 9) {\n      return (t1 === t2);\n    }\n  }\n\n  // Handle 'Number-like' comparisons\n  cv1 = Number(prop1);\n  cv2 = Number(prop2);\n\n  // if one or both are 'number-like'...\n  if (cv1 === cv1 || cv2 === cv2) {\n    return (cv1 === cv2);\n  }\n\n  // not strict equal nor less than nor gt so must be mixed types, convert to string and use that to compare\n  cv1 = prop1.toString();\n  cv2 = prop2.toString();\n\n  return (cv1 == cv2);\n}\n\n/** Helper function for determining 'less-than' conditions for ops, sorting, and binary indices.\n *     In the future we might want $lt and $gt ops to use their own functionality/helper.\n *     Since binary indices on a property might need to index [12, NaN, new Date(), Infinity], we\n *     need this function (as well as gtHelper) to always ensure one value is LT, GT, or EQ to another.\n * @hidden\n */\nexport function ltHelper(prop1: ANY, prop2: ANY, equal: boolean) {\n  let cv1;\n  let cv2;\n  let t1;\n  let t2;\n\n  // if one of the params is falsy or strictly true or not equal to itself\n  // 0, 0.0, \"\", NaN, null, undefined, not defined, false, true\n  if (!prop1 || !prop2 || prop1 === true || prop2 === true || prop1 !== prop1 || prop2 !== prop2) {\n    switch (prop1) {\n      case undefined:\n        t1 = 1;\n        break;\n      case null:\n        t1 = 1;\n        break;\n      case false:\n        t1 = 3;\n        break;\n      case true:\n        t1 = 4;\n        break;\n      case \"\":\n        t1 = 5;\n        break;\n      // if strict equal probably 0 so sort higher, otherwise probably NaN so sort lower than even null\n      default:\n        t1 = (prop1 === prop1) ? 9 : 0;\n        break;\n    }\n\n    switch (prop2) {\n      case undefined:\n        t2 = 1;\n        break;\n      case null:\n        t2 = 1;\n        break;\n      case false:\n        t2 = 3;\n        break;\n      case true:\n        t2 = 4;\n        break;\n      case \"\":\n        t2 = 5;\n        break;\n      default:\n        t2 = (prop2 === prop2) ? 9 : 0;\n        break;\n    }\n\n    // one or both is edge case\n    if (t1 !== 9 || t2 !== 9) {\n      return (t1 === t2) ? equal : (t1 < t2);\n    }\n  }\n\n  // if both are numbers (string encoded or not), compare as numbers\n  cv1 = Number(prop1);\n  cv2 = Number(prop2);\n\n  if (cv1 === cv1 && cv2 === cv2) {\n    if (cv1 < cv2) return true;\n    if (cv1 > cv2) return false;\n    return equal;\n  }\n\n  if (cv1 === cv1 && cv2 !== cv2) {\n    return true;\n  }\n\n  if (cv2 === cv2 && cv1 !== cv1) {\n    return false;\n  }\n\n  if (prop1 < prop2) return true;\n  if (prop1 > prop2) return false;\n  if (prop1 == prop2) return equal;\n\n  // not strict equal nor less than nor gt so must be mixed types, convert to string and use that to compare\n  cv1 = prop1.toString();\n  cv2 = prop2.toString();\n\n  if (cv1 < cv2) {\n    return true;\n  }\n\n  if (cv1 == cv2) {\n    return equal;\n  }\n\n  return false;\n}\n\n/**\n * @hidden\n * @param {ANY} prop1\n * @param {ANY} prop2\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function gtHelper(prop1: ANY, prop2: ANY, equal: boolean) {\n  let cv1;\n  let cv2;\n  let t1;\n  let t2;\n\n  // 'falsy' and Boolean handling\n  if (!prop1 || !prop2 || prop1 === true || prop2 === true || prop1 !== prop1 || prop2 !== prop2) {\n    switch (prop1) {\n      case undefined:\n        t1 = 1;\n        break;\n      case null:\n        t1 = 1;\n        break;\n      case false:\n        t1 = 3;\n        break;\n      case true:\n        t1 = 4;\n        break;\n      case \"\":\n        t1 = 5;\n        break;\n      // NaN 0\n      default:\n        t1 = (prop1 === prop1) ? 9 : 0;\n        break;\n    }\n\n    switch (prop2) {\n      case undefined:\n        t2 = 1;\n        break;\n      case null:\n        t2 = 1;\n        break;\n      case false:\n        t2 = 3;\n        break;\n      case true:\n        t2 = 4;\n        break;\n      case \"\":\n        t2 = 5;\n        break;\n      default:\n        t2 = (prop2 === prop2) ? 9 : 0;\n        break;\n    }\n\n    // one or both is edge case\n    if (t1 !== 9 || t2 !== 9) {\n      return (t1 === t2) ? equal : (t1 > t2);\n    }\n  }\n\n  // if both are numbers (string encoded or not), compare as numbers\n  cv1 = Number(prop1);\n  cv2 = Number(prop2);\n  if (cv1 === cv1 && cv2 === cv2) {\n    if (cv1 > cv2) return true;\n    if (cv1 < cv2) return false;\n    return equal;\n  }\n\n  if (cv1 === cv1 && cv2 !== cv2) {\n    return false;\n  }\n\n  if (cv2 === cv2 && cv1 !== cv1) {\n    return true;\n  }\n\n  if (prop1 > prop2) return true;\n  if (prop1 < prop2) return false;\n  if (prop1 == prop2) return equal;\n\n  // not strict equal nor less than nor gt so must be dates or mixed types\n  // convert to string and use that to compare\n  cv1 = prop1.toString();\n  cv2 = prop2.toString();\n\n  if (cv1 > cv2) {\n    return true;\n  }\n\n  if (cv1 == cv2) {\n    return equal;\n  }\n\n  return false;\n}\n\n/**\n * @hidden\n * @param {ANY} prop1\n * @param {ANY} prop2\n * @param {ANY} desc\n * @returns {number}\n */\nexport function sortHelper(prop1: ANY, prop2: ANY, desc: ANY) {\n  if (aeqHelper(prop1, prop2)) return 0;\n\n  if (ltHelper(prop1, prop2, false)) {\n    return (desc) ? (1) : (-1);\n  }\n\n  if (gtHelper(prop1, prop2, false)) {\n    return (desc) ? (-1) : (1);\n  }\n\n  // not lt, not gt so implied equality-- date compatible\n  return 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/helper.ts","function getGlobal(): any {\n  let glob;\n  (function (global) {\n    glob = global;\n  })(global !== undefined && global || this);\n  return glob;\n}\n\n\nfunction create(): void {\n  const global = getGlobal();\n  const sym = Symbol.for(\"LOKI\") as any;\n  if (global[sym] === undefined) {\n    global[sym] = {\n    };\n  }\n  return global[sym];\n}\n\n/**\n * @hidden\n */\nexport const PLUGINS = create();\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/common/plugin.ts","import {Loki} from \"./loki\";\nimport {Collection} from \"./collection\";\n\nexport {Loki, Collection};\n\nexport default {Loki};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/index.ts","import {LokiEventEmitter} from \"./event_emitter\";\nimport {Collection} from \"./collection\";\nimport {Doc, StorageAdapter} from \"../../common/types\";\nimport {PLUGINS} from \"../../common/plugin\";\n\nexport type ANY = any;\n\nfunction getENV() {\n  if (global !== undefined && (global[\"android\"] || global[\"NSObject\"])) {\n    return Loki.Environment.NATIVE_SCRIPT;\n  }\n\n  const isNode = global !== undefined && ({}).toString.call(global) === \"[object global]\";\n  if (isNode) {\n    if (global[\"window\"]) {\n      return Loki.Environment.NODE_JS; //node-webkit\n    } else {\n      return Loki.Environment.NODE_JS;\n    }\n  }\n\n  const isBrowser = window !== undefined && ({}).toString.call(window) === \"[object Window]\";\n  if (document !== undefined) {\n    if (document.URL.indexOf(\"http://\") === -1 && document.URL.indexOf(\"https://\") === -1) {\n      return Loki.Environment.CORDOVA;\n    }\n    return Loki.Environment.BROWSER;\n  }\n\n  if (!isBrowser) {\n    throw SyntaxError(\"Unknown environment...\");\n  }\n}\n\nexport class Loki extends LokiEventEmitter {\n\n  private filename: string;\n  private databaseVersion: number;\n  private engineVersion: number;\n\n\n  //private options: ANY;\n  private _collections: Collection[];\n  private _verbose: boolean;\n\n  private _env: Loki.Environment;\n\n  private _serializationMethod: Loki.SerializationMethod;\n  private _destructureDelimiter: string;\n  private _persistenceMethod: Loki.PersistenceMethod;\n  private _persistenceAdapter: StorageAdapter;\n\n  private _throttledSaves: boolean;\n  private _throttledSaveRunning: Promise<void>;\n  private _throttledSavePending: Promise<void>;\n\n  private _autosave: boolean;\n  private _autosaveInterval: number;\n  private _autosaveHandle: Function;\n\n\n  /**\n   * Constructs the main database class.\n   * @param {string} filename - name of the file to be saved to\n   * @param {object} [options={}] - options\n   * @param {Loki.Environment} [options.env=auto] - overrides environment detection\n   * @param {Loki.SerializationMethod} [options.serializationMethod=NORMAL] - the serialization method\n   * @param {string} [options.destructureDelimiter=\"$<\\n\"] - string delimiter used for destructured serialization\n   * @param {boolean} [options.verbose=false] - enable console output\n   */\n  constructor(filename = \"loki.db\", options: Loki.Options = {}) {\n    super();\n\n    this.filename = filename;\n    this._collections = [];\n\n    (\n      {\n        serializationMethod: this._serializationMethod = Loki.SerializationMethod.NORMAL,\n        destructureDelimiter: this._destructureDelimiter = \"$<\\n\",\n        verbose: this._verbose = false,\n        env: this._env = getENV()\n      } = options\n    );\n\n    // persist version of code which created the database to the database.\n    // could use for upgrade scenarios\n    this.databaseVersion = 1.5;\n    this.engineVersion = 1.5;\n\n    // autosave support (disabled by default)\n    this._autosave = false;\n    this._autosaveInterval = 5000;\n    this._autosaveHandle = null;\n    this._throttledSaves = true;\n\n    // currently keeping persistenceMethod and persistenceAdapter as loki level properties that\n    // will not or cannot be deserialized  You are required to configure persistence every time\n    // you instantiate a loki object (or use default environment detection) in order to load the database anyways.\n\n    // persistenceMethod could be 'fs', 'localStorage', or 'adapter'\n    // this is optional option param, otherwise environment detection will be used\n    // if user passes their own adapter we will force this method to 'adapter' later, so no need to pass method option.\n    this._persistenceMethod = null;\n\n    // retain reference to optional (non-serializable) persistenceAdapter 'instance'\n    this._persistenceAdapter = null;\n\n    // flags used to throttle saves\n    this._throttledSaveRunning = null;\n    this._throttledSavePending = null;\n\n    this.events = {\n      \"init\": [],\n      \"loaded\": [],\n      \"flushChanges\": [],\n      \"close\": [],\n      \"changes\": [],\n      \"warning\": []\n    };\n\n    this.on(\"init\", this.clearChanges);\n  }\n\n  /**\n   * configures options related to database persistence.\n   *\n   * @param {Loki.PersistenceOptions} [options={}] - options\n   * @param {adapter} [options.adapter=auto] - an instance of a loki persistence adapter\n   * @param {boolean} [options.autosave=false] - enables autosave\n   * @param {int} [options.autosaveInterval=5000] - time interval (in milliseconds) between saves (if dirty)\n   * @param {boolean} [options.autoload=false] - enables autoload on loki instantiation\n   * @param {object} options.inflate - options that are passed to loadDatabase if autoload enabled\n   * @param {boolean} [options.throttledSaves=true] - if true, it batches multiple calls to to saveDatabase reducing number of\n   *   disk I/O operations and guaranteeing proper serialization of the calls. Default value is true.\n   * @param {Loki.PersistenceMethod} options.persistenceMethod - a persistence method which should be used (FS_STORAGE, LOCAL_STORAGE...)\n   * @returns {Promise} a Promise that resolves after initialization and (if enabled) autoloading the database\n   */\n  initializePersistence(options: Loki.PersistenceOptions = {}) {\n    (\n      {\n        autosave: this._autosave = false,\n        autosaveInterval: this._autosaveInterval = 5000,\n        persistenceMethod: this._persistenceMethod,\n        // TODO\n        //inflate: this.options.inflate,\n        throttledSaves: this._throttledSaves = true,\n      } = options\n    );\n\n    const DEFAULT_PERSISTENCE = {\n      [Loki.Environment.NODE_JS]: [Loki.PersistenceMethod.FS_STORAGE],\n      [Loki.Environment.BROWSER]: [Loki.PersistenceMethod.LOCAL_STORAGE, Loki.PersistenceMethod.INDEXED_STORAGE],\n      [Loki.Environment.CORDOVA]: [Loki.PersistenceMethod.LOCAL_STORAGE, Loki.PersistenceMethod.INDEXED_STORAGE],\n      [Loki.Environment.MEMORY]: [Loki.PersistenceMethod.MEMORY_STORAGE]\n    };\n\n    const PERSISTENCE_METHODS = {\n      [Loki.PersistenceMethod.FS_STORAGE]: PLUGINS[\"LokiFSStorage\"],\n      [Loki.PersistenceMethod.LOCAL_STORAGE]: PLUGINS[\"LokiLocalStorage\"],\n      [Loki.PersistenceMethod.INDEXED_STORAGE]: PLUGINS[\"LokiIndexedStorage\"],\n      [Loki.PersistenceMethod.MEMORY_STORAGE]: PLUGINS[\"LokiMemoryStorage\"]\n    };\n\n    // process the options\n    if (this._persistenceMethod !== undefined) {\n      // check if the specified persistence method is known\n      if (typeof(PERSISTENCE_METHODS[this._persistenceMethod]) === \"function\") {\n        this._persistenceAdapter = new (PERSISTENCE_METHODS[this._persistenceMethod]);\n      } else {\n        throw Error(\"Unknown persistence method.\");\n      }\n    }\n\n    // if user passes adapter, set persistence mode to adapter and retain persistence adapter instance\n    if (options.adapter !== undefined) {\n      this._persistenceMethod = Loki.PersistenceMethod.ADAPTER;\n      this._persistenceAdapter = options.adapter;\n    }\n\n    // if by now there is no adapter specified by user nor derived from persistenceMethod: use sensible defaults\n    if (this._persistenceAdapter === null) {\n      let possiblePersistenceMethods = DEFAULT_PERSISTENCE[this._env];\n      if (possiblePersistenceMethods) {\n        for (let i = 0; i < possiblePersistenceMethods.length; i++) {\n          if (PERSISTENCE_METHODS[possiblePersistenceMethods[i]]) {\n            this._persistenceMethod = possiblePersistenceMethods[i];\n            this._persistenceAdapter = new (PERSISTENCE_METHODS[possiblePersistenceMethods[i]]);\n            break;\n          }\n        }\n      }\n    }\n\n    this.autosaveDisable();\n\n    // if they want to load database on loki instantiation, now is a good time to load... after adapter set and before possible autosave initiation\n    let loaded;\n    if (options.autoload) {\n      loaded = this.loadDatabase(options.inflate);\n    } else {\n      loaded = Promise.resolve();\n    }\n\n    return loaded.then(() => {\n      if (this._autosave) {\n        this.autosaveEnable();\n      }\n    });\n  }\n\n  /**\n   * Copies 'this' database into a new Loki instance. Object references are shared to make lightweight.\n   * @param {object} options - options\n   * @param {boolean} options.removeNonSerializable - nulls properties not safe for serialization.\n   */\n  copy(options: Loki.CopyOptions = {}) {\n    const databaseCopy = new Loki(this.filename, {env: this._env});\n\n    // currently inverting and letting loadJSONObject do most of the work\n    databaseCopy.loadJSONObject(this, {\n      retainDirtyFlags: true\n    });\n\n    // since our toJSON is not invoked for reference database adapters, this will let us mimic\n    if (options.removeNonSerializable) {\n      databaseCopy._autosaveHandle = null;\n      databaseCopy._persistenceAdapter = null;\n\n      for (let idx = 0; idx < databaseCopy._collections.length; idx++) {\n        databaseCopy._collections[idx].constraints = null;\n        databaseCopy._collections[idx].ttl = null;\n      }\n    }\n\n    return databaseCopy;\n  }\n\n  /**\n   * Adds a collection to the database.\n   * @param {string} name - name of collection to add\n   * @param {object} [options={}] - options to configure collection with.\n   * @param {array} [options.unique=[]] - array of property names to define unique constraints for\n   * @param {array} [options.exact=[]] - array of property names to define exact constraints for\n   * @param {array} [options.indices=[]] - array property names to define binary indexes for\n   * @param {boolean} [options.asyncListeners=false] - whether listeners are called asynchronously\n   * @param {boolean} [options.disableChangesApi=true] - set to false to enable Changes Api\n   * @param {boolean} [options.clone=false] - specify whether inserts and queries clone to/from user\n   * @param {string} [options.cloneMethod=CloneMethod.DEEP] - the clone method\n   * @param {int} options.ttlInterval - time interval for clearing out 'aged' documents; not set by default.\n   * @returns {Collection} a reference to the collection which was just added\n   */\n  addCollection<T extends object>(name: string, options: Collection.Options = {}) {\n    const collection = new Collection<T>(name, options);\n    this._collections.push(collection);\n\n    if (this._verbose) {\n      collection.console = console;\n    }\n    return collection as Collection<T>;\n  }\n\n  loadCollection(collection: Collection) {\n    if (!collection.name) {\n      throw new Error(\"Collection must have a name property to be loaded\");\n    }\n    this._collections.push(collection);\n  }\n\n  /**\n   * Retrieves reference to a collection by name.\n   * @param {string} collectionName - name of collection to look up\n   * @returns {Collection} Reference to collection in database by that name, or null if not found\n   */\n  getCollection<T extends object>(collectionName: string) {\n    let i;\n    const len = this._collections.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (this._collections[i].name === collectionName) {\n        return this._collections[i] as Collection<T>;\n      }\n    }\n\n    // no such collection\n    this.emit(\"warning\", \"collection \" + collectionName + \" not found\");\n    return null;\n  }\n\n  /**\n   * Renames an existing loki collection\n   * @param {string} oldName - name of collection to rename\n   * @param {string} newName - new name of collection\n   * @returns {Collection} reference to the newly renamed collection\n   */\n  renameCollection(oldName: string, newName: string) {\n    const c = this.getCollection(oldName);\n    if (c) {\n      c.name = newName;\n    }\n\n    return c;\n  }\n\n  listCollections() {\n    const colls = [];\n    for (let i = 0; i < this._collections.length; i++) {\n      colls.push({\n        name: this._collections[i].name,\n        count: this._collections[i].data.length\n      });\n    }\n    return colls;\n  }\n\n  /**\n   * Removes a collection from the database.\n   * @param {string} collectionName - name of collection to remove\n   */\n  removeCollection(collectionName: string) {\n    for (let i = 0; i < this._collections.length; i += 1) {\n      if (this._collections[i].name === collectionName) {\n        const tmpcol = new Collection(collectionName, {});\n        const curcol = this._collections[i];\n        for (const prop in curcol) {\n          if (curcol[prop] !== undefined && tmpcol[prop] !== undefined) {\n            curcol[prop] = tmpcol[prop];\n          }\n        }\n        this._collections.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  getName() {\n    return this.filename;\n  }\n\n  /**\n   * Serialize database to a string which can be loaded via {@link Loki#loadJSON}\n   *\n   * @returns {string} Stringified representation of the loki database.\n   */\n  serialize(options: Loki.SerializeOptions = {}) {\n    if (options.serializationMethod === undefined) {\n      options.serializationMethod = this._serializationMethod;\n    }\n\n    switch (options.serializationMethod) {\n      case Loki.SerializationMethod.NORMAL:\n        return JSON.stringify(this);\n      case Loki.SerializationMethod.PRETTY:\n        return JSON.stringify(this, null, 2);\n      case Loki.SerializationMethod.DESTRUCTURED:\n        return this.serializeDestructured(); // use default options\n      default:\n        return JSON.stringify(this);\n    }\n  }\n\n  // alias of serialize\n  toJSON() {\n    return {\n      _env: this._env,\n      _serializationMethod: this._serializationMethod,\n      _autosave: this._autosave,\n      _autosaveInterval: this._autosaveInterval,\n      _collections: this._collections,\n      databaseVersion: this.databaseVersion,\n      engineVersion: this.engineVersion,\n      filename: this.filename,\n      _persistenceAdapter: this._persistenceAdapter,\n      _persistenceMethod: this._persistenceMethod,\n      _throttledSaves: this._throttledSaves,\n      _verbose: this._verbose,\n    };\n  }\n\n  /**\n   * Database level destructured JSON serialization routine to allow alternate serialization methods.\n   * Internally, Loki supports destructuring via loki \"serializationMethod' option and\n   * the optional LokiPartitioningAdapter class. It is also available if you wish to do\n   * your own structured persistence or data exchange.\n   *\n   * @param {object} options - output format options for use externally to loki\n   * @param {boolean} [options.partitioned=false] - whether db and each collection are separate\n   * @param {int} options.partition - can be used to only output an individual collection or db (-1)\n   * @param {boolean} [options.delimited=true] - whether subitems are delimited or subarrays\n   * @param {string} options.delimiter - override default delimiter\n   *\n   * @returns {string|Array} A custom, restructured aggregation of independent serializations.\n   */\n  serializeDestructured(options: Loki.SerializeDestructuredOptions = {}): string | string[] {\n    if (options.partitioned === undefined) {\n      options.partitioned = false;\n    }\n\n    if (options.delimited === undefined) {\n      options.delimited = true;\n    }\n\n    if (options.delimiter === undefined) {\n      options.delimiter = this._destructureDelimiter;\n    }\n\n    // 'partitioned' along with 'partition' of 0 or greater is a request for single collection serialization\n    if (options.partitioned === true && options.partition !== undefined && options.partition >= 0) {\n      return this.serializeCollection({\n        delimited: options.delimited,\n        delimiter: options.delimiter,\n        collectionIndex: options.partition\n      });\n    }\n\n    // not just an individual collection, so we will need to serialize db container via shallow copy\n    let dbcopy = new Loki(this.filename);\n    dbcopy.loadJSONObject(this);\n\n    for (let idx = 0; idx < dbcopy._collections.length; idx++) {\n      dbcopy._collections[idx].data = [];\n    }\n\n    // if we -only- wanted the db container portion, return it now\n    if (options.partitioned === true && options.partition === -1) {\n      // since we are deconstructing, override serializationMethod to normal for here\n      return dbcopy.serialize({\n        serializationMethod: Loki.SerializationMethod.NORMAL\n      });\n    }\n\n    // at this point we must be deconstructing the entire database\n    // start by pushing db serialization into first array element\n    const reconstruct: string[] = [];\n    reconstruct.push(dbcopy.serialize({\n      serializationMethod: Loki.SerializationMethod.NORMAL\n    }) as string);\n\n    dbcopy = null;\n\n    // push collection data into subsequent elements\n    for (let idx = 0; idx < this._collections.length; idx++) {\n      let result = this.serializeCollection({\n        delimited: options.delimited,\n        delimiter: options.delimiter,\n        collectionIndex: idx\n      });\n\n      // NDA : Non-Delimited Array : one iterable concatenated array with empty string collection partitions\n      if (options.partitioned === false && options.delimited === false) {\n        if (!Array.isArray(result)) {\n          throw new Error(\"a nondelimited, non partitioned collection serialization did not return an expected array\");\n        }\n\n        // Array.concat would probably duplicate memory overhead for copying strings.\n        // Instead copy each individually, and clear old value after each copy.\n        // Hopefully this will allow g.c. to reduce memory pressure, if needed.\n        for (let sidx = 0; sidx < result.length; sidx++) {\n          reconstruct.push(result[sidx]);\n          result[sidx] = null;\n        }\n        reconstruct.push(\"\");\n      } else {\n        reconstruct.push(result as string);\n      }\n    }\n\n    // Reconstruct / present results according to four combinations : D, DA, NDA, NDAA\n    if (options.partitioned) {\n      // DA : Delimited Array of strings [0] db [1] collection [n] collection { partitioned: true, delimited: true }\n      // useful for simple future adaptations of existing persistence adapters to save collections separately\n      if (options.delimited) {\n        return reconstruct;\n      }\n      // NDAA : Non-Delimited Array with subArrays. db at [0] and collection subarrays at [n] { partitioned: true, delimited : false }\n      // This format might be the most versatile for 'rolling your own' partitioned sync or save.\n      // Memory overhead can be reduced by specifying a specific partition, but at this code path they did not, so its all.\n      else {\n        return reconstruct;\n      }\n    } else {\n      // D : one big Delimited string { partitioned: false, delimited : true }\n      // This is the method Loki will use internally if 'destructured'.\n      // Little memory overhead improvements but does not require multiple asynchronous adapter call scheduling\n      if (options.delimited) {\n        // indicate no more collections\n        reconstruct.push(\"\");\n\n        return reconstruct.join(options.delimiter);\n      }\n      // NDA : Non-Delimited Array : one iterable array with empty string collection partitions { partitioned: false, delimited: false }\n      // This format might be best candidate for custom synchronous syncs or saves\n      else {\n        // indicate no more collections\n        reconstruct.push(\"\");\n\n        return reconstruct;\n      }\n    }\n  }\n\n  /**\n   * Collection level utility method to serialize a collection in a 'destructured' format\n   *\n   * @param {object} options - used to determine output of method\n   * @param {int} options.delimited - whether to return single delimited string or an array\n   * @param {string} options.delimiter - (optional) if delimited, this is delimiter to use\n   * @param {int} options.collectionIndex -  specify which collection to serialize data for\n   *\n   * @returns {string|array} A custom, restructured aggregation of independent serializations for a single collection.\n   */\n  serializeCollection(options: ANY = {}) {\n    let doccount;\n    let docidx;\n    let resultlines = [];\n\n    if (options.delimited === undefined) {\n      options.delimited = true;\n    }\n\n    if (options.collectionIndex === undefined) {\n      throw new Error(\"serializeCollection called without 'collectionIndex' option\");\n    }\n\n    doccount = this._collections[options.collectionIndex].data.length;\n\n    resultlines = [];\n\n    for (docidx = 0; docidx < doccount; docidx++) {\n      resultlines.push(JSON.stringify(this._collections[options.collectionIndex].data[docidx]));\n    }\n\n    // D and DA\n    if (options.delimited) {\n      // indicate no more documents in collection (via empty delimited string)\n      resultlines.push(\"\");\n\n      return resultlines.join(options.delimiter);\n    } else {\n      // NDAA and NDA\n      return resultlines;\n    }\n  }\n\n  /**\n   * Database level destructured JSON deserialization routine to minimize memory overhead.\n   * Internally, Loki supports destructuring via loki \"serializationMethod' option and\n   * the optional LokiPartitioningAdapter class. It is also available if you wish to do\n   * your own structured persistence or data exchange.\n   *\n   * @param {string|array} destructuredSource - destructured json or array to deserialize from\n   * @param {object} options - source format options\n   * @param {boolean} [options.partitioned=false] - whether db and each collection are separate\n   * @param {int} options.partition - can be used to deserialize only a single partition\n   * @param {boolean} [options.delimited=true] - whether subitems are delimited or subarrays\n   * @param {string} options.delimiter - override default delimiter\n   *\n   * @returns {object|array} An object representation of the deserialized database, not yet applied to 'this' db or document array\n   */\n  deserializeDestructured(destructuredSource: ANY, options: Loki.SerializeDestructuredOptions = {}) {\n    let workarray = [];\n    let len;\n    let cdb;\n    let collIndex = 0;\n    let collCount;\n    let lineIndex = 1;\n    let done = false;\n    let currObject;\n\n    if (options.partitioned === undefined) {\n      options.partitioned = false;\n    }\n\n    if (options.delimited === undefined) {\n      options.delimited = true;\n    }\n\n    if (options.delimiter === undefined) {\n      options.delimiter = this._destructureDelimiter;\n    }\n\n    // Partitioned\n    // DA : Delimited Array of strings [0] db [1] collection [n] collection { partitioned: true, delimited: true }\n    // NDAA : Non-Delimited Array with subArrays. db at [0] and collection subarrays at [n] { partitioned: true, delimited : false }\n    // -or- single partition\n    if (options.partitioned) {\n      // handle single partition\n      if (options.partition !== undefined) {\n        // db only\n        if (options.partition === -1) {\n          cdb = JSON.parse(destructuredSource[0]);\n\n          return cdb;\n        }\n\n        // single collection, return doc array\n        return this.deserializeCollection(destructuredSource[options.partition + 1], options);\n      }\n\n      // Otherwise we are restoring an entire partitioned db\n      cdb = JSON.parse(destructuredSource[0]);\n      collCount = cdb._collections.length;\n      for (collIndex = 0; collIndex < collCount; collIndex++) {\n        // attach each collection docarray to container collection data, add 1 to collection array index since db is at 0\n        cdb._collections[collIndex].data = this.deserializeCollection(destructuredSource[collIndex + 1], options);\n      }\n\n      return cdb;\n    }\n\n    // Non-Partitioned\n    // D : one big Delimited string { partitioned: false, delimited : true }\n    // NDA : Non-Delimited Array : one iterable array with empty string collection partitions { partitioned: false, delimited: false }\n\n    // D\n    if (options.delimited) {\n      workarray = destructuredSource.split(options.delimiter);\n      destructuredSource = null; // lower memory pressure\n      len = workarray.length;\n\n      if (len === 0) {\n        return null;\n      }\n    }\n    // NDA\n    else {\n      workarray = destructuredSource;\n    }\n\n    // first line is database and collection shells\n    cdb = JSON.parse(workarray[0]);\n    collCount = cdb._collections.length;\n    workarray[0] = null;\n\n    while (!done) {\n      // empty string indicates either end of collection or end of file\n      if (workarray[lineIndex] === \"\") {\n        // if no more collections to load into, we are done\n        if (++collIndex > collCount) {\n          done = true;\n        }\n      } else {\n        currObject = JSON.parse(workarray[lineIndex]);\n        cdb._collections[collIndex].data.push(currObject);\n      }\n\n      // lower memory pressure and advance iterator\n      workarray[lineIndex++] = null;\n    }\n\n    return cdb;\n  }\n\n  /**\n   * Collection level utility function to deserializes a destructured collection.\n   *\n   * @param {string|string[]} destructuredSource - destructured representation of collection to inflate\n   * @param {object} options - used to describe format of destructuredSource input\n   * @param {int} [options.delimited=false] - whether source is delimited string or an array\n   * @param {string} options.delimiter - if delimited, this is delimiter to use (if other than default)\n   *\n   * @returns {Array} an array of documents to attach to collection.data.\n   */\n  deserializeCollection<T extends object>(destructuredSource: string | string[], options: Loki.DeserializeCollectionOptions = {}) {\n    if (options.partitioned === undefined) {\n      options.partitioned = false;\n    }\n\n    if (options.delimited === undefined) {\n      options.delimited = true;\n    }\n\n    if (options.delimiter === undefined) {\n      options.delimiter = this._destructureDelimiter;\n    }\n\n    let workarray = [];\n    if (options.delimited) {\n      workarray = (destructuredSource as string).split(options.delimiter);\n      workarray.pop();\n    } else {\n      workarray = destructuredSource as string[];\n    }\n\n    for (let idx = 0; idx < workarray.length; idx++) {\n      workarray[idx] = JSON.parse(workarray[idx]);\n    }\n    return workarray as any as Doc<T>;\n  }\n\n  /**\n   * Inflates a loki database from a serialized JSON string\n   *\n   * @param {string} serializedDb - a serialized loki database string\n   * @param {object} options - apply or override collection level settings\n   * @param {boolean} options.retainDirtyFlags - whether collection dirty flags will be preserved\n   */\n  loadJSON(serializedDb: string | string[], options?: ANY) {\n    let dbObject;\n    if (serializedDb.length === 0) {\n      dbObject = {};\n    } else {\n      // using option defined in instantiated db not what was in serialized db\n      switch (this._serializationMethod) {\n        case Loki.SerializationMethod.NORMAL:\n        case Loki.SerializationMethod.PRETTY:\n          dbObject = JSON.parse(serializedDb as string);\n          break;\n        case Loki.SerializationMethod.DESTRUCTURED:\n          dbObject = this.deserializeDestructured(serializedDb);\n          break;\n        default:\n          dbObject = JSON.parse(serializedDb as string);\n          break;\n      }\n    }\n    this.loadJSONObject(dbObject, options);\n  }\n\n  /**\n   * Inflates a loki database from a JS object\n   *\n   * @param {object} dbObject - a serialized loki database string\n   * @param {object} options - apply or override collection level settings\n   * @param {boolean} options.retainDirtyFlags - whether collection dirty flags will be preserved\n   */\n  loadJSONObject(dbObject: ANY, options: Collection.DeserializeOptions = {}) {\n    const len = dbObject._collections ? dbObject._collections.length : 0;\n\n    this.filename = dbObject.filename;\n    this._collections = [];\n\n    for (let i = 0; i < len; ++i) {\n      this._collections.push(Collection.fromJSONObject(dbObject._collections[i], options));\n    }\n  }\n\n  /**\n   * Emits the close event. In autosave scenarios, if the database is dirty, this will save and disable timer.\n   * Does not actually destroy the db.\n   *\n   * @returns {Promise} a Promise that resolves after closing the database succeeded\n   */\n  close() {\n    let saved;\n    // for autosave scenarios, we will let close perform final save (if dirty)\n    // For web use, you might call from window.onbeforeunload to shutdown database, saving pending changes\n    if (this._autosave) {\n      this.autosaveDisable();\n      // Check if collections are dirty.\n      for (let idx = 0; idx < this._collections.length; idx++) {\n        if (this._collections[idx].dirty) {\n          saved = this.saveDatabase();\n          break;\n        }\n      }\n    }\n\n    return Promise.resolve(saved).then(() => {\n      this.emit(\"close\");\n    });\n  }\n\n  /**-------------------------+\n   | Changes API               |\n   +--------------------------*/\n\n  /**\n   * The Changes API enables the tracking the changes occurred in the collections since the beginning of the session,\n   * so it's possible to create a differential dataset for synchronization purposes (possibly to a remote db)\n   */\n\n  /**\n   * (Changes API) : takes all the changes stored in each\n   * collection and creates a single array for the entire database. If an array of names\n   * of collections is passed then only the included collections will be tracked.\n   *\n   * @param {Array} [arrayOfCollectionNames=] - array of collection names. No arg means all collections are processed.\n   * @returns {Array} array of changes\n   * @see private method _createChange() in Collection\n   */\n  generateChangesNotification(arrayOfCollectionNames?: string[]) {\n    let changes: ANY[] = [];\n    const selectedCollections = arrayOfCollectionNames\n      || this._collections.map((coll: Collection) => coll.name);\n\n    this._collections.forEach((coll) => {\n      if (selectedCollections.indexOf(coll.name) !== -1) {\n        changes = changes.concat(coll.getChanges());\n      }\n    });\n    return changes;\n  }\n\n  /**\n   * (Changes API) - stringify changes for network transmission\n   * @returns {string} string representation of the changes\n   */\n  serializeChanges(collectionNamesArray?: string[]) {\n    return JSON.stringify(this.generateChangesNotification(collectionNamesArray));\n  }\n\n  /**\n   * (Changes API) : clears all the changes in all collections.\n   */\n  clearChanges() {\n    this._collections.forEach((coll) => {\n      if (coll.flushChanges) {\n        coll.flushChanges();\n      }\n    });\n  }\n\n  /**\n   * Wait for throttledSaves to complete and invoke your callback when drained or duration is met.\n   *\n   * @param {object} options - configuration options\n   * @param {boolean} [options.recursiveWait=true] - if after queue is drained, another save was kicked off, wait for it\n   * @param {boolean} [options.recursiveWaitLimit=false] - limit our recursive waiting to a duration\n   * @param {number} [options.recursiveWaitLimitDuration=2000] - cutoff in ms to stop recursively re-draining\n   * @param {Date} [options.started=now()] - the start time of the recursive wait duration\n   * @returns {Promise} a Promise that resolves when save queue is drained, it is passed a sucess parameter value\n   */\n  throttledSaveDrain(options: Loki.ThrottledDrainOptions = {}): Promise<void> {\n    const now = (new Date()).getTime();\n\n    if (!this._throttledSaves) {\n      return Promise.resolve();\n    }\n\n    if (options.recursiveWait === undefined) {\n      options.recursiveWait = true;\n    }\n    if (options.recursiveWaitLimit === undefined) {\n      options.recursiveWaitLimit = false;\n    }\n    if (options.recursiveWaitLimitDuration === undefined) {\n      options.recursiveWaitLimitDuration = 2000;\n    }\n    if (options.started === undefined) {\n      options.started = new Date();\n    }\n\n    // if save is pending\n    if (this._throttledSaves && this._throttledSaveRunning !== null) {\n      // if we want to wait until we are in a state where there are no pending saves at all\n      if (options.recursiveWait) {\n        // queue the following meta callback for when it completes\n        return Promise.resolve(Promise.all([this._throttledSaveRunning, this._throttledSavePending])).then(() => {\n          if (this._throttledSaveRunning !== null || this._throttledSavePending !== null) {\n            if (options.recursiveWaitLimit && (now - options.started.getTime() > options.recursiveWaitLimitDuration)) {\n              return Promise.reject({});\n            }\n            return this.throttledSaveDrain(options);\n          } else {\n            return Promise.resolve();\n          }\n        });\n      }\n      // just notify when current queue is depleted\n      else {\n        return Promise.resolve(this._throttledSaveRunning);\n      }\n    }\n    // no save pending, just callback\n    else {\n      return Promise.resolve();\n    }\n  }\n\n  /**\n   * Internal load logic, decoupled from throttling/contention logic\n   *\n   * @param {object} options - an object containing inflation options for each collection\n   * @returns {Promise} a Promise that resolves after the database is loaded\n   */\n  private _loadDatabase(options = {}) {\n    // the persistenceAdapter should be present if all is ok, but check to be sure.\n    if (this._persistenceAdapter === null) {\n      return Promise.reject(new Error(\"persistenceAdapter not configured\"));\n    }\n\n    return Promise.resolve(this._persistenceAdapter.loadDatabase(this.filename))\n      .then((dbString) => {\n        if (typeof (dbString) === \"string\") {\n          this.loadJSON(dbString, options);\n          this.emit(\"load\", this);\n        } else {\n          dbString = dbString as object;\n          // if adapter has returned an js object (other than null or error) attempt to load from JSON object\n          if (typeof (dbString) === \"object\" && dbString !== null && !(dbString instanceof Error)) {\n            this.loadJSONObject(dbString, options);\n            this.emit(\"load\", this);\n          } else {\n            if (dbString instanceof Error)\n              throw dbString;\n\n            throw new TypeError(\"The persistence adapter did not load a serialized DB string or object.\");\n          }\n        }\n      });\n  }\n\n  /**\n   * Handles manually loading from an adapter storage (such as fs-storage)\n   *    This method utilizes loki configuration options (if provided) to determine which\n   *    persistence method to use, or environment detection (if configuration was not provided).\n   *    To avoid contention with any throttledSaves, we will drain the save queue first.\n   *\n   * If you are configured with autosave, you do not need to call this method yourself.\n   *\n   * @param {object} [options={}] - if throttling saves and loads, this controls how we drain save queue before loading\n   * @param {boolean} [options.recursiveWait=true] wait recursively until no saves are queued\n   * @param {boolean} [options.recursiveWaitLimit=false] limit our recursive waiting to a duration\n   * @param {number} [options.recursiveWaitLimitDelay=2000] cutoff in ms to stop recursively re-draining\n   * @param {Date} [options.started=now()] - the start time of the recursive wait duration\n   * @returns {Promise} a Promise that resolves after the database is loaded\n   */\n  public loadDatabase(options: Loki.LoadDatabaseOptions = {}): Promise<void> {\n    // if throttling disabled, just call internal\n    if (!this._throttledSaves) {\n      return this._loadDatabase(options);\n    }\n\n    // try to drain any pending saves in the queue to lock it for loading\n    return this.throttledSaveDrain(options).then(() => {\n      // pause/throttle saving until loading is done\n      this._throttledSaveRunning = this._loadDatabase(options).then(() => {\n        // now that we are finished loading, if no saves were throttled, disable flag\n        this._throttledSaveRunning = null;\n      });\n      return this._throttledSaveRunning;\n    }, () => {\n      throw new Error(\"Unable to pause save throttling long enough to read database\");\n    });\n  }\n\n  private _saveDatabase() {\n    // the persistenceAdapter should be present if all is ok, but check to be sure.\n    if (this._persistenceAdapter === null) {\n      return Promise.reject(new Error(\"persistenceAdapter not configured\"));\n    }\n\n    let saved;\n\n    // check if the adapter is requesting (and supports) a 'reference' mode export\n    if (this._persistenceAdapter.mode === \"reference\" && typeof this._persistenceAdapter.exportDatabase === \"function\") {\n      // filename may seem redundant but loadDatabase will need to expect this same filename\n      saved = this._persistenceAdapter.exportDatabase(this.filename, this.copy({removeNonSerializable: true}));\n    }\n    // otherwise just pass the serialized database to adapter\n    else {\n      saved = this._persistenceAdapter.saveDatabase(this.filename, this.serialize() as string);\n    }\n\n    return Promise.resolve(saved).then(() => {\n      // Set all collection not dirty.\n      for (let idx = 0; idx < this._collections.length; idx++) {\n        this._collections[idx].dirty = false;\n      }\n      this.emit(\"save\");\n    });\n  }\n\n  /**\n   * Handles manually saving to an adapter storage (such as fs-storage)\n   *    This method utilizes loki configuration options (if provided) to determine which\n   *    persistence method to use, or environment detection (if configuration was not provided).\n   *\n   * If you are configured with autosave, you do not need to call this method yourself.\n   *\n   * @returns {Promise} a Promise that resolves after the database is persisted\n   */\n  saveDatabase() {\n    if (!this._throttledSaves) {\n      return this._saveDatabase();\n    }\n\n    // if the db save is currently running, a new promise for a next db save is created\n    // all calls to save db will get this new promise which will be processed right after\n    // the current db save is finished\n    if (this._throttledSaveRunning !== null && this._throttledSavePending === null) {\n      this._throttledSavePending = Promise.resolve(this._throttledSaveRunning).then(() => {\n        this._throttledSaveRunning = null;\n        this._throttledSavePending = null;\n        return this.saveDatabase();\n      });\n    }\n    if (this._throttledSavePending !== null) {\n      return this._throttledSavePending;\n    }\n    this._throttledSaveRunning = this._saveDatabase().then(() => {\n      this._throttledSaveRunning = null;\n    });\n\n    return this._throttledSaveRunning;\n  }\n\n  /**\n   * Handles deleting a database from the underlying storage adapter\n   *\n   * @returns {Promise} a Promise that resolves after the database is deleted\n   */\n  deleteDatabase() {\n    // the persistenceAdapter should be present if all is ok, but check to be sure.\n    if (this._persistenceAdapter === null) {\n      return Promise.reject(new Error(\"persistenceAdapter not configured\"));\n    }\n\n    return Promise.resolve(this._persistenceAdapter.deleteDatabase(this.filename));\n  }\n\n  /**\n   * Starts periodically saves to the underlying storage adapter.\n   */\n  autosaveEnable() {\n    if (this._autosaveHandle) {\n      return;\n    }\n\n    let running = true;\n\n    this._autosave = true;\n    this._autosaveHandle = () => {\n      running = false;\n      this._autosaveHandle = undefined;\n    };\n\n    setTimeout(() => {\n      if (running) {\n        this.saveDatabase().then(this.saveDatabase, this.saveDatabase);\n      }\n    }, this._autosaveInterval);\n  }\n\n  /**\n   * Stops the autosave interval timer.\n   */\n  autosaveDisable() {\n    this._autosave = false;\n\n    if (this._autosaveHandle) {\n      this._autosaveHandle();\n    }\n  }\n}\n\nexport namespace Loki {\n  export interface Options {\n    env?: Environment;\n    serializationMethod?: SerializationMethod;\n    destructureDelimiter?: string;\n    verbose?: boolean;\n  }\n\n  export interface PersistenceOptions {\n    adapter?: StorageAdapter;\n    autosave?: boolean;\n    autosaveInterval?: number;\n    autoload?: boolean;\n    throttledSaves?: boolean;\n    persistenceMethod?: Loki.PersistenceMethod;\n    inflate?: any;\n  }\n\n  export interface CopyOptions {\n    removeNonSerializable?: boolean;\n  }\n\n  export interface SerializeOptions {\n    serializationMethod?: SerializationMethod;\n  }\n\n  export interface SerializeDestructuredOptions {\n    partitioned?: boolean;\n    partition?: number;\n    delimited?: boolean;\n    delimiter?: string;\n  }\n\n  export interface DeserializeCollectionOptions {\n    partitioned?: boolean;\n    delimited?: boolean;\n    delimiter?: string;\n  }\n\n  export interface ThrottledDrainOptions {\n    recursiveWait?: boolean;\n    recursiveWaitLimit?: boolean;\n    recursiveWaitLimitDuration?: number;\n    started?: Date;\n  }\n\n  export type LoadDatabaseOptions = Collection.DeserializeOptions & ThrottledDrainOptions;\n\n  export enum SerializationMethod {\n    NORMAL,\n    PRETTY,\n    DESTRUCTURED,\n  }\n\n  export enum PersistenceMethod {\n    FS_STORAGE,\n    LOCAL_STORAGE,\n    INDEXED_STORAGE,\n    MEMORY_STORAGE,\n    ADAPTER,\n  }\n\n  export enum Environment {\n    NODE_JS,\n    NATIVE_SCRIPT,\n    BROWSER,\n    CORDOVA,\n    MEMORY,\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/loki.ts","import {Dict, Doc} from \"../../common/types\";\n\nexport class UniqueIndex {\n  // The property field to index.\n  private _field: number | string;\n  // The map with the indices rows of unique property fields.\n  private _keyMap: Dict<number>;\n\n  /**\n   * Constructs an unique index object.\n   * @param {number|string} propertyField - the property field to index\n   */\n  constructor(propertyField: number | string) {\n    this._field = propertyField;\n    this._keyMap = {};\n  }\n\n  /**\n   * Sets a document's unique index.\n   * @param {Doc} doc - the document\n   * @param {number} row - the data row of the document\n   */\n  public set(doc: Doc, row: number): void {\n    const fieldValue = doc[this._field];\n    if (fieldValue !== null && fieldValue !== undefined) {\n      if (this._keyMap[fieldValue] !== undefined) {\n        throw new Error(\"Duplicate key for property \" + this._field + \": \" + fieldValue);\n      } else {\n        this._keyMap[fieldValue] = row;\n      }\n    }\n  }\n\n  /**\n   * Returns the data row of an unique index.\n   * @param {number|string} index - the index\n   * @returns {number | string} - the row\n   */\n  public get(index: number | string): number {\n    return this._keyMap[index];\n  }\n\n  /**\n   * Updates a document's unique index.\n   * @param  {Object} doc - the document\n   * @param  {number} row - the data row of the document\n   */\n  public update(doc: Doc, row: number): void {\n    // Find and remove current keyMap for row.\n    const uniqueNames = Object.keys(this._keyMap);\n    for (let i = 0; i < uniqueNames.length; i++) {\n      if (row === this._keyMap[uniqueNames[i]]) {\n        delete this._keyMap[uniqueNames[i]];\n        break;\n      }\n    }\n    this.set(doc, row);\n  }\n\n  /**\n   * Removes an unique index.\n   * @param {number|string} index - the unique index\n   */\n  public remove(index: number | string): void {\n    if (this._keyMap[index] !== undefined) {\n      delete this._keyMap[index];\n    } else {\n      throw new Error(\"Key is not in unique index: \" + this._field);\n    }\n  }\n\n  /**\n   * Clears all unique indexes.\n   */\n  public clear(): void {\n    this._keyMap = {};\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/unique_index.ts","import {LokiEventEmitter} from \"./event_emitter\";\nimport {Resultset} from \"./resultset\";\nimport {Collection} from \"./collection\";\nimport {Doc, Filter} from \"../../common/types\";\nimport {ScoreResult} from \"../../full-text-search/src/scorer\";\n\nexport type ANY = any;\n\n/**\n * DynamicView class is a versatile 'live' view class which can have filters and sorts applied.\n *    Collection.addDynamicView(name) instantiates this DynamicView object and notifies it\n *    whenever documents are add/updated/removed so it can remain up-to-date. (chainable)\n *\n * @example\n * let mydv = mycollection.addDynamicView('test');  // default is non-persistent\n * mydv.applyFind({ 'doors' : 4 });\n * mydv.applyWhere(function(obj) { return obj.name === 'Toyota'; });\n * let results = mydv.data();\n *\n * @extends LokiEventEmitter\n\n * @see {@link Collection#addDynamicView} to construct instances of DynamicView\n */\nexport class DynamicView<E extends object = object> extends LokiEventEmitter {\n\n  private _collection: Collection<E>;\n  private _persistent: boolean;\n  private _sortPriority: DynamicView.SortPriority;\n  private _minRebuildInterval: number;\n  public name: string;\n  private _rebuildPending: boolean;\n\n  private _resultset: Resultset<E>;\n  private _resultdata: Doc<E>[];\n  private _resultsdirty: boolean;\n\n  private _cachedresultset: Resultset<E>;\n\n  private _filterPipeline: Filter<E>[];\n\n\n  private _sortFunction: (lhs: E, rhs: E) => number;\n  private _sortCriteria: (string | [string, boolean])[];\n  private _sortByScoring: boolean;\n  private _sortDirty: boolean;\n\n  /**\n   * Constructor.\n   * @param {Collection} collection - a reference to the collection to work agains\n   * @param {string} name - the name of this dynamic view\n   * @param {object} options - the options\n   * @param {boolean} [options.persistent=false] - indicates if view is to main internal results array in 'resultdata'\n   * @param {string} [options.sortPriority=SortPriority.PASSIVE] - the sort priority\n   * @param {number} [options.minRebuildInterval=1] - minimum rebuild interval (need clarification to docs here)\n   */\n  constructor(collection: Collection<E>, name: string, options: DynamicView.Options = {}) {\n    super();\n    (\n      {\n        persistent: this._persistent = false,\n        sortPriority: this._sortPriority = DynamicView.SortPriority.PASSIVE,\n        minRebuildInterval: this._minRebuildInterval = 1\n      } = options\n    );\n\n    this._collection = collection;\n    this.name = name;\n    this._rebuildPending = false;\n\n    // 'passive' will defer the sort phase until they call data(). (most efficient overall)\n    // 'active' will sort async whenever next idle. (prioritizes read speeds)\n    // sortPriority: this._sortPriority = DynamicView.SortPriority.PASSIVE,\n\n    this._resultset = new Resultset(collection);\n    this._resultdata = [];\n    this._resultsdirty = false;\n\n    this._cachedresultset = null;\n\n    // keep ordered filter pipeline\n    this._filterPipeline = [];\n\n    // sorting member variables\n    // we only support one active search, applied using applySort() or applySimpleSort()\n    this._sortFunction = null;\n    this._sortCriteria = null;\n    this._sortByScoring = null;\n    this._sortDirty = false;\n\n    // for now just have 1 event for when we finally rebuilt lazy view\n    // once we refactor transactions, i will tie in certain transactional events\n\n    this.events = {\n      \"rebuild\": []\n    };\n  }\n\n  /**\n   * Internally used immediately after deserialization (loading)\n   *    This will clear out and reapply filterPipeline ops, recreating the view.\n   *    Since where filters do not persist correctly, this method allows\n   *    restoring the view to state where user can re-apply those where filters.\n   *\n   * @param removeWhereFilters\n   * @returns {DynamicView} This dynamic view for further chained ops.\n   * @fires DynamicView.rebuild\n   */\n  _rematerialize({removeWhereFilters = false}): DynamicView<E> {\n    let fpl;\n    let fpi;\n    let idx;\n\n    this._resultdata = [];\n    this._resultsdirty = true;\n    this._resultset = new Resultset(this._collection);\n\n    if (this._sortFunction || this._sortCriteria || this._sortByScoring !== null) {\n      this._sortDirty = true;\n    }\n\n    if (removeWhereFilters) {\n      // for each view see if it had any where filters applied... since they don't\n      // serialize those functions lets remove those invalid filters\n      fpl = this._filterPipeline.length;\n      fpi = fpl;\n      while (fpi--) {\n        if (this._filterPipeline[fpi].type === \"where\") {\n          if (fpi !== this._filterPipeline.length - 1) {\n            this._filterPipeline[fpi] = this._filterPipeline[this._filterPipeline.length - 1];\n          }\n          this._filterPipeline.length--;\n        }\n      }\n    }\n\n    // back up old filter pipeline, clear filter pipeline, and reapply pipeline ops\n    const ofp = this._filterPipeline;\n    this._filterPipeline = [];\n\n    // now re-apply 'find' filterPipeline ops\n    fpl = ofp.length;\n    for (idx = 0; idx < fpl; idx++) {\n      this.applyFind(ofp[idx].val);\n    }\n\n    // during creation of unit tests, i will remove this forced refresh and leave lazy\n    this.data();\n\n    // emit rebuild event in case user wants to be notified\n    this.emit(\"rebuild\", this);\n\n    return this;\n  }\n\n  /**\n   * Makes a copy of the internal resultset for branched queries.\n   * Unlike this dynamic view, the branched resultset will not be 'live' updated,\n   * so your branched query should be immediately resolved and not held for future evaluation.\n   *\n   * @param {(string|array=)} transform - Optional name of collection transform, or an array of transform steps\n   * @param {object} parameters - optional parameters (if optional transform requires them)\n   * @returns {Resultset} A copy of the internal resultset for branched queries.\n   */\n  branchResultset(transform: string | any[], parameters?: object): Resultset<E> {\n    const rs = this._resultset.branch();\n    if (transform === undefined) {\n      return rs;\n    }\n    return rs.transform(transform, parameters);\n  }\n\n  /**\n   * toJSON() - Override of toJSON to avoid circular references\n   *\n   */\n  toJSON() {\n    return {\n      name: this.name,\n      _persistent: this._persistent,\n      _sortPriority: this._sortPriority,\n      _minRebuildInterval: this._minRebuildInterval,\n      _resultset: this._resultset,\n      _resultsdirty: true,\n      _filterPipeline: this._filterPipeline,\n      _sortCriteria: this._sortCriteria,\n      _sortByScoring: this._sortByScoring,\n      _sortDirty: this._sortDirty,\n    };\n  }\n\n  static fromJSONObject(collection: ANY, obj: ANY): DynamicView {\n    let dv = new DynamicView(collection, obj.name, obj.options);\n    dv._resultsdirty = obj._resultsdirty;\n    dv._filterPipeline = obj._filterPipeline;\n    dv._resultdata = [];\n\n    dv._sortCriteria = obj._sortCriteria;\n    dv._sortByScoring = obj._sortByScoring;\n    dv._sortDirty = obj._sortDirty;\n    dv._resultset.filteredrows = obj._resultset.filteredrows;\n    dv._resultset.filterInitialized = obj._resultset.filterInitialized;\n    dv._rematerialize({\n      removeWhereFilters: true\n    });\n    return dv;\n  }\n\n  /**\n   * Used to clear pipeline and reset dynamic view to initial state.\n   *     Existing options should be retained.\n   * @param {boolean} queueSortPhase - (default: false) if true we will async rebuild view (maybe set default to true in future?)\n   */\n  public removeFilters({queueSortPhase = false} = {}): void {\n    this._rebuildPending = false;\n    this._resultset.reset();\n    this._resultdata = [];\n    this._resultsdirty = true;\n\n    this._cachedresultset = null;\n\n    // keep ordered filter pipeline\n    this._filterPipeline = [];\n\n    // sorting member variables\n    // we only support one active search, applied using applySort() or applySimpleSort()\n    this._sortFunction = null;\n    this._sortCriteria = null;\n    this._sortByScoring = null;\n    this._sortDirty = false;\n\n    if (queueSortPhase === true) {\n      this._queueSortPhase();\n    }\n  }\n\n  /**\n   * Used to apply a sort to the dynamic view\n   * @example\n   * dv.applySort(function(obj1, obj2) {\n\t *   if (obj1.name === obj2.name) return 0;\n\t *   if (obj1.name > obj2.name) return 1;\n\t *   if (obj1.name < obj2.name) return -1;\n\t * });\n   *\n   * @param {function} comparefun - a javascript compare function used for sorting\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public applySort(comparefun: (lhs: E, rhs: E) => number): DynamicView<E> {\n    this._sortFunction = comparefun;\n    this._sortCriteria = null;\n    this._sortByScoring = null;\n    this._queueSortPhase();\n    return this;\n  }\n\n  /**\n   * Used to specify a property used for view translation.\n   * @example\n   * dv.applySimpleSort(\"name\");\n   *\n   * @param {string} propname - Name of property by which to sort.\n   * @param {boolean} isdesc - (Optional) If true, the sort will be in descending order.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public applySimpleSort(propname: string, isdesc?: boolean): DynamicView<E> {\n    this._sortCriteria = [\n      [propname, isdesc || false]\n    ];\n    this._sortFunction = null;\n    this._sortByScoring = null;\n    this._queueSortPhase();\n    return this;\n  }\n\n  /**\n   * Allows sorting a resultset based on multiple columns.\n   * @example\n   * // to sort by age and then name (both ascending)\n   * dv.applySortCriteria(['age', 'name']);\n   * // to sort by age (ascending) and then by name (descending)\n   * dv.applySortCriteria(['age', ['name', true]);\n   * // to sort by age (descending) and then by name (descending)\n   * dv.applySortCriteria(['age', true], ['name', true]);\n   *\n   * @param {Array} criteria - array of property names or subarray of [propertyname, isdesc] used evaluate sort order\n   * @returns {DynamicView} Reference to this DynamicView, sorted, for future chain operations.\n   */\n  public applySortCriteria(criteria: (string | [string, boolean])[]): DynamicView<E> {\n    this._sortCriteria = criteria;\n    this._sortFunction = null;\n    this._sortByScoring = null;\n    this._queueSortPhase();\n    return this;\n  }\n\n  /**\n   * Used to apply a sort by the latest full-text-search scoring.\n   * @param {boolean} [ascending=false] - sort ascending\n   */\n  public applySortByScoring(ascending = false): DynamicView<E> {\n    this._sortFunction = null;\n    this._sortCriteria = null;\n    this._sortByScoring = ascending;\n    this._queueSortPhase();\n    return this;\n  }\n\n  /**\n   * Returns the scoring of the last full-text-search.\n   * @returns {ScoreResult}\n   */\n  public getScoring(): ScoreResult {\n    return this._resultset.getScoring();\n  }\n\n  /**\n   * Marks the beginning of a transaction.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public startTransaction(): DynamicView<E> {\n    this._cachedresultset = this._resultset.copy();\n    return this;\n  }\n\n  /**\n   * Commits a transaction.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public commit(): DynamicView<E> {\n    this._cachedresultset = null;\n    return this;\n  }\n\n  /**\n   * Rolls back a transaction.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public rollback(): DynamicView<E> {\n    this._resultset = this._cachedresultset;\n\n    if (this._persistent) {\n      // for now just rebuild the persistent dynamic view data in this worst case scenario\n      // (a persistent view utilizing transactions which get rolled back), we already know the filter so not too bad.\n      this._resultdata = this._resultset.data();\n\n      this.emit(\"rebuild\", this);\n    }\n    return this;\n  }\n\n  /**\n   * Find the index of a filter in the pipeline, by that filter's ID.\n   *\n   * @param {(string|number)} uid - The unique ID of the filter.\n   * @returns {number}: index of the referenced filter in the pipeline; -1 if not found.\n   */\n  private _indexOfFilterWithId(uid: string | number): number {\n    if (typeof uid === \"string\" || typeof uid === \"number\") {\n      for (let idx = 0, len = this._filterPipeline.length; idx < len; idx += 1) {\n        if (uid === this._filterPipeline[idx].uid) {\n          return idx;\n        }\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Add the filter object to the end of view's filter pipeline and apply the filter to the resultset.\n   *\n   * @param {object} filter - The filter object. Refer to applyFilter() for extra details.\n   */\n  private _addFilter(filter: Filter<E>): void {\n    this._filterPipeline.push(filter);\n    this._resultset[filter.type](filter.val);\n  }\n\n  /**\n   * Reapply all the filters in the current pipeline.\n   *\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public reapplyFilters(): DynamicView<E> {\n    this._resultset.reset();\n\n    this._cachedresultset = null;\n    if (this._persistent) {\n      this._resultdata = [];\n      this._resultsdirty = true;\n    }\n\n    const filters = this._filterPipeline;\n    this._filterPipeline = [];\n\n    for (let idx = 0, len = filters.length; idx < len; idx += 1) {\n      this._addFilter(filters[idx]);\n    }\n\n    if (this._sortFunction || this._sortCriteria || this._sortByScoring !== null) {\n      this._queueSortPhase();\n    } else {\n      this._queueRebuildEvent();\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds or updates a filter in the DynamicView filter pipeline\n   *\n   * @param {object} filter - A filter object to add to the pipeline.\n   *    The object is in the format { 'type': filter_type, 'val', filter_param, 'uid', optional_filter_id }\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public applyFilter(filter: Filter<E>): DynamicView<E> {\n    const idx = this._indexOfFilterWithId(filter.uid);\n    if (idx >= 0) {\n      this._filterPipeline[idx] = filter;\n      return this.reapplyFilters();\n    }\n\n    this._cachedresultset = null;\n    if (this._persistent) {\n      this._resultdata = [];\n      this._resultsdirty = true;\n    }\n\n    this._addFilter(filter);\n\n    if (this._sortFunction || this._sortCriteria || this._sortByScoring !== null) {\n      this._queueSortPhase();\n    } else {\n      this._queueRebuildEvent();\n    }\n    return this;\n  }\n\n  /**\n   * applyFind() - Adds or updates a mongo-style query option in the DynamicView filter pipeline\n   *\n   * @param {object} query - A mongo-style query object to apply to pipeline\n   * @param {(string|number)} uid - Optional: The unique ID of this filter, to reference it in the future.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public applyFind(query: object, uid: string | number = \"\"): DynamicView<E> {\n    this.applyFilter({\n      type: \"find\",\n      val: query,\n      uid\n    });\n    return this;\n  }\n\n  /**\n   * applyWhere() - Adds or updates a javascript filter function in the DynamicView filter pipeline\n   *\n   * @param {function} fun - A javascript filter function to apply to pipeline\n   * @param {(string|number)} uid - Optional: The unique ID of this filter, to reference it in the future.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public applyWhere(fun: (obj: E) => boolean, uid?: string | number): DynamicView<E> {\n    this.applyFilter({\n      type: \"where\",\n      val: fun,\n      uid\n    });\n    return this;\n  }\n\n  /**\n   * removeFilter() - Remove the specified filter from the DynamicView filter pipeline\n   *\n   * @param {(string|number)} uid - The unique ID of the filter to be removed.\n   * @returns {DynamicView} this DynamicView object, for further chain ops.\n   */\n  public removeFilter(uid: string | number): DynamicView<E> {\n    const idx = this._indexOfFilterWithId(uid);\n    if (idx < 0) {\n      throw new Error(\"Dynamic view does not contain a filter with ID: \" + uid);\n    }\n\n    this._filterPipeline.splice(idx, 1);\n    this.reapplyFilters();\n    return this;\n  }\n\n  /**\n   * Returns the number of documents representing the current DynamicView contents.\n   * @returns {number} The number of documents representing the current DynamicView contents.\n   */\n  public count(): number {\n    // in order to be accurate we will pay the minimum cost (and not alter dv state management)\n    // recurring resultset data resolutions should know internally its already up to date.\n    // for persistent data this will not update resultdata nor fire rebuild event.\n    if (this._resultsdirty) {\n      this._resultdata = this._resultset.data();\n    }\n\n    return this._resultset.count();\n  }\n\n  /**\n   * Resolves and pending filtering and sorting, then returns document array as result.\n   *\n   * @param {object} options - optional parameters to pass to resultset.data() if non-persistent\n   * @param {boolean} options.forceClones - Allows forcing the return of cloned objects even when\n   *        the collection is not configured for clone object.\n   * @param {string} options.forceCloneMethod - Allows overriding the default or collection specified cloning method.\n   *        Possible values include 'parse-stringify', 'jquery-extend-deep', 'shallow', 'shallow-assign'\n   * @param {boolean} options.removeMeta - Will force clones and strip $loki and meta properties from documents\n   *\n   * @returns {Array} An array of documents representing the current DynamicView contents.\n   */\n  data(options: object = {}): Doc<E>[] {\n    // using final sort phase as 'catch all' for a few use cases which require full rebuild\n    if (this._sortDirty || this._resultsdirty) {\n      this._performSortPhase({\n        suppressRebuildEvent: true\n      });\n    }\n    return (this._persistent) ? (this._resultdata) : (this._resultset.data(options));\n  }\n\n  /**\n   * When the view is not sorted we may still wish to be notified of rebuild events.\n   * This event will throttle and queue a single rebuild event when batches of updates affect the view.\n   */\n  private _queueRebuildEvent(): void {\n    if (this._rebuildPending) {\n      return;\n    }\n    this._rebuildPending = true;\n\n    setTimeout(() => {\n      if (this._rebuildPending) {\n        this._rebuildPending = false;\n        this.emit(\"rebuild\", this);\n      }\n    }, this._minRebuildInterval);\n  }\n\n  /**\n   * If the view is sorted we will throttle sorting to either :\n   *    (1) passive - when the user calls data(), or\n   *    (2) active - once they stop updating and yield js thread control\n   */\n  private _queueSortPhase(): void {\n    // already queued? exit without queuing again\n    if (this._sortDirty) {\n      return;\n    }\n    this._sortDirty = true;\n\n    if (this._sortPriority === DynamicView.SortPriority.ACTIVE) {\n      // active sorting... once they are done and yield js thread, run async performSortPhase()\n      setTimeout(() => {\n        this._performSortPhase();\n      }, this._minRebuildInterval);\n    } else {\n      // must be passive sorting... since not calling performSortPhase (until data call), lets use queueRebuildEvent to\n      // potentially notify user that data has changed.\n      this._queueRebuildEvent();\n    }\n  }\n\n  /**\n   * Invoked synchronously or asynchronously to perform final sort phase (if needed)\n   */\n  private _performSortPhase(options: { suppressRebuildEvent?: boolean } = {}): void {\n    // async call to this may have been pre-empted by synchronous call to data before async could fire\n    if (!this._sortDirty && !this._resultsdirty) {\n      return;\n    }\n\n    if (this._sortDirty) {\n      if (this._sortFunction) {\n        this._resultset.sort(this._sortFunction);\n      } else if (this._sortCriteria) {\n        this._resultset.compoundsort(this._sortCriteria);\n      } else if (this._sortByScoring !== null) {\n        this._resultset.sortByScoring(this._sortByScoring);\n      }\n\n      this._sortDirty = false;\n    }\n\n    if (this._persistent) {\n      // persistent view, rebuild local resultdata array\n      this._resultdata = this._resultset.data();\n      this._resultsdirty = false;\n    }\n\n    if (!options.suppressRebuildEvent) {\n      this.emit(\"rebuild\", this);\n    }\n  }\n\n  /**\n   * (Re)evaluating document inclusion.\n   *    Called by : collection.insert() and collection.update().\n   *\n   * @param {int} objIndex - index of document to (re)run through filter pipeline.\n   * @param {boolean} isNew - true if the document was just added to the collection.\n   */\n  _evaluateDocument(objIndex: number, isNew: boolean) {\n    // if no filter applied yet, the result 'set' should remain 'everything'\n    if (!this._resultset.filterInitialized) {\n      if (this._persistent) {\n        this._resultdata = this._resultset.data();\n      }\n      // need to re-sort to sort new document\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n      return;\n    }\n\n    const ofr = this._resultset.filteredrows;\n    const oldPos = (isNew) ? (-1) : (ofr.indexOf(+objIndex));\n    const oldlen = ofr.length;\n\n    // creating a 1-element resultset to run filter chain ops on to see if that doc passes filters;\n    // mostly efficient algorithm, slight stack overhead price (this function is called on inserts and updates)\n    const evalResultset = new Resultset(this._collection);\n    evalResultset.filteredrows = [objIndex];\n    evalResultset.filterInitialized = true;\n    let filter;\n    for (let idx = 0, len = this._filterPipeline.length; idx < len; idx++) {\n      filter = this._filterPipeline[idx];\n      evalResultset[filter.type](filter.val);\n    }\n\n    // not a true position, but -1 if not pass our filter(s), 0 if passed filter(s)\n    const newPos = (evalResultset.filteredrows.length === 0) ? -1 : 0;\n\n    // wasn't in old, shouldn't be now... do nothing\n    if (oldPos === -1 && newPos === -1) return;\n\n    // wasn't in resultset, should be now... add\n    if (oldPos === -1 && newPos !== -1) {\n      ofr.push(objIndex);\n\n      if (this._persistent) {\n        this._resultdata.push(this._collection.data[objIndex]);\n      }\n\n      // need to re-sort to sort new document\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n\n      return;\n    }\n\n    // was in resultset, shouldn't be now... delete\n    if (oldPos !== -1 && newPos === -1) {\n      if (oldPos < oldlen - 1) {\n        ofr.splice(oldPos, 1);\n\n        if (this._persistent) {\n          this._resultdata.splice(oldPos, 1);\n        }\n      } else {\n        ofr.length = oldlen - 1;\n\n        if (this._persistent) {\n          this._resultdata.length = oldlen - 1;\n        }\n      }\n\n      // in case changes to data altered a sort column\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n      return;\n    }\n\n    // was in resultset, should still be now... (update persistent only?)\n    if (oldPos !== -1 && newPos !== -1) {\n      if (this._persistent) {\n        // in case document changed, replace persistent view data with the latest collection.data document\n        this._resultdata[oldPos] = this._collection.data[objIndex];\n      }\n\n      // in case changes to data altered a sort column\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n    }\n  }\n\n  /**\n   * internal function called on collection.delete()\n   */\n  _removeDocument(objIndex: number) {\n    // if no filter applied yet, the result 'set' should remain 'everything'\n    if (!this._resultset.filterInitialized) {\n      if (this._persistent) {\n        this._resultdata = this._resultset.data();\n      }\n      // in case changes to data altered a sort column\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n      return;\n    }\n\n    const ofr = this._resultset.filteredrows;\n    const oldPos = ofr.indexOf(+objIndex);\n    let oldlen = ofr.length;\n    let idx;\n\n    if (oldPos !== -1) {\n      // if not last row in resultdata, swap last to hole and truncate last row\n      if (oldPos < oldlen - 1) {\n        ofr[oldPos] = ofr[oldlen - 1];\n        ofr.length = oldlen - 1;\n\n        if (this._persistent) {\n          this._resultdata[oldPos] = this._resultdata[oldlen - 1];\n          this._resultdata.length = oldlen - 1;\n        }\n      }\n      // last row, so just truncate last row\n      else {\n        ofr.length = oldlen - 1;\n\n        if (this._persistent) {\n          this._resultdata.length = oldlen - 1;\n        }\n      }\n\n      // in case changes to data altered a sort column\n      if (this._sortFunction || this._sortCriteria) {\n        this._queueSortPhase();\n      } else {\n        this._queueRebuildEvent();\n      }\n    }\n\n    // since we are using filteredrows to store data array positions\n    // if they remove a document (whether in our view or not),\n    // we need to adjust array positions -1 for all document array references after that position\n    oldlen = ofr.length;\n    for (idx = 0; idx < oldlen; idx++) {\n      if (ofr[idx] > objIndex) {\n        ofr[idx]--;\n      }\n    }\n  }\n\n  /**\n   * Data transformation via user supplied functions\n   *\n   * @param {function} mapFunction - this function accepts a single document for you to transform and return\n   * @param {function} reduceFunction - this function accepts many (array of map outputs) and returns single value\n   * @returns The output of your reduceFunction\n   */\n  public mapReduce<T, U>(mapFunction: (item: E, index: number, array: E[]) => T, reduceFunction: (array: T[]) => U): U {\n    try {\n      return reduceFunction(this.data().map(mapFunction));\n    } catch (err) {\n      throw err;\n    }\n  }\n}\n\nexport namespace DynamicView {\n  export interface Options {\n    persistent?: boolean;\n    sortPriority?: SortPriority;\n    minRebuildInterval?: number;\n  }\n\n  export enum SortPriority {\n    PASSIVE, // sorts performed on call to data\n    ACTIVE,  // or right after updates\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--0!./packages/loki/src/dynamic_view.ts"],"sourceRoot":""}