{"version":3,"sources":["webpack://@lokidb/full-text-search/webpack/universalModuleDefinition","webpack://@lokidb/full-text-search/webpack/bootstrap","webpack://@lokidb/full-text-search/./packages/common/plugin.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/analyzer/tokenizer.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/analyzer/token_filter.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/analyzer/analyzer.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/inverted_index.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/scorer.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/run_automaton.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/automaton.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/long.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/parametric_description.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/lev1t_parametric_description.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/lev2t_parametric_description.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/fuzzy/levenshtein_automata.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/index_searcher.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/full_text_search.ts","webpack://@lokidb/full-text-search/./packages/full-text-search/src/index.ts","webpack://@lokidb/full-text-search/(webpack)/buildin/global.js"],"names":[],"mappings":"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,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC;IACnI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU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UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACnI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACpI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACrI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAA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UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;IACtI,IAAI,IAAI,CAAC,UA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","file":"lokidb.full-text-search.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@lokidb/full-text-search\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@lokidb/full-text-search\"] = factory();\n\telse\n\t\troot[\"@lokidb/full-text-search\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function getGlobal(): any {\n  let glob;\n  (function (global) {\n    glob = global;\n  })(global !== undefined && global || this);\n  return glob;\n}\n\n\nfunction create(): void {\n  const global = getGlobal();\n  const sym = Symbol.for(\"LOKI\") as any;\n  if (global[sym] === undefined) {\n    global[sym] = {\n    };\n  }\n  return global[sym];\n}\n\n/**\n * @hidden\n */\nexport const PLUGINS = create();\n","/**\n * A tokenizer splits a string into individual tokens.\n */\nexport type Tokenizer = (value: string) => string[];\n\n/**\n * Splits a string at whitespace characters into tokens.\n * @param {string} value - the string\n * @returns {string[]} - the tokens\n */\nexport function whitespaceTokenizer(value: string): string[] {\n  return value.split(/[\\s]+/);\n}\n\n","/**\n * A token filter takes tokens from a tokenizer and modify, delete or add tokens.\n */\nexport type TokenFilter = (value: string, index: number, array: string[]) => string;\n\n/**\n * Converts a token to lowercase.\n * @param {string} token - the token\n * @returns {string} - the lowercased token\n */\nexport function lowercaseTokenFilter(token: string): string {\n  return token.toLowerCase();\n}\n\n/**\n * Converts a token to uppercase.\n * @param {string} token - the token\n * @returns {string} - the uppercased token\n */\nexport function uppercaseTokenFilter(token: string): string {\n  return token.toUpperCase();\n}\n","import { CharacterFilter } from \"./character_filter\";\nimport { Tokenizer, whitespaceTokenizer } from \"./tokenizer\";\nimport { lowercaseTokenFilter, TokenFilter } from \"./token_filter\";\n\n/**\n * A analyzer converts a string into tokens which are added to the inverted index for searching.\n */\nexport interface Analyzer {\n  /**\n   * The character filters of the analyzer.\n   */\n  char_filter?: CharacterFilter[];\n  /**\n   * The tokenizer of the analyzer.\n   */\n  tokenizer: Tokenizer;\n  /**\n   * The token filters of the analyzer.\n   */\n  token_filter?: TokenFilter[];\n}\n\n/**\n * Analyzes a given string.\n * @param {Analyzer} analyzer - the analyzer\n * @param {string} str - the string\n * @returns {string[]} - the tokens\n */\nexport function analyze(analyzer: Analyzer, str: string): string[] {\n  if (analyzer.char_filter) {\n    for (let j = 0; j < analyzer.char_filter.length; j++) {\n      str = analyzer.char_filter[j](str);\n    }\n  }\n  const tokens = analyzer.tokenizer(str);\n  if (analyzer.token_filter) {\n    for (let i = 0; i < tokens.length; i++) {\n      for (let k = 0; k < analyzer.token_filter.length; k++) {\n        tokens[i] = analyzer.token_filter[k](tokens[i], i, tokens);\n      }\n    }\n  }\n  // Remove empty tokens.\n  return tokens.filter((token) => token);\n}\n\n/**\n * An analyzer with the whitespace tokenizer and the lowercase token filter.\n */\nexport class StandardAnalyzer implements Analyzer {\n  tokenizer = whitespaceTokenizer;\n  token_filter = [lowercaseTokenFilter];\n}\n","import { Analyzer, StandardAnalyzer, analyze } from \"./analyzer/analyzer\";\n\n/**\n * Converts a string into an array of code points.\n * @param str - the string\n * @returns {number[]} to code points\n * @hidden\n */\nexport function toCodePoints(str: string): number[] {\n  const r = [];\n  for (let i = 0; i < str.length;) {\n    const chr = str.charCodeAt(i++);\n    if (chr >= 0xD800 && chr <= 0xDBFF) {\n      // surrogate pair\n      const low = str.charCodeAt(i++);\n      r.push(0x10000 + ((chr - 0xD800) << 10) | (low - 0xDC00));\n    } else {\n      // ordinary character\n      r.push(chr);\n    }\n  }\n  return r;\n}\n\n/**\n * Inverted index class handles featured text search for specific document fields.\n * @hidden\n */\nexport class InvertedIndex {\n  public analyzer: Analyzer;\n  public docCount: number = 0;\n  public docStore: Map<InvertedIndex.DocumentIndex, InvertedIndex.DocStore> = new Map();\n  public totalFieldLength: number = 0;\n  public root: InvertedIndex.Index = new Map();\n\n  private _store: boolean;\n  private _optimizeChanges: boolean;\n\n  /**\n   * @param {boolean} [options.store=true] - inverted index will be stored at serialization rather than rebuilt on load\n   * @param {boolean} [options.optimizeChanges=true] - flag to store additional metadata inside the index for better\n   *  performance if an existing field is updated or removed\n   * @param {Analyzer} [options.analyzer=] - the analyzer of this inverted index\n   */\n  constructor(options: InvertedIndex.FieldOptions = {}) {\n    (\n      {\n        store: this._store = true,\n        optimizeChanges: this._optimizeChanges = true,\n        analyzer: this.analyzer = new StandardAnalyzer()\n      } = options\n    );\n  }\n\n  /**\n   * Adds defined fields of a document to the inverted index.\n   * @param {string} field - the field to add\n   * @param {number} docId - the doc id of the field\n   */\n  public insert(field: string, docId: InvertedIndex.DocumentIndex): void {\n    if (this.docStore.has(docId)) {\n      throw Error(\"Field already added.\");\n    }\n\n    // Tokenize document field.\n    const fieldTokens = analyze(this.analyzer, field);\n    if (fieldTokens.length == 0) {\n      // Add empty field at least to document store for query 'exists'.\n      this.docStore.set(docId, {fieldLength: 0});\n      return;\n    }\n    this.totalFieldLength += fieldTokens.length;\n    this.docCount += 1;\n    this.docStore.set(docId, {fieldLength: fieldTokens.length});\n\n    // Holds references to each index of a document.\n    const indexRef: InvertedIndex.Index[] = [];\n    if (this._optimizeChanges) {\n      Object.defineProperties(this.docStore.get(docId), {\n        indexRef: {enumerable: false, configurable: true, writable: true, value: indexRef}\n      });\n    }\n\n    // Iterate over all unique field terms.\n    for (const token of new Set(fieldTokens)) {\n      // Calculate term frequency.\n      let tf = 0;\n      for (let j = 0; j < fieldTokens.length; j++) {\n        if (fieldTokens[j] === token) {\n          ++tf;\n        }\n      }\n\n      // Add term to index tree.\n      let branch = this.root;\n\n      for (const c of toCodePoints(token)) {\n        let child = branch.get(c);\n        if (child === undefined) {\n          child = new Map();\n          if (this._optimizeChanges) {\n            child.pa = branch;\n          }\n          branch.set(c, child);\n        }\n        branch = child;\n      }\n      // Add term info to index leaf.\n      if (branch.dc === undefined) {\n        branch.dc = new Map();\n        branch.df = 0;\n      }\n      branch.dc.set(docId, tf);\n      branch.df += 1;\n\n      // Store index leaf for deletion.\n      indexRef.push(branch);\n    }\n  }\n\n  /**\n   * Removes all relevant terms of a document from the inverted index.\n   * @param {number} docId - the document.\n   */\n  public remove(docId: InvertedIndex.DocumentIndex): void {\n    if (!this.docStore.has(docId)) {\n      return;\n    }\n    const docStore = this.docStore.get(docId);\n    // Remove document.\n    this.docStore.delete(docId);\n    if (docStore.fieldLength === 0) {\n      return;\n    }\n    this.docCount -= 1;\n\n    // Reduce total field length.\n    this.totalFieldLength -= docStore.fieldLength;\n\n    if (this._optimizeChanges) {\n      // Iterate over all term references.\n      // Remove docId from docs and decrement document frequency.\n      const indexRef = docStore.indexRef;\n      for (let j = 0; j < indexRef.length; j++) {\n        let index = indexRef[j];\n        index.df -= 1;\n        index.dc.delete(docId);\n\n        // Check if no document is left for current tree.\n        if (index.df === 0) {\n          // Delete unused meta data of branch.\n          delete index.df;\n          delete index.dc;\n\n          // Check for sub branches.\n          if (index.size !== 0) {\n            continue;\n          }\n\n          // Delete term branch if not used anymore.\n          do {\n            // Go tree upwards.\n            const parent = index.pa;\n            // Delete parent reference for preventing memory leak (cycle reference).\n            delete index.pa;\n\n            // Iterate over all children.\n            for (const key of parent.keys()) {\n              // Remove previous child form parent.\n              if (parent.get(key) === index) {\n                parent.delete(key);\n                break;\n              }\n            }\n            index = parent;\n          } while (index.pa !== undefined && index.size === 0 && index.df === undefined);\n        }\n      }\n    } else {\n      this._remove(this.root, docId);\n    }\n  }\n\n  /**\n   * Gets the term index of a term.\n   * @param {string} term - the term\n   * @param {object} root - the term index to start from\n   * @param {number} start - the position of the term string to start from\n   * @return {object} - The term index or null if the term is not in the term tree.\n   */\n  public static getTermIndex(term: number[], root: InvertedIndex.Index, start: number = 0): InvertedIndex.Index {\n    if (start >= term.length) {\n      return null;\n    }\n    for (let i = start; i < term.length; i++) {\n      let child = root.get(term[i]);\n      if (child === undefined) {\n        return null;\n      }\n      root = child;\n    }\n    return root;\n  }\n\n  /**\n   * Extends a term index to all available term leafs.\n   * @param {object} idx - the term index to start from\n   * @param {number[]} [term=[]] - the current term\n   * @param {Array} termIndices - all extended indices with their term\n   * @returns {Array} - Array with term indices and extension\n   */\n  public static extendTermIndex(idx: InvertedIndex.Index, term: number[] = [],\n                                termIndices: InvertedIndex.IndexTerm[] = []): InvertedIndex.IndexTerm[] {\n    if (idx.df !== undefined) {\n      termIndices.push({index: idx, term: term.slice()});\n    }\n\n    term.push(0);\n    for (const child of idx) {\n      term[term.length - 1] = child[0];\n      InvertedIndex.extendTermIndex(child[1], term, termIndices);\n    }\n    term.pop();\n    return termIndices;\n  }\n\n  /**\n   * Serialize the inverted index.\n   * @returns {{docStore: *, _fields: *, index: *}}\n   */\n  public toJSON(): InvertedIndex.Serialization {\n    if (this._store) {\n      return {\n        _store: true,\n        _optimizeChanges: this._optimizeChanges,\n        docCount: this.docCount,\n        docStore: [...this.docStore],\n        totalFieldLength: this.totalFieldLength,\n        root: InvertedIndex._serializeIndex(this.root)\n      };\n    }\n    return {\n      _store: false,\n      _optimizeChanges: this._optimizeChanges,\n    };\n  }\n\n  /**\n   * Deserialize the inverted index.\n   * @param {{docStore: *, _fields: *, index: *}} serialized - The serialized inverted index.\n   * @param {Analyzer} analyzer[undefined] - an analyzer\n   */\n  public static fromJSONObject(serialized: InvertedIndex.Serialization, analyzer?: Analyzer): InvertedIndex {\n    const invIdx = new InvertedIndex({\n      store: serialized._store,\n      optimizeChanges: serialized._optimizeChanges,\n      analyzer: analyzer\n    });\n\n    if (serialized._store) {\n      invIdx.docCount = serialized.docCount;\n      invIdx.docStore = new Map(serialized.docStore);\n      invIdx.totalFieldLength = serialized.totalFieldLength;\n      invIdx.root = InvertedIndex._deserializeIndex(serialized.root);\n    }\n\n    if (invIdx._optimizeChanges) {\n      invIdx._regenerate(invIdx.root, null);\n    }\n\n    return invIdx;\n  }\n\n  private static _serializeIndex(idx: InvertedIndex.Index): InvertedIndex.SerializedIndex {\n    const serialized: InvertedIndex.SerializedIndex = {};\n    if (idx.dc !== undefined) {\n      serialized.d = {df: idx.df, dc: [...idx.dc]};\n    }\n\n    if (idx.size === 0) {\n      return serialized;\n    }\n\n    const keys = [];\n    const values = [];\n    for (const child of idx) {\n      keys.push(child[0]);\n      values.push(InvertedIndex._serializeIndex(child[1]));\n    }\n    serialized.k = keys;\n    serialized.v = values;\n\n    return serialized;\n  }\n\n  private static _deserializeIndex(serialized: InvertedIndex.SerializedIndex): InvertedIndex.Index {\n    const idx: InvertedIndex.Index = new Map();\n\n    if (serialized.k !== undefined) {\n      for (let i = 0; i < serialized.k.length; i++) {\n        idx.set(serialized.k[i], InvertedIndex._deserializeIndex(serialized.v[i]));\n      }\n    }\n    if (serialized.d !== undefined) {\n      idx.df = serialized.d.df;\n      idx.dc = new Map(serialized.d.dc);\n    }\n    return idx;\n  }\n\n  /**\n   * Set parent of to each index and regenerate the indexRef.\n   * @param {Index} index - the index\n   * @param {Index} parent - the parent\n   */\n  private _regenerate(index: InvertedIndex.Index, parent: InvertedIndex.Index): void {\n    // Set parent.\n    if (parent !== null) {\n      index.pa = parent;\n    }\n\n    // Iterate over subtree.\n    for (const child of index.values()) {\n      this._regenerate(child, index);\n    }\n\n    if (index.dc !== undefined) {\n      // Get documents of term.\n      for (const docId of index.dc.keys()) {\n        // Get document store at specific document/field.\n        const ref = this.docStore.get(docId);\n        if (ref.indexRef === undefined) {\n          Object.defineProperties(ref, {\n            indexRef: {enumerable: false, configurable: true, writable: true, value: []}\n          });\n        }\n        // Set reference to term index.\n        ref.indexRef.push(index);\n      }\n    }\n  }\n\n  /**\n   * Iterate over the whole inverted index and remove the document.\n   * Delete branch if not needed anymore.\n   * Function is needed if index is used without optimization.\n   * @param {Index} idx - the index\n   * @param {number} docId - the doc id\n   * @returns {boolean} true if index is empty\n   */\n  private _remove(idx: InvertedIndex.Index, docId: InvertedIndex.DocumentIndex): boolean {\n    for (const child of idx) {\n      // Checkout branch.\n      if (this._remove(child[1], docId)) {\n        idx.delete(child[0]);\n      }\n    }\n    // Remove docId from docs and decrement document frequency.\n    if (idx.df !== undefined) {\n      if (idx.dc.has(docId)) {\n        idx.df -= 1;\n        idx.dc.delete(docId);\n\n        // Delete unused meta data of branch.\n        if (idx.df === 0) {\n          delete idx.df;\n          delete idx.dc;\n        }\n      }\n    }\n    return idx.size === 0 && idx.dc === undefined;\n  }\n}\n\nexport namespace InvertedIndex {\n  export interface FieldOptions {\n    store?: boolean;\n    optimizeChanges?: boolean;\n    analyzer?: Analyzer;\n  }\n\n  export type Index = Map<number, any> & { dc?: Map<DocumentIndex, number>, df?: number, pa?: Index };\n\n  export type IndexTerm = { index: Index, term: number[] };\n\n  export interface SerializedIndex {\n    d?: {\n      df: number;\n      dc: [DocumentIndex, number][]\n    };\n    k?: number[];\n    v?: SerializedIndex[];\n  }\n\n  export type Serialization = SpareSerialization | FullSerialization;\n\n  export type SpareSerialization = {\n    _store: false;\n    _optimizeChanges: boolean;\n  };\n\n  export type FullSerialization = {\n    _store: true;\n    _optimizeChanges: boolean;\n    docCount: number;\n    docStore: [DocumentIndex, DocStore][];\n    totalFieldLength: number;\n    root: SerializedIndex;\n  };\n\n  export interface DocStore {\n    fieldLength?: number;\n    indexRef?: Index[];\n  }\n\n  export type DocumentIndex = number | string;\n}\n","import { InvertedIndex } from \"./inverted_index\";\nimport { Dict } from \"../../common/types\";\nimport { Query } from \"./query_types\";\n\n/**\n * @hidden\n */\nexport class Scorer {\n  private _invIdxs: Dict<InvertedIndex>;\n  private _cache: Dict<Scorer.IDFCache> = {};\n\n  constructor(invIdxs: Dict<InvertedIndex>) {\n    this._invIdxs = invIdxs;\n  }\n\n  public setDirty(): void {\n    this._cache = {};\n  }\n\n  public score(fieldName: string, boost: number, termIdx: InvertedIndex.Index, doScoring: boolean | null,\n               queryResults: Scorer.QueryResults, term: number[], df: number = 0): void {\n    if (termIdx === null || termIdx.dc === undefined) {\n      return;\n    }\n\n    const idf = this._idf(fieldName, df || termIdx.df);\n    for (const [docId, tf] of termIdx.dc) {\n      if (!queryResults.has(docId)) {\n        queryResults.set(docId, []);\n      }\n\n      if (doScoring === true) {\n        // BM25 scoring.\n        queryResults.get(docId).push({tf, idf, boost, fieldName, term});\n      } else if (doScoring === false) {\n        // Constant scoring.\n        queryResults.set(docId, [{boost}]);\n      } else {\n        // Zero scoring.\n        queryResults.set(docId, [{boost: 0}]);\n      }\n    }\n  }\n\n  public scoreConstant(boost: number, docId: InvertedIndex.DocumentIndex,\n                       queryResults: Scorer.QueryResults): Scorer.QueryResults {\n    if (!queryResults.has(docId)) {\n      queryResults.set(docId, []);\n    }\n    queryResults.get(docId).push({boost});\n    return queryResults;\n  }\n\n  public finalScore(query: Query, queryResults: Scorer.QueryResults): Scorer.ScoreResults {\n    const finalResult: Scorer.ScoreResults = {};\n    const k1 = query.bm25 !== undefined ? query.bm25.k1 : 1.2;\n    const b = query.bm25 !== undefined ? query.bm25.b : 0.75;\n    const explain = query.explain !== undefined ? query.explain : false;\n\n    for (const [docId, result] of queryResults) {\n      let docScore = 0;\n      let docExplanation: Scorer.ScoreExplanation[] = [];\n      for (let i = 0; i < result.length; i++) {\n        const queryResult = result[i];\n        let score = 0;\n        if (queryResult.tf !== undefined) {\n          // BM25 scoring.\n          const tf = queryResult.tf;\n          const fieldLength = Scorer._calculateFieldLength(this._invIdxs[queryResult.fieldName].docStore.get(docId)\n            .fieldLength);\n          const avgFieldLength = this._avgFieldLength(queryResult.fieldName);\n          const tfNorm = (tf * (k1 + 1)) / (tf + k1 * (1 - b + b * (fieldLength / avgFieldLength)));\n          score = queryResult.idf * tfNorm * queryResult.boost;\n          if (explain) {\n            docExplanation.push({\n              boost: queryResult.boost,\n              score: score,\n              docID: docId,\n              fieldName: queryResult.fieldName,\n              index: String.fromCharCode(...queryResult.term),\n              idf: queryResult.idf,\n              tfNorm: tfNorm,\n              tf: tf,\n              fieldLength: fieldLength,\n              avgFieldLength: avgFieldLength,\n            });\n          }\n        } else {\n          // Constant scoring.\n          score = queryResult.boost;\n\n          if (explain) {\n            docExplanation.push({\n              boost: queryResult.boost,\n              score: score\n            });\n          }\n        }\n        docScore += score;\n      }\n      if (explain) {\n        finalResult[docId] = {\n          score: docScore,\n          explanation: docExplanation\n        };\n      } else {\n        finalResult[docId] = {\n          score: docScore\n        };\n      }\n    }\n    return finalResult;\n  }\n\n  private static _calculateFieldLength(fieldLength: number): number {\n    // Dummy function to be compatible to lucene in unit tests.\n    return fieldLength;\n  }\n\n  private _getCache(fieldName: string): Scorer.IDFCache {\n    if (this._cache[fieldName] === undefined) {\n      const avgFieldLength = this._invIdxs[fieldName].totalFieldLength / this._invIdxs[fieldName].docCount;\n      this._cache[fieldName] = {idfs: {}, avgFieldLength};\n    }\n    return this._cache[fieldName];\n  }\n\n  /**\n   * Returns the idf by either calculate it or use a cached one.\n   * @param {string} fieldName - the name of the field\n   * @param {number} docFreq - the doc frequency of the term\n   * @returns {number} the idf\n   * @private\n   */\n  private _idf(fieldName: string, docFreq: number): number {\n    const cache = this._getCache(fieldName);\n    if (cache.idfs[docFreq] !== undefined) {\n      return cache.idfs[docFreq];\n    }\n    return cache.idfs[docFreq] = Math.log(1 + (this._invIdxs[fieldName].docCount - docFreq + 0.5) / (docFreq + 0.5));\n  }\n\n  private _avgFieldLength(fieldName: string): number {\n    return this._getCache(fieldName).avgFieldLength;\n  }\n}\n\nexport namespace Scorer {\n  export interface IDFCache {\n    idfs: Dict<number>;\n    avgFieldLength: number;\n  }\n\n  export interface QueryResult {\n    tf?: number; // Term frequency.\n    idf?: number; // Inverse document frequency\n    boost: number;\n    fieldName?: string;\n    term?: number[];\n  }\n\n  export type QueryResults = Map<InvertedIndex.DocumentIndex, QueryResult[]>;\n\n  export interface BM25Explanation {\n    boost: number;\n    score: number;\n    docID: number;\n    fieldName: string;\n    index: string;\n    idf: number;\n    tfNorm: number;\n    tf: number;\n    fieldLength: number;\n    avgFieldLength: number;\n  }\n\n  export interface ConstantExplanation {\n    boost: number;\n    score: number;\n  }\n\n  export type ScoreExplanation = BM25Explanation | ConstantExplanation;\n  export type ScoreResult = { score: number, explanation?: ScoreExplanation[] };\n  export type ScoreResults = Dict<ScoreResult>;\n}\n","import { Automaton } from \"./automaton\";\n\n/**\n * From org/apache/lucene/util/automaton/RunAutomaton.java\n * @hidden\n */\nexport class RunAutomaton {\n  private _points: number[];\n  private _accept: boolean[];\n  private _transitions: number[];\n  private _classmap: number[];\n\n  constructor(automaton: Automaton) {\n    const size = automaton.getNumStates();\n    this._points = automaton.getStartPoints();\n    this._accept = new Array(size);\n    this._transitions = new Array(size * this._points.length);\n\n    for (let n = 0; n < size; n++) {\n      this._accept[n] = automaton.isAccept(n);\n      for (let c = 0; c < this._points.length; c++) {\n        // assert dest === -1 || dest < size;\n        this._transitions[n * this._points.length + c] = automaton.step(n, this._points[c]);\n      }\n    }\n\n    this._classmap = new Array(256 /* alphaSize */);\n    for (let i = 0, j = 0; j < this._classmap.length; j++) {\n      if (i + 1 < this._points.length && j === this._points[i + 1]) {\n        i++;\n      }\n      this._classmap[j] = i;\n    }\n  }\n\n  public getCharClass(c: number): number {\n    // binary search\n    let a = 0;\n    let b = this._points.length;\n    while (b - a > 1) {\n      const d = (a + b) >>> 1;\n      if (this._points[d] > c) {\n        b = d;\n      } else if (this._points[d] < c) {\n        a = d;\n      } else {\n        return d;\n      }\n    }\n    return a;\n  }\n\n  public step(state: number, c: number): number {\n    if (c >= this._classmap.length) {\n      return this._transitions[state * this._points.length + this.getCharClass(c)];\n    } else {\n      return this._transitions[state * this._points.length + this._classmap[c]];\n    }\n  }\n\n  public isAccept(state: number): boolean {\n    return this._accept[state];\n  }\n}\n","/**\n * Transition with dest, min and max.\n * @hidden\n */\nexport declare type Transition = [number, number, number];\n\n/**\n * @type {number}\n * @hidden\n */\nexport const MIN_CODE_POINT = 0;\n/**\n * @type {number}\n * @hidden\n */\nexport const MAX_CODE_POINT = 1114111;\n\nfunction sortByDestMinMax(a: Transition, b: Transition) {\n  if (a[0] < b[0]) {\n    return -1;\n  } else if (a[0] > b[0]) {\n    return 1;\n  }\n  if (a[1] < b[1]) {\n    return -1;\n  } else if (a[1] > b[1]) {\n    return 1;\n  }\n  if (a[2] < b[2]) {\n    return -1;\n  } else if (a[2] > b[2]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction sortByMinMaxDest(a: Transition, b: Transition) {\n  if (a[1] < b[1]) {\n    return -1;\n  } else if (a[1] > b[1]) {\n    return 1;\n  }\n  if (a[2] < b[2]) {\n    return -1;\n  } else if (a[2] > b[2]) {\n    return 1;\n  }\n  if (a[0] < b[0]) {\n    return -1;\n  } else if (a[0] > b[0]) {\n    return 1;\n  }\n  return 0;\n}\n\n/**\n * From org/apache/lucene/util/automaton/Automaton.java\n * @hidden\n */\nexport class Automaton {\n  private _stateTransitions: Transition[] = [];\n  private _accept: Set<number>;\n  private _nextState: number;\n  private _currState: number;\n  // public deterministic: boolean;\n  private _transitions: object;\n\n  constructor() {\n    this._stateTransitions = [];\n    this._accept = new Set();\n    this._nextState = 0;\n    this._currState = -1;\n    // this.deterministic = true;\n    this._transitions = {};\n  }\n\n  public isAccept(n: number): boolean {\n    return this._accept.has(n);\n  }\n\n  public createState(): number {\n    return this._nextState++;\n  }\n\n  public setAccept(state: number, accept: boolean): void {\n    if (accept) {\n      this._accept.add(state);\n    } else {\n      this._accept.delete(state);\n    }\n  }\n\n  public finishState(): void {\n    if (this._currState !== -1) {\n      this._finishCurrentState();\n      this._currState = -1;\n    }\n  }\n\n  private _finishCurrentState(): void {\n    // Sort all transitions.\n    this._stateTransitions.sort(sortByDestMinMax);\n\n    let upto = 0;\n    let p: Transition = [-1, -1, -1];\n\n    for (let i = 0, len = this._stateTransitions.length; i < len; i++) {\n      let t = this._stateTransitions[i];\n      if (p[0] === t[0]) {\n        if (t[1] <= p[2] + 1) {\n          if (t[2] > p[2]) {\n            p[2] = t[2];\n          }\n        } else {\n          if (p[0] !== -1) {\n            this._stateTransitions[upto][0] = p[0];\n            this._stateTransitions[upto][1] = p[1];\n            this._stateTransitions[upto][2] = p[2];\n            upto++;\n          }\n          p[1] = t[1];\n          p[2] = t[2];\n        }\n      } else {\n        if (p[0] !== -1) {\n          this._stateTransitions[upto][0] = p[0];\n          this._stateTransitions[upto][1] = p[1];\n          this._stateTransitions[upto][2] = p[2];\n          upto++;\n        }\n        p[0] = t[0];\n        p[1] = t[1];\n        p[2] = t[2];\n      }\n    }\n\n    if (p[0] !== -1) {\n      // Last transition\n      this._stateTransitions[upto][0] = p[0];\n      this._stateTransitions[upto][1] = p[1];\n      this._stateTransitions[upto][2] = p[2];\n      upto++;\n    }\n\n    this._transitions[this._currState] = this._stateTransitions.slice(0, upto).sort(sortByMinMaxDest);\n\n    // if (this.deterministic && upto > 1) {\n    //   let lastMax = this.stateTransitions[0][2];\n    //   for (let i = 1; i < upto; i++) {\n    //     let min = this.stateTransitions[i][1];\n    //     if (min <= lastMax) {\n    //       this.deterministic = false;\n    //       break;\n    //     }\n    //     lastMax = this.stateTransitions[i][2];\n    //   }\n    // }\n\n    this._stateTransitions = [];\n  }\n\n  public getStartPoints(): number[] {\n    const pointset = new Set();\n    pointset.add(MIN_CODE_POINT);\n\n    const states = Object.keys(this._transitions);\n    for (let i = 0; i < states.length; i++) {\n      let trans = this._transitions[states[i]];\n      for (let j = 0; j < trans.length; j++) {\n        let tran = trans[j];\n        pointset.add(tran[1]);\n        if (tran[2] < MAX_CODE_POINT) {\n          pointset.add(tran[2] + 1);\n        }\n      }\n    }\n    return Array.from(pointset).sort((a, b) => a - b);\n  }\n\n  public step(state: number, label: number): number {\n    let trans = this._transitions[state];\n    if (trans) {\n      for (let i = 0; i < trans.length; i++) {\n        let tran = trans[i];\n        if (tran[1] <= label && label <= tran[2]) {\n          return tran[0];\n        }\n      }\n    }\n    return -1;\n  }\n\n  public getNumStates(): number {\n    return this._nextState;\n  }\n\n  public addTransition(source: number, dest: number, min: number, max: number): void {\n    if (this._currState !== source) {\n      if (this._currState !== -1) {\n        this._finishCurrentState();\n      }\n      this._currState = source;\n    }\n    this._stateTransitions.push([dest, min, max]);\n  }\n}\n","/**\n * Class supports 64Bit integer operations.\n * A cut-down version of dcodeIO/long.js.\n * @hidden\n */\nexport class Long {\n  private _low: number;\n  private _high: number;\n\n  constructor(low: number = 0, high: number = 0) {\n    this._low = low;\n    this._high = high;\n  }\n\n  /**\n   * Returns this long with bits arithmetically shifted to the right by the given amount.\n   * @param {number} numBits - number of bits\n   * @returns {Long} the long\n   */\n  public shiftRight(numBits: number): Long {\n    if ((numBits &= 63) === 0)\n      return this;\n    else if (numBits < 32)\n      return new Long((this._low >>> numBits) | (this._high << (32 - numBits)), this._high >> numBits);\n    else\n      return new Long((this._high >> (numBits - 32)), this._high >= 0 ? 0 : -1);\n  }\n\n  /**\n   * Returns this long with bits arithmetically shifted to the left by the given amount.\n   * @param {number} numBits - number of bits\n   * @returns {Long} the long\n   */\n  public shiftLeft(numBits: number): Long {\n    if ((numBits &= 63) === 0)\n      return this;\n    else if (numBits < 32)\n      return new Long(this._low << numBits, (this._high << numBits) | (this._low >>> (32 - numBits)));\n    else\n      return new Long(0, this._low << (numBits - 32));\n  }\n\n  /**\n   * Returns the bitwise AND of this Long and the specified.\n   * @param {Long} other - the other Long\n   * @returns {Long} the long\n   */\n  public and(other: Long): Long {\n    return new Long(this._low & other._low, this._high & other._high);\n  }\n\n  /**\n   * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n   * @returns {number}\n   */\n  public toInt(): number {\n    return this._low;\n  }\n}\n","import { Long } from \"./long\";\n\nconst MASKS = [new Long(0x1), new Long(0x3), new Long(0x7), new Long(0xf),\n  new Long(0x1f), new Long(0x3f), new Long(0x7f), new Long(0xff),\n  new Long(0x1ff), new Long(0x3ff), new Long(0x7ff), new Long(0xfff),\n  new Long(0x1fff), new Long(0x3fff), new Long(0x7fff), new Long(0xffff),\n  new Long(0xf, 0x1fff), new Long(0xf, 0x3fff), new Long(0xf, 0x7fff), new Long(0xf, 0xffff),\n  new Long(0xff, 0x1fff), new Long(0xff, 0x3fff), new Long(0xff, 0x7fff), new Long(0xff, 0xffff),\n  new Long(0xfff, 0x1fff), new Long(0xfff, 0x3fff), new Long(0xfff, 0x7fff), new Long(0xfff, 0xffff),\n  new Long(0xffff, 0x1fff), new Long(0xffff, 0x3fff), new Long(0xffff, 0x7fff), new Long(0xffff, 0xffff),\n  new Long(0xfffff, 0x1fff), new Long(0xfffff, 0x3fff), new Long(0xfffff, 0x7fff), new Long(0xfffff, 0xffff),\n  new Long(0xffffff, 0x1fff), new Long(0xffffff, 0x3fff), new Long(0xffffff, 0x7fff), new Long(0xffffff, 0xffff),\n  new Long(0xfffffff, 0x1fff), new Long(0xfffffff, 0x3fff), new Long(0xfffffff, 0x7fff), new Long(0xfffffff, 0xffff),\n  new Long(0xffffffff, 0x1fff), new Long(0xffffffff, 0x3fff), new Long(0xffffffff, 0x7fff), new Long(0xffffffff, 0xffff),\n  new Long(0xfffffffff, 0x1fff), new Long(0xfffffffff, 0x3fff), new Long(0xfffffffff, 0x7fff), new Long(0xfffffffff, 0xffff),\n  new Long(0xffffffffff, 0x1fff), new Long(0xffffffffff, 0x3fff), new Long(0xffffffffff, 0x7fff), new Long(0xffffffffff, 0xffff),\n  new Long(0xfffffffffff, 0x1fff), new Long(0xfffffffffff, 0x3fff), new Long(0xfffffffffff, 0x7fff), new Long(0xfffffffffff, 0xffff),\n  new Long(0xffffffffffff, 0x1fff), new Long(0xffffffffffff, 0x3fff), new Long(0xffffffffffff, 0x7fff)];\n\n/**\n * From org/apache/lucene/util/automaton/LevenshteinAutomata.java#ParametricDescription\n * @hidden\n */\nexport class ParametricDescription {\n  protected _w: number;\n  private _n: number;\n  private _minErrors: number[];\n\n  constructor(w: number, n: number, minErrors: number[]) {\n    this._w = w;\n    this._n = n;\n    this._minErrors = minErrors;\n  }\n\n  /**\n   * Return the number of states needed to compute a Levenshtein DFA\n   */\n  public size(): number {\n    return this._minErrors.length * (this._w + 1);\n  }\n\n  /**\n   * Returns true if the <code>state</code> in any Levenshtein DFA is an accept state (final state).\n   */\n  public isAccept(absState: number): boolean {\n    // decode absState -> state, offset\n    let state = Math.floor(absState / (this._w + 1));\n    let offset = absState % (this._w + 1);\n    //assert offset >= 0;\n    return this._w - offset + this._minErrors[state] <= this._n;\n  }\n\n  /**\n   * Returns the position in the input word for a given <code>state</code>.\n   * This is the minimal boundary for the state.\n   */\n  public getPosition(absState: number): number {\n    return absState % (this._w + 1);\n  }\n\n  public static unpack(data: Long[], index: number, bitsPerValue: number): number {\n    const bitLoc = bitsPerValue * index;\n    const dataLoc = (bitLoc >> 6);\n    const bitStart = (bitLoc & 63);\n\n    if (bitStart + bitsPerValue <= 64) {\n      // not split\n      return data[dataLoc].shiftRight(bitStart).and(MASKS[bitsPerValue - 1]).toInt();\n    } else {\n      // split\n      const part = 64 - bitStart;\n      return (data[dataLoc].shiftRight(bitStart).and(MASKS[part - 1])).toInt()\n        + (data[1 + dataLoc].and(MASKS[bitsPerValue - part - 1]).shiftLeft(part)).toInt();\n    }\n  }\n}\n","import { Long } from \"./long\";\nimport { ParametricDescription } from \"./parametric_description\";\n\n// 1 vectors; 2 states per vector; array length = 2\nconst toStates0 = [new Long(0x2)];\nconst offsetIncrs0 = [new Long(0x0)];\n\n// 2 vectors; 3 states per vector; array length = 6\nconst toStates1 = [new Long(0xa43)];\n\nconst offsetIncrs1 = [new Long(0x38)];\n\n// 4 vectors; 6 states per vector; array length = 24\nconst toStates2 = [new Long(0x82140003, 0x34534914), new Long(0x6d)];\nconst offsetIncrs2 = [new Long(0x55a20000, 0x5555)];\n\n// 8 vectors; 6 states per vector; array length = 48\nconst toStates3 = [new Long(0x900C0003, 0x21520854), new Long(0x4534916d, 0x5b4d19a2), new Long(0xda34)];\nconst offsetIncrs3 = [new Long(0x20fc0000, 0x5555ae0a), new Long(0x55555555)];\n\n// state map\n//   0 -> [(0, 0)]\n//   1 -> [(0, 1)]\n//   2 -> [(0, 1), (1, 1)]\n//   3 -> [(0, 1), (2, 1)]\n//   4 -> [t(0, 1), (0, 1), (1, 1), (2, 1)]\n//   5 -> [(0, 1), (1, 1), (2, 1)]\n\n/**\n * From org/apache/lucene/util/automaton/Lev1TParametricDescription.java\n * @hidden\n */\nexport class Lev1TParametricDescription extends ParametricDescription {\n  constructor(w: number) {\n    super(w, 1, [0, 1, 0, -1, -1, -1]);\n  }\n\n  public transition(absState: number, position: number, vector: number): number {\n    // null absState should never be passed in\n    //assert absState != -1;\n\n    // decode absState -> state, offset\n    let state = Math.floor(absState / (this._w + 1));\n    let offset = absState % (this._w + 1);\n    //assert offset >= 0;\n\n    if (position === this._w) {\n      if (state < 2) {\n        const loc = vector * 2 + state;\n        offset += ParametricDescription.unpack(offsetIncrs0, loc, 1);\n        state = ParametricDescription.unpack(toStates0, loc, 2) - 1;\n      }\n    } else if (position === this._w - 1) {\n      if (state < 3) {\n        const loc = vector * 3 + state;\n        offset += ParametricDescription.unpack(offsetIncrs1, loc, 1);\n        state = ParametricDescription.unpack(toStates1, loc, 2) - 1;\n      }\n    } else if (position === this._w - 2) {\n      if (state < 6) {\n        const loc = vector * 6 + state;\n        offset += ParametricDescription.unpack(offsetIncrs2, loc, 2);\n        state = ParametricDescription.unpack(toStates2, loc, 3) - 1;\n      }\n    } else {\n      if (state < 6) {\n        const loc = vector * 6 + state;\n        offset += ParametricDescription.unpack(offsetIncrs3, loc, 2);\n        state = ParametricDescription.unpack(toStates3, loc, 3) - 1;\n      }\n    }\n\n    if (state === -1) {\n      // null state\n      return -1;\n    } else {\n      // translate back to abs\n      return state * (this._w + 1) + offset;\n    }\n  }\n}\n","import { Long } from \"./long\";\nimport { ParametricDescription } from \"./parametric_description\";\n\n// 1 vectors; 3 states per vector; array length = 3\nconst toStates0 = /*2 bits per value */ [\n  new Long(0x23)\n];\nconst offsetIncrs0 = /*1 bits per value */ [\n  new Long(0x0)\n];\n\n// 2 vectors; 5 states per vector; array length = 10\nconst toStates1 = /*3 bits per value */ [\n  new Long(0x13688b44)\n];\nconst offsetIncrs1 = /*1 bits per value */ [\n  new Long(0x3e0)\n];\n\n// 4 vectors; 13 states per vector; array length = 52\nconst toStates2 = /*4 bits per value */ [\n  new Long(0x5200b504, 0x60dbb0b0), new Long(0x27062227, 0x52332176), new Long(0x14323235, 0x23555432), new Long(0x4354)\n];\nconst offsetIncrs2 = /*2 bits per value */ [\n  new Long(0x00002000, 0x555080a8), new Long(0x55555555, 0x55)\n];\n\n// 8 vectors; 28 states per vector; array length = 224\nconst toStates3 = /*5 bits per value */ [\n  new Long(0x40059404, 0xe701c029), new Long(0x00a50000, 0xa0101620), new Long(0xa1416288, 0xb02c8c40), new Long(0x310858c0, 0xa821032),\n  new Long(0x0d28b201, 0x31442398), new Long(0x847788e0, 0x5281e528), new Long(0x08c2280e, 0xa23980d3), new Long(0xa962278c, 0x1e3294b1),\n  new Long(0x2288e528, 0x8c41309e), new Long(0x021aca21, 0x11444409), new Long(0x86b1086b, 0x11a46248), new Long(0x1d6240c4, 0x2a625894),\n  new Long(0x489074ad, 0x5024a50b), new Long(0x520c411a, 0x14821aca), new Long(0x0b594a44, 0x5888b589), new Long(0xc411a465, 0x941d6520),\n  new Long(0xad6a62d4, 0x8b589075), new Long(0x1a5055a4)\n];\nconst offsetIncrs3 = /*2 bits per value */ [\n  new Long(0x00002000, 0x30c302), new Long(0xc3fc333c, 0x2a0030f3), new Long(0x8282a820, 0x233a0032), new Long(0x32b283a8, 0x55555555),\n  new Long(0x55555555, 0x55555555), new Long(0x55555555, 0x55555555), new Long(0x55555555, 0x55555555)\n];\n\n// 16 vectors; 45 states per vector; array length = 720\nconst toStates4 = /*6 bits per value */ [\n  new Long(0x002c5004, 0x3801450), new Long(0x00000e38, 0xc500014b), new Long(0x51401402, 0x514), new Long(0x0),\n  new Long(0x14010000, 0x518000b), new Long(0x28e20230, 0x9f1c208), new Long(0x830a70c2, 0x219f0df0), new Long(0x08208200, 0x82000082),\n  new Long(0x60800800, 0x8050501), new Long(0x02602643, 0x30820986), new Long(0x50508064, 0x45640142), new Long(0x20000831, 0x8500514),\n  new Long(0x85002082, 0x41405820), new Long(0x0990c201, 0x45618098), new Long(0x50a01051, 0x8316d0c), new Long(0x050df0e0, 0x21451420),\n  new Long(0x14508214, 0xd142140), new Long(0x50821c60, 0x3c21c018), new Long(0xcb142087, 0x1cb1403), new Long(0x1851822c, 0x80082145),\n  new Long(0x20800020, 0x200208), new Long(0x87180345, 0xd0061820), new Long(0x24976b09, 0xcb0a81cb), new Long(0x624709d1, 0x8b1a60e),\n  new Long(0x82249089, 0x2490820), new Long(0x00d2c024, 0xc31421c6), new Long(0x15454423, 0x3c314515), new Long(0xc21cb140, 0x31853c22),\n  new Long(0x2c208214, 0x4514500b), new Long(0x508b0051, 0x8718034), new Long(0x5108f0c5, 0xb2cb4551), new Long(0x1cb0a810, 0xe824715d),\n  new Long(0x908b0e60, 0x1422cb14), new Long(0xc02cb145, 0x30812c22), new Long(0x0cb1420c, 0x84202202), new Long(0x20ce0850, 0x5c20ce08),\n  new Long(0x8b0d70c2, 0x20820820), new Long(0x14214208, 0x42085082), new Long(0x50830c20, 0x9208340), new Long(0x13653592, 0xc6134dc6),\n  new Long(0x6dc4db4d, 0xd309341c), new Long(0x54d34d34, 0x6424d908), new Long(0x030814c2, 0x92072c22), new Long(0x24a30930, 0x4220724b),\n  new Long(0x25c920e2, 0x2470d720), new Long(0x975c9082, 0x92c92d70), new Long(0x04924e08, 0xcb0880c2), new Long(0xc24c2481, 0x45739728),\n  new Long(0xda6174da, 0xc6da4db5), new Long(0x5d30971d, 0x4b5d35d7), new Long(0x93825ce2, 0x1030815c), new Long(0x020cb145, 0x51442051),\n  new Long(0x2c220e2c, 0xc538210e), new Long(0x52cb0d70, 0x8514214), new Long(0x85145142, 0x204b0850), new Long(0x4051440c, 0x92156083),\n  new Long(0xa60e6595, 0x4d660e4d), new Long(0x1c6dc658, 0x94d914e4), new Long(0x1454d365, 0x82642659), new Long(0x51030813, 0x2892072c),\n  new Long(0xcb2ca30b, 0xe2c22072), new Long(0x20538910, 0x452c70d7), new Long(0x708e3891, 0x8b2cb2d), new Long(0xc204b24e, 0x81cb1440),\n  new Long(0x28c2ca24, 0xda44e38e), new Long(0x85d660e4, 0x1dc6da65), new Long(0x8e5d914e, 0xe2cb5d33), new Long(0x38938238)\n];\nconst offsetIncrs4 = /*3 bits per value */ [\n  new Long(0x00080000, 0x30020000), new Long(0x20c060), new Long(0x04000000, 0x81490000), new Long(0x10824824, 0x40249241),\n  new Long(0x60002082, 0xdb6030c3), new Long(0x301b0d80, 0x6c36c06c), new Long(0x000db0db, 0xb01861b0), new Long(0x9188e06d, 0x1b703620),\n  new Long(0x06d86db7, 0x8009200), new Long(0x02402490, 0x4920c24), new Long(0x08249009, 0x490002), new Long(0x28124804, 0x49081281),\n  new Long(0x124a44a2, 0x34800104), new Long(0x0d24020c, 0xc3093090), new Long(0x24c24d24, 0x40009a09), new Long(0x9201061a, 0x4984a06),\n  new Long(0x71269262, 0x494d0492), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249),\n  new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924),\n  new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492),\n  new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249),\n  new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x2492)\n];\n\n// 32 vectors; 45 states per vector; array length = 1440\nconst toStates5 = /*6 bits per value */ [\n  new Long(0x002c5004, 0x3801450), new Long(0x00000e38, 0xc500014b), new Long(0x51401402, 0x514), new Long(0x0),\n  new Long(0x14010000, 0x514000b), new Long(0x038e00e0, 0x550000), new Long(0x0600b180, 0x26451850), new Long(0x08208208, 0x82082082),\n  new Long(0x40820820, 0x2c500), new Long(0x808c0146, 0x70820a38), new Long(0x9c30827c, 0xc37c20c2), new Long(0x20800867, 0x208208),\n  new Long(0x02002080, 0xb1401020), new Long(0x00518000, 0x828e2023), new Long(0x209f1c20, 0x830a70c), new Long(0x853df0df, 0x51451450),\n  new Long(0x14508214, 0x16142142), new Long(0x30805050, 0x60260264), new Long(0x43082098, 0x25050806), new Long(0x14564014, 0x42000083),\n  new Long(0x20850051, 0x8500208), new Long(0x14140582, 0x80990c20), new Long(0x08261809, 0x82019202), new Long(0x90060941, 0x8920519),\n  new Long(0xc22cb242, 0x22492492), new Long(0x0162492c, 0x43080505), new Long(0x86026026, 0x80414515), new Long(0xc5b43142, 0x37c38020),\n  new Long(0x14508014, 0x42085085), new Long(0x50850051, 0x1414058), new Long(0x980990c2, 0x51456180), new Long(0x0c50a010, 0xe008316d),\n  new Long(0x508b21f0, 0x2c52cb2c), new Long(0xc22cb249, 0x600d2c92), new Long(0x1850821c, 0x873c21c0), new Long(0x03cb1420, 0x2c01cb14),\n  new Long(0x45185182, 0x20800821), new Long(0x08208000, 0x45002002), new Long(0x20871803, 0x8700614), new Long(0x050821cf, 0x740500f5),\n  new Long(0x18609000, 0x934d9646), new Long(0x30824d30, 0x4c24d34d), new Long(0xc600d642, 0x1860821), new Long(0x25dac274, 0xc2a072c9),\n  new Long(0x91c27472, 0x2c698398), new Long(0x89242242, 0x92420820), new Long(0x34b00900, 0x82087180), new Long(0xb09d0061, 0x1cb24976),\n  new Long(0x9d1cb0a8, 0x60e62470), new Long(0x1574ce3e, 0xd31455d7), new Long(0x25c25d74, 0x1c600d38), new Long(0x423c3142, 0x51515454),\n  new Long(0x1403c314, 0xc22c21cb), new Long(0x21431853, 0xb2c208), new Long(0x05145145, 0x34508b0), new Long(0x0c508718, 0x5515108f),\n  new Long(0xf2051454, 0x8740500), new Long(0x0618f090, 0xe2534d92), new Long(0x6592c238, 0x49382659), new Long(0x21c600d6, 0x4423c314),\n  new Long(0xcb2d1545, 0x72c2a042), new Long(0xa091c574, 0x422c3983), new Long(0x508b2c52, 0xb2c514), new Long(0x8034b08b, 0xf0c50871),\n  new Long(0x45515108, 0xa810b2cb), new Long(0x715d1cb0, 0x2260e824), new Long(0x8e2d74ce, 0xe6592c53), new Long(0x38938238, 0x420c3081),\n  new Long(0x22020cb1, 0x8508420), new Long(0xce0820ce, 0x70c25c20), new Long(0x08208b0d, 0x42082082), new Long(0x50821421, 0xc204208),\n  new Long(0x832c5083, 0x21080880), new Long(0x0838c214, 0xa5083882), new Long(0xa9c39430, 0xaaaaaaaa), new Long(0x9fa9faaa, 0x1aaa7eaa),\n  new Long(0x1420c308, 0x824820d0), new Long(0x84d94d64, 0x7184d371), new Long(0x1b7136d3, 0x34c24d07), new Long(0x1534d34d, 0x99093642),\n  new Long(0x30c20530, 0x8340508), new Long(0x53592092, 0x34dc6136), new Long(0x4db4dc61, 0xa479c6dc), new Long(0x4924924a, 0x920a9f92),\n  new Long(0x8192a82a, 0x72c22030), new Long(0x30930920, 0x724b24a), new Long(0x920e2422, 0xd72025c), new Long(0xc9082247, 0x92d70975),\n  new Long(0x24e0892c, 0x880c2049), new Long(0xc2481cb0, 0x2c928c24), new Long(0x89088749, 0x80a52488), new Long(0xaac74394, 0x6a861b2a),\n  new Long(0xab27b278, 0x81b2ca6), new Long(0x072c2203, 0xa3093092), new Long(0x6915ce5c, 0xd76985d3), new Long(0x771b6936, 0x5d74c25c),\n  new Long(0x892d74d7, 0x724e0973), new Long(0x0880c205, 0x4c2481cb), new Long(0x739728c2, 0x6174da45), new Long(0xda4db5da, 0x4aa175c6),\n  new Long(0x86486186, 0x6a869b27), new Long(0x308186ca, 0xcb14510), new Long(0x44205102, 0x220e2c51), new Long(0x38210e2c, 0xcb0d70c5),\n  new Long(0x51421452, 0x14514208), new Long(0x4b085085, 0x51440c20), new Long(0x1440832c, 0xcb145108), new Long(0x488b0888, 0x94316208),\n  new Long(0x9f7e79c3, 0xfaaa7dfa), new Long(0x7ea7df7d, 0x30819ea), new Long(0x20d01451, 0x65648558), new Long(0x93698399, 0x96135983),\n  new Long(0x39071b71, 0xd9653645), new Long(0x96451534, 0x4e09909), new Long(0x051440c2, 0x21560834), new Long(0x60e65959, 0xd660e4da),\n  new Long(0xc6dc6584, 0x9207e979), new Long(0xdf924820, 0xa82a8207), new Long(0x103081a6, 0x892072c5), new Long(0xb2ca30b2, 0x2c22072c),\n  new Long(0x0538910e, 0x52c70d72), new Long(0x08e38914, 0x8b2cb2d7), new Long(0x204b24e0, 0x1cb1440c), new Long(0x8c2ca248, 0x874b2cb2),\n  new Long(0x24488b08, 0x43948162), new Long(0x9b1f7e77, 0x9e786aa6), new Long(0xeca6a9e7, 0x51030819), new Long(0x2892072c, 0x8e38a30b),\n  new Long(0x83936913, 0x69961759), new Long(0x4538771b, 0x74ce3976), new Long(0x08e38b2d, 0xc204e24e), new Long(0x81cb1440, 0x28c2ca24),\n  new Long(0xda44e38e, 0x85d660e4), new Long(0x75c6da65, 0x698607e9), new Long(0x99e7864a, 0xa6ca6aa6)\n];\nconst offsetIncrs5 = /*3 bits per value */ [\n  new Long(0x00080000, 0x30020000), new Long(0x20c060), new Long(0x04000000, 0x1000000), new Long(0x50603018, 0xdb6db6db),\n  new Long(0x00002db6, 0xa4800002), new Long(0x41241240, 0x12492088), new Long(0x00104120, 0x40000100), new Long(0x92092052, 0x2492c420),\n  new Long(0x096592d9, 0xc30d800), new Long(0xc36036d8, 0xb01b0c06), new Long(0x6c36db0d, 0x186c0003), new Long(0xb01b6c06, 0xad860361),\n  new Long(0x5b6dd6dd, 0x360001b7), new Long(0x0db6030c, 0xc412311c), new Long(0xb6e36e06, 0xdb0d), new Long(0xdb01861b, 0x9188e06),\n  new Long(0x71b72b62, 0x6dd6db), new Long(0x00800920, 0x40240249), new Long(0x904920c2, 0x20824900), new Long(0x40049000, 0x12012480),\n  new Long(0xa4906120, 0x5524ad4a), new Long(0x02480015, 0x40924020), new Long(0x48409409, 0x92522512), new Long(0x24000820, 0x49201001),\n  new Long(0x204a04a0, 0x29128924), new Long(0x00055549, 0x900830d2), new Long(0x24c24034, 0x934930c), new Long(0x02682493, 0x4186900),\n  new Long(0x61201a48, 0x9a498612), new Long(0x355249d4, 0xc348001), new Long(0x940d2402, 0x24c40930), new Long(0x0924e24d, 0x1a40009a),\n  new Long(0x06920106, 0x6204984a), new Long(0x92712692, 0x92494d54), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924),\n  new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492),\n  new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249),\n  new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924),\n  new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492),\n  new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249),\n  new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924),\n  new Long(0x49249249, 0x92492492), new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492),\n  new Long(0x24924924, 0x49249249), new Long(0x92492492, 0x24924924), new Long(0x49249249, 0x92492492), new Long(0x24924924)\n];\n\n// state map\n//   0 -> [(0, 0)]\n//   1 -> [(0, 2)]\n//   2 -> [(0, 1)]\n//   3 -> [(0, 1), (1, 1)]\n//   4 -> [(0, 2), (1, 2)]\n//   5 -> [t(0, 2), (0, 2), (1, 2), (2, 2)]\n//   6 -> [(0, 2), (2, 1)]\n//   7 -> [(0, 1), (2, 2)]\n//   8 -> [(0, 2), (2, 2)]\n//   9 -> [(0, 1), (1, 1), (2, 1)]\n//   10 -> [(0, 2), (1, 2), (2, 2)]\n//   11 -> [(0, 1), (2, 1)]\n//   12 -> [t(0, 1), (0, 1), (1, 1), (2, 1)]\n//   13 -> [(0, 2), (1, 2), (2, 2), (3, 2)]\n//   14 -> [t(0, 2), (0, 2), (1, 2), (2, 2), (3, 2)]\n//   15 -> [(0, 2), t(1, 2), (1, 2), (2, 2), (3, 2)]\n//   16 -> [(0, 2), (2, 1), (3, 1)]\n//   17 -> [(0, 1), t(1, 2), (2, 2), (3, 2)]\n//   18 -> [(0, 2), (3, 2)]\n//   19 -> [(0, 2), (1, 2), t(1, 2), (2, 2), (3, 2)]\n//   20 -> [t(0, 2), (0, 2), (1, 2), (3, 1)]\n//   21 -> [(0, 1), (1, 1), (3, 2)]\n//   22 -> [(0, 2), (2, 2), (3, 2)]\n//   23 -> [(0, 2), (1, 2), (3, 1)]\n//   24 -> [(0, 2), (1, 2), (3, 2)]\n//   25 -> [(0, 1), (2, 2), (3, 2)]\n//   26 -> [(0, 2), (3, 1)]\n//   27 -> [(0, 1), (3, 2)]\n//   28 -> [(0, 2), (2, 1), (4, 2)]\n//   29 -> [(0, 2), t(1, 2), (1, 2), (2, 2), (3, 2), (4, 2)]\n//   30 -> [(0, 2), (1, 2), (4, 2)]\n//   31 -> [(0, 2), (1, 2), (3, 2), (4, 2)]\n//   32 -> [(0, 2), (2, 2), (3, 2), (4, 2)]\n//   33 -> [(0, 2), (1, 2), t(2, 2), (2, 2), (3, 2), (4, 2)]\n//   34 -> [(0, 2), (1, 2), (2, 2), t(2, 2), (3, 2), (4, 2)]\n//   35 -> [(0, 2), (3, 2), (4, 2)]\n//   36 -> [(0, 2), t(2, 2), (2, 2), (3, 2), (4, 2)]\n//   37 -> [t(0, 2), (0, 2), (1, 2), (2, 2), (4, 2)]\n//   38 -> [(0, 2), (1, 2), (2, 2), (4, 2)]\n//   39 -> [t(0, 2), (0, 2), (1, 2), (2, 2), (3, 2), (4, 2)]\n//   40 -> [(0, 2), (1, 2), (2, 2), (3, 2), (4, 2)]\n//   41 -> [(0, 2), (4, 2)]\n//   42 -> [t(0, 2), (0, 2), (1, 2), (2, 2), t(2, 2), (3, 2), (4, 2)]\n//   43 -> [(0, 2), (2, 2), (4, 2)]\n//   44 -> [(0, 2), (1, 2), t(1, 2), (2, 2), (3, 2), (4, 2)]\n\n/**\n * From org/apache/lucene/util/automaton/Lev2TParametricDescription.java\n * @hidden\n */\nexport class Lev2TParametricDescription extends ParametricDescription {\n  constructor(w: number) {\n    super(w, 2, [0, 2, 1, 0, 1, 0, -1, 0, 0, -1, 0, -1, -1, -1, -1, -1, -2, -1, -1, -1, -2, -1, -1, -2, -1, -1, -2, -1, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2]);\n  }\n\n  public transition(absState: number, position: number, vector: number): number {\n    // null absState should never be passed in\n    // assert absState != -1;\n\n    // decode absState -> state, offset\n    let state = Math.floor(absState / (this._w + 1));\n    let offset = absState % (this._w + 1);\n    // assert offset >= 0;\n\n    if (position === this._w) {\n      if (state < 3) {\n        const loc = vector * 3 + state;\n        offset += ParametricDescription.unpack(offsetIncrs0, loc, 1);\n        state = ParametricDescription.unpack(toStates0, loc, 2) - 1;\n      }\n    } else if (position === this._w - 1) {\n      if (state < 5) {\n        const loc = vector * 5 + state;\n        offset += ParametricDescription.unpack(offsetIncrs1, loc, 1);\n        state = ParametricDescription.unpack(toStates1, loc, 3) - 1;\n      }\n    } else if (position === this._w - 2) {\n      if (state < 13) {\n        const loc = vector * 13 + state;\n        offset += ParametricDescription.unpack(offsetIncrs2, loc, 2);\n        state = ParametricDescription.unpack(toStates2, loc, 4) - 1;\n      }\n    } else if (position === this._w - 3) {\n      if (state < 28) {\n        const loc = vector * 28 + state;\n        offset += ParametricDescription.unpack(offsetIncrs3, loc, 2);\n        state = ParametricDescription.unpack(toStates3, loc, 5) - 1;\n      }\n    } else if (position === this._w - 4) {\n      if (state < 45) {\n        const loc = vector * 45 + state;\n        offset += ParametricDescription.unpack(offsetIncrs4, loc, 3);\n        state = ParametricDescription.unpack(toStates4, loc, 6) - 1;\n      }\n    } else {\n      if (state < 45) {\n        const loc = vector * 45 + state;\n        offset += ParametricDescription.unpack(offsetIncrs5, loc, 3);\n        state = ParametricDescription.unpack(toStates5, loc, 6) - 1;\n      }\n    }\n\n    if (state === -1) {\n      // null state\n      return -1;\n    } else {\n      // translate back to abs\n      return state * (this._w + 1) + offset;\n    }\n  }\n}\n","import { Automaton, MAX_CODE_POINT } from \"./automaton\";\nimport { Lev1TParametricDescription } from \"./lev1t_parametric_description\";\nimport { Lev2TParametricDescription } from \"./lev2t_parametric_description\";\n\n/**\n * From org/apache/lucene/util/automaton/LevenshteinAutomata.java\n * @hidden\n */\nexport class LevenshteinAutomata {\n  private _word: number[];\n  private _numRanges: number;\n  private _rangeLower: number[];\n  private _rangeUpper: number[];\n  private _description: Lev1TParametricDescription;\n  private _alphabet: number[];\n  private _editDistance: number;\n\n  constructor(input: number[], editDistance: number) {\n    this._word = input;\n    this._editDistance = editDistance;\n    this._alphabet = [...new Set(this._word)].sort((a: number, b: number) => a - b);\n\n    this._numRanges = 0;\n    this._rangeLower = new Array(this._alphabet.length + 2);\n    this._rangeUpper = new Array(this._alphabet.length + 2);\n    // calculate the unicode range intervals that exclude the alphabet\n    // these are the ranges for all unicode characters not in the alphabet\n    let lower = 0;\n    for (let i = 0; i < this._alphabet.length; i++) {\n      const higher = this._alphabet[i];\n      if (higher > lower) {\n        this._rangeLower[this._numRanges] = lower;\n        this._rangeUpper[this._numRanges] = higher - 1;\n        this._numRanges++;\n      }\n      lower = higher + 1;\n    }\n    /* add the final endpoint */\n    if (lower <= MAX_CODE_POINT) {\n      this._rangeLower[this._numRanges] = lower;\n      this._rangeUpper[this._numRanges] = MAX_CODE_POINT;\n      this._numRanges++;\n    }\n\n    if (editDistance === 1) {\n      this._description = new Lev1TParametricDescription(input.length);\n    } else {\n      this._description = new Lev2TParametricDescription(input.length);\n    }\n  }\n\n  /**\n   * Transforms the NDFA to a DFA.\n   * @returns {Automaton}\n   */\n  public toAutomaton(): Automaton {\n    let automat = new Automaton();\n    const range = 2 * this._editDistance + 1;\n\n    // the number of states is based on the length of the word and the edit distance\n    const numStates = this._description.size();\n\n    // Prefix is not needed to be handled by the automaton.\n    // stateOffset = 0;\n    automat.createState();\n\n    // create all states, and mark as accept states if appropriate\n    for (let i = 1; i < numStates; i++) {\n      let state = automat.createState();\n      automat.setAccept(state, this._description.isAccept(i));\n    }\n\n    for (let k = 0; k < numStates; k++) {\n      const xpos = this._description.getPosition(k);\n\n      if (xpos < 0) {\n        continue;\n      }\n\n      const end = xpos + Math.min(this._word.length - xpos, range);\n      for (let x = 0; x < this._alphabet.length; x++) {\n        const ch = this._alphabet[x];\n        const cvec = this._getVector(ch, xpos, end);\n        const dest = this._description.transition(k, xpos, cvec);\n\n        if (dest >= 0) {\n          automat.addTransition(k, dest, ch, ch);\n        }\n      }\n\n      const dest = this._description.transition(k, xpos, 0);\n      if (dest >= 0) {\n        for (let r = 0; r < this._numRanges; r++) {\n          automat.addTransition(k, dest, this._rangeLower[r], this._rangeUpper[r]);\n        }\n      }\n    }\n\n    // assert automat.deterministic;\n    automat.finishState();\n\n    return automat;\n  }\n\n  private _getVector(x: number, pos: number, end: number): number {\n    let vector = 0;\n    for (let i = pos; i < end; i++) {\n      vector <<= 1;\n      if (this._word[i] === x) {\n        vector |= 1;\n      }\n    }\n    return vector;\n  }\n}\n","import { Scorer } from \"./scorer\";\nimport { InvertedIndex, toCodePoints } from \"./inverted_index\";\nimport { BoolQuery, FuzzyQuery, Query, QueryTypes, TermQuery, WildcardQuery } from \"./query_types\";\nimport { Dict } from \"../../common/types\";\nimport { RunAutomaton } from \"./fuzzy/run_automaton\";\nimport { LevenshteinAutomata } from \"./fuzzy/levenshtein_automata\";\nimport QueryResults = Scorer.QueryResults;\nimport Index = InvertedIndex.Index;\nimport { analyze, Analyzer } from \"./analyzer/analyzer\";\n\nfunction calculateMinShouldMatch(optionalClauseCount: number, spec: undefined | number | string): number {\n  if (spec === undefined) {\n    return 1;\n  }\n  if (typeof spec === \"number\") {\n    return (spec < 0) ? optionalClauseCount + spec : spec;\n  }\n\n  let result = optionalClauseCount;\n  if (spec.includes(\"<\")) {\n    // Parse conditional minimumShouldMatch.;\n    for (const s of spec.split(\" \")) {\n      const parts = s.split(\"<\");\n      const upperBound = parseInt(parts[0]);\n      if (optionalClauseCount <= upperBound) {\n        return result;\n      } else {\n        result = calculateMinShouldMatch(optionalClauseCount, parts[1]);\n      }\n    }\n    return result;\n  }\n\n  if (spec.includes(\"%\")) {\n    // Parse percentage.\n    const percent = parseInt(spec.slice(0, -1));\n    const calc = (result * percent) * (1 / 100);\n    result = (calc < 0) ? result + Math.ceil(calc) : Math.floor(calc);\n  } else {\n    const calc = parseInt(spec);\n    result = (calc < 0) ? result + calc : calc;\n  }\n\n  return (result < 1) ? 1 : result;\n}\n\n/**\n * @hidden\n */\nexport class IndexSearcher {\n  private _invIdxs: Dict<InvertedIndex>;\n  private _docs: Set<InvertedIndex.DocumentIndex>;\n  private _scorer: Scorer;\n\n  /**\n   * Constructs an index searcher.\n   * @param {Dict<InvertedIndex>} invIdxs - the inverted indexes\n   * @param {Set<number>} docs - the ids of the documents\n   */\n  constructor(invIdxs: Dict<InvertedIndex>, docs: Set<InvertedIndex.DocumentIndex>) {\n    this._invIdxs = invIdxs;\n    this._docs = docs;\n    this._scorer = new Scorer(this._invIdxs);\n  }\n\n  public search(query: Query): Scorer.ScoreResults {\n    let queryResults = this._recursive(query.query, true);\n\n    // Do final scoring.\n    if (query.calculate_scoring !== undefined ? query.calculate_scoring : true) {\n      return this._scorer.finalScore(query, queryResults);\n    }\n\n    const result: Scorer.ScoreResults = {};\n    for (const key of queryResults.keys()) {\n      result[key] = {score: 1};\n    }\n    return result;\n  }\n\n  public setDirty() {\n    this._scorer.setDirty();\n  }\n\n  private _recursive(query: any, doScoring: boolean | null) {\n    let queryResults: QueryResults = new Map();\n    const boost = query.boost !== undefined ? query.boost : 1;\n    const fieldName = query.field !== undefined ? query.field : null;\n\n    let root = null;\n    let analyzer: Analyzer = null;\n    if (this._invIdxs[fieldName] !== undefined) {\n      root = this._invIdxs[fieldName].root;\n      analyzer = this._invIdxs[fieldName].analyzer;\n    }\n\n    switch (query.type) {\n      case \"bool\": {\n        queryResults = null;\n        if (query.must !== undefined) {\n          queryResults = this._getUnique(query.must, doScoring, queryResults);\n        }\n        if (query.filter !== undefined) {\n          queryResults = this._getUnique(query.filter, null, queryResults);\n        }\n        if (query.should !== undefined) {\n          const shouldDocs = this._getAll(query.should, doScoring);\n\n          let empty = false;\n          if (queryResults === null) {\n            empty = true;\n            queryResults = new Map();\n          }\n\n          const msm = Math.max(1, calculateMinShouldMatch(query.should.length, query.minimum_should_match));\n          if (empty && msm === 1) {\n            // Take all documents.\n            queryResults = shouldDocs;\n          } else {\n            // Remove documents with fewer matches.\n            for (const [docId, res] of shouldDocs) {\n              if (res.length >= msm) {\n                if (queryResults.has(docId)) {\n                  queryResults.get(docId).push(...res);\n                } else if (empty) {\n                  queryResults.set(docId, res);\n                } else {\n                  queryResults.delete(docId);\n                }\n              }\n            }\n          }\n        }\n        // Match all documents if must/filter/should is not defined.\n        if (queryResults === null) {\n          queryResults = this._recursive({type: \"match_all\"}, false);\n        }\n        if (query.not !== undefined) {\n          let notDocs = this._getAll(query.not, null);\n          // Remove all matching documents.\n          for (const docId of notDocs.keys()) {\n            if (queryResults.has(docId)) {\n              queryResults.delete(docId);\n            }\n          }\n        }\n        // Boost query results afterwards.\n        if (boost !== 1) {\n          for (const [_, result] of queryResults) {\n            for (let i = 0; i < result.length; i++) {\n              result[i].boost *= boost;\n            }\n          }\n        }\n        break;\n      }\n      case \"term\": {\n        const cps = toCodePoints(query.value);\n        let termIdx = InvertedIndex.getTermIndex(cps, root);\n        this._scorer.score(fieldName, boost, termIdx, doScoring, queryResults, cps);\n        break;\n      }\n      case \"terms\": {\n        for (let i = 0; i < query.value.length; i++) {\n          const cps = toCodePoints(query.value[i]);\n          let termIdx = InvertedIndex.getTermIndex(cps, root);\n          this._scorer.score(fieldName, boost, termIdx, doScoring, queryResults, cps);\n        }\n        break;\n      }\n      case \"fuzzy\": {\n        const [f, idf] = fuzzySearch(query, root);\n        for (let i = 0; i < f.length; i++) {\n          this._scorer.score(fieldName, boost * f[i].boost, f[i].index, doScoring, queryResults, f[i].term, idf);\n        }\n        break;\n      }\n      case \"wildcard\": {\n        const enableScoring = query.enable_scoring !== undefined ? query.enable_scoring : false;\n        const w = wildcardSearch(query, root);\n        for (let i = 0; i < w.length; i++) {\n          this._scorer.score(fieldName, boost, w[i].index, doScoring && enableScoring, queryResults,\n            w[i].term);\n        }\n        break;\n      }\n      case \"match_all\": {\n        for (let docId of this._docs) {\n          this._scorer.scoreConstant(boost, docId, queryResults);\n        }\n        break;\n      }\n      case \"constant_score\": {\n        let tmpQueryResults = this._getAll(query.filter, false);\n        // Add to each document a constant score.\n        for (const docId of tmpQueryResults.keys()) {\n          this._scorer.scoreConstant(boost, docId, queryResults);\n        }\n        break;\n      }\n      case \"prefix\": {\n        const enableScoring = query.enable_scoring !== undefined ? query.enable_scoring : false;\n        const cps = toCodePoints(query.value);\n        const termIdx = InvertedIndex.getTermIndex(cps, root);\n        if (termIdx !== null) {\n          const termIdxs = InvertedIndex.extendTermIndex(termIdx);\n          for (let i = 0; i < termIdxs.length; i++) {\n            this._scorer.score(fieldName, boost, termIdxs[i].index, doScoring && enableScoring, queryResults,\n              [...cps, ...termIdxs[i].term]);\n          }\n        }\n        break;\n      }\n      case \"exists\": {\n        if (root !== null) {\n          for (const docId of this._invIdxs[fieldName].docStore.keys()) {\n            this._scorer.scoreConstant(boost, docId, queryResults);\n          }\n        }\n        break;\n      }\n      case \"match\": {\n        const terms = analyze(analyzer, query.value);\n        const operator = query.operator !== undefined ? query.operator : \"or\";\n\n        const boolQuery: BoolQuery = {type: \"bool\"};\n        const subQueries: QueryTypes[] = [];\n        if (operator === \"or\") {\n          if (query.minimum_should_match !== undefined) {\n            boolQuery.minimum_should_match = query.minimum_should_match;\n          }\n          // Create a should query.\n          boolQuery.should = subQueries;\n        } else {\n          // Create a must query.\n          boolQuery.must = subQueries;\n        }\n        boolQuery.boost = boost;\n\n        if (query.fuzziness !== undefined) {\n          let prefixLength = query.prefix_length !== undefined ? query.prefix_length : 2;\n          let extended = query.extended !== undefined ? query.extended : false;\n          // Add each fuzzy.\n          for (let i = 0; i < terms.length; i++) {\n            subQueries.push({\n              type: \"fuzzy\", field: fieldName, value: terms[i], fuzziness: query.fuzziness,\n              prefix_length: prefixLength, extended: extended\n            } as FuzzyQuery);\n          }\n        } else {\n          // Add each term.\n          for (let i = 0; i < terms.length; i++) {\n            subQueries.push({type: \"term\", field: fieldName, value: terms[i]} as TermQuery);\n          }\n        }\n        queryResults = this._recursive(boolQuery, doScoring);\n\n        break;\n      }\n      default:\n        break;\n    }\n    return queryResults;\n  }\n\n  private _getUnique(queries: any[], doScoring: boolean | null, queryResults: QueryResults): QueryResults {\n    if (queries.length === 0) {\n      return queryResults;\n    }\n\n    for (let i = 0; i < queries.length; i++) {\n      let currDocs = this._recursive(queries[i], doScoring);\n      if (queryResults === null) {\n        queryResults = this._recursive(queries[0], doScoring);\n        continue;\n      }\n\n      for (const docId of queryResults.keys()) {\n        if (!currDocs.has(docId)) {\n          queryResults.delete(docId);\n        } else {\n          queryResults.get(docId).push(...currDocs.get(docId));\n        }\n      }\n    }\n    return queryResults;\n  }\n\n  private _getAll(queries: any[], doScoring: boolean | null, queryResults: QueryResults = new Map()): QueryResults {\n    for (let i = 0; i < queries.length; i++) {\n      let currDocs = this._recursive(queries[i], doScoring);\n      for (const docId of currDocs.keys()) {\n        if (!queryResults.has(docId)) {\n          queryResults.set(docId, currDocs.get(docId));\n        } else {\n          queryResults.get(docId).push(...currDocs.get(docId));\n        }\n      }\n    }\n    return queryResults;\n  }\n}\n\ntype FuzzyResult = { index: Index, term: number[], boost: number };\n\n/**\n * Calculates the levenshtein distance. Specialized version.\n * Copyright Kigiri: https://github.com/kigiri\n *           Milot Mirdita: https://github.com/milot-mirdita\n *           Toni Neubert:  https://github.com/Viatorus/\n * @param {string} a - a string\n * @param {string} b - a string\n */\nfunction calculateLevenshteinDistance(a: number[], b: number[]): number {\n  let i;\n  let j;\n  let prev;\n  let val;\n\n  const row = Array(a.length + 1);\n  // init the row\n  for (i = 0; i <= a.length; i++) {\n    row[i] = i;\n  }\n\n  // fill in the rest\n  for (i = 1; i <= b.length; i++) {\n    prev = i;\n    for (j = 1; j <= a.length; j++) {\n      if (b[i - 1] === a[j - 1]) {\t// match\n        val = row[j - 1];\n      } else {\n        val = Math.min(row[j - 1] + 1, // substitution\n          Math.min(prev + 1,         // insertion\n            row[j] + 1));          // deletion\n\n        // transposition\n        if (i > 1 && j > 1 && b[i - 2] === a[j - 1] && a[j - 2] === b[i - 1]) {\n          val = Math.min(val, row[j - 1] - (a[j - 1] === b[i - 1] ? 1 : 0));\n        }\n      }\n      row[j - 1] = prev;\n      prev = val;\n    }\n    row[a.length] = prev;\n  }\n  return row[a.length];\n}\n\n/**\n * Performs a fuzzy search.\n * @param {FuzzyQuery} query - the fuzzy query\n * @param {Index} root - the root index\n * @returns {[FuzzyResult, number]} - the fuzzy results and the maximum df\n */\nfunction fuzzySearch(query: FuzzyQuery, root: Index): [FuzzyResult[], number] {\n  let value = toCodePoints(query.value);\n  let fuzziness = query.fuzziness !== undefined ? query.fuzziness : \"AUTO\";\n  if (fuzziness === \"AUTO\") {\n    if (value.length <= 2) {\n      fuzziness = 0;\n    } else if (value.length <= 5) {\n      fuzziness = 1;\n    } else {\n      fuzziness = 2;\n    }\n  }\n  let prefixLength = query.prefix_length !== undefined ? query.prefix_length : 0;\n  let extended = query.extended !== undefined ? query.extended : false;\n\n  // Do just a prefix search if zero fuzziness.\n  if (fuzziness === 0) {\n    prefixLength = value.length;\n  }\n\n  let result: FuzzyResult[] = [];\n  let startIdx = root;\n  let prefix = value.slice(0, prefixLength);\n  let fuzzy = value;\n  let df = 0;\n\n  // Perform a prefix search.\n  if (prefixLength !== 0) {\n    startIdx = InvertedIndex.getTermIndex(prefix, startIdx);\n    fuzzy = fuzzy.slice(prefixLength);\n  }\n\n  // No startIdx found.\n  if (startIdx === null) {\n    return [result, df];\n  }\n\n  // Fuzzy is not necessary anymore, because prefix search includes the whole query value.\n  if (fuzzy.length === 0) {\n    if (extended) {\n      // Add all terms down the index.\n      const all = InvertedIndex.extendTermIndex(startIdx);\n      for (let i = 0; i < all.length; i++) {\n        result.push({index: all[i].index, term: all[i].term, boost: 1});\n        df = Math.max(df, all[i].index.df);\n      }\n    } else if (startIdx.dc !== undefined) {\n      // Add prefix search result.\n      result.push({index: startIdx, term: value, boost: 1});\n      df = startIdx.df;\n    }\n    return [result, df];\n  }\n\n  // The matching term.\n  const term = [0];\n  // Create an automaton from the fuzzy.\n  const automaton = new RunAutomaton(new LevenshteinAutomata(fuzzy, fuzziness).toAutomaton());\n\n  function determineEditDistance(state: number, term: number[], fuzzy: number[]): number {\n    // Check how many edits this fuzzy can still do.\n    let ed = 0;\n    state = automaton.step(state, 0);\n    if (state !== -1 && automaton.isAccept(state)) {\n      ed++;\n      state = automaton.step(state, 0);\n      if (state !== -1 && automaton.isAccept(state)) {\n        ed++;\n      }\n      // Special handling for smaller terms.\n      if (term.length < fuzzy.length) {\n        if (ed !== fuzziness) {\n          return calculateLevenshteinDistance(term, fuzzy);\n        }\n        // Include the term and fuzzy length.\n        ed -= fuzzy.length - term.length;\n      }\n    }\n    return fuzziness as number - ed;\n  }\n\n  function recursive(state: number, key: number, idx: Index) {\n    term[term.length - 1] = key;\n\n    // Check the current key of term with the automaton.\n    state = automaton.step(state, key);\n    if (state === -1) {\n      return;\n    }\n\n    if (automaton.isAccept(state)) {\n      if (extended) {\n        // Add all terms down the index.\n        const all = InvertedIndex.extendTermIndex(idx);\n        for (let i = 0; i < all.length; i++) {\n          result.push({index: all[i].index, term: all[i].term, boost: 1});\n          df = Math.max(df, all[i].index.df);\n        }\n        return;\n      } else if (idx.df !== undefined) {\n        // Calculate boost.\n        const distance = determineEditDistance(state, term, fuzzy);\n        const boost = Math.max(0, 1 - distance / Math.min(prefix.length + term.length, value.length));\n        result.push({index: idx, term: [...prefix, ...term], boost});\n        df = Math.max(df, idx.df);\n      }\n    }\n\n    term.push(0);\n    for (const child of idx) {\n      recursive(state, child[0], child[1]);\n    }\n    term.pop();\n  }\n\n  for (const child of startIdx) {\n    recursive(0, child[0], child[1]);\n  }\n\n  return [result, df];\n}\n\ntype WildcardResult = { index: Index, term: number[] };\n\n/**\n * Performs a wildcard search.\n * @param {WildcardQuery} query - the wildcard query\n * @param {Index} root - the root index\n * @returns {Array} - the results\n */\nfunction wildcardSearch(query: WildcardQuery, root: Index): WildcardResult[] {\n  let wildcard = toCodePoints(query.value);\n  let result: WildcardResult[] = [];\n\n  function recursive(index: Index, idx: number = 0, term: number[] = [], escaped: boolean = false) {\n    if (index === null) {\n      return;\n    }\n\n    if (idx === wildcard.length) {\n      if (index.df !== undefined) {\n        result.push({index: index, term: term.slice()});\n      }\n      return;\n    }\n\n    // Escaped character.\n    if (!escaped && wildcard[idx] === 92 /* \\ */) {\n      recursive(index, idx + 1, term, true);\n    } else if (!escaped && wildcard[idx] === 63 /* ? */) {\n      for (const child of index) {\n        recursive(child[1], idx + 1, [...term, child[0]]);\n      }\n    } else if (!escaped && wildcard[idx] === 42 /* * */) {\n      // Check if asterisk is last wildcard character\n      if (idx + 1 === wildcard.length) {\n        const all = InvertedIndex.extendTermIndex(index);\n        for (let i = 0; i < all.length; i++) {\n          recursive(all[i].index, idx + 1, [...term, ...all[i].term]);\n        }\n      } else {\n        // Iterate over the whole tree.\n        recursive(index, idx + 1, term, false);\n        const indices: InvertedIndex.IndexTerm[] = [{index: index, term: []}];\n        do {\n          const index = indices.pop();\n          for (const child of index.index) {\n            recursive(child[1], idx + 1, [...term, ...index.term, child[0]]);\n            indices.push({index: child[1], term: [...index.term, child[0]]});\n          }\n        } while (indices.length !== 0);\n      }\n    } else {\n      recursive(InvertedIndex.getTermIndex([wildcard[idx]], index), idx + 1, [...term, wildcard[idx]]);\n    }\n  }\n\n  recursive(root);\n\n  return result;\n}\n","import { InvertedIndex } from \"./inverted_index\";\nimport { IndexSearcher } from \"./index_searcher\";\nimport { Dict } from \"../../common/types\";\nimport { PLUGINS } from \"../../common/plugin\";\nimport { Query } from \"./query_types\";\nimport { Scorer } from \"./scorer\";\nimport { Analyzer } from \"./analyzer/analyzer\";\n\nexport class FullTextSearch {\n  /// The id field of each document.\n  private _id: string;\n  /// Set of ids of all indexed documents.\n  private _docs: Set<InvertedIndex.DocumentIndex>;\n  private _idxSearcher: IndexSearcher;\n  private _invIdxs: Dict<InvertedIndex> = {};\n\n  /**\n   * Registers the full-text search as plugin.\n   */\n  public static register(): void {\n    PLUGINS[\"FullTextSearch\"] = FullTextSearch;\n  }\n\n  /**\n   * Initialize the full-text search for the given fields.\n   * @param {object[]} fieldOptions - the field options\n   * @param {string} fieldOptions.field - the name of the property field\n   * @param {boolean=true} fieldOptions.store - flag to indicate if the full-text search should be stored on serialization or\n   *  rebuild on deserialization\n   * @param {boolean=true} fieldOptions.optimizeChanges - flag to optimize updating and deleting of documents\n   *    (requires more memory but performs faster)\n   * @param {Analyzer} fieldOptions.analyzer - an analyzer for the field\n   * @param {string} [id] - the property name of the document index\n   */\n  constructor(fieldOptions: FullTextSearch.FieldOptions[] = [], id?: string) {\n    // Create an inverted index for each field.\n    for (let i = 0; i < fieldOptions.length; i++) {\n      let fieldOption = fieldOptions[i];\n      this._invIdxs[fieldOption.field] = new InvertedIndex(fieldOption);\n    }\n    this._id = id;\n    this._docs = new Set();\n    this._idxSearcher = new IndexSearcher(this._invIdxs, this._docs);\n  }\n\n  public addDocument(doc: object, id: InvertedIndex.DocumentIndex = doc[this._id]): void {\n    let fieldNames = Object.keys(this._invIdxs);\n    for (let i = 0, fieldName; i < fieldNames.length, fieldName = fieldNames[i]; i++) {\n      let field = doc[fieldName];\n      // Skip null and undefined.\n      if (field === null || field === undefined) {\n        continue;\n      }\n      if (typeof field !== \"string\") {\n        // Convert number to string.\n        if (typeof field === \"number\") {\n          field = field.toString();\n        } else {\n          throw TypeError(\"Unsupported field type for full text search.\");\n        }\n      }\n      this._invIdxs[fieldName].insert(field, id);\n    }\n    this._docs.add(id);\n    this._idxSearcher.setDirty();\n  }\n\n  public removeDocument(doc: object, id: InvertedIndex.DocumentIndex = doc[this._id]): void {\n    let fieldNames = Object.keys(this._invIdxs);\n    for (let i = 0; i < fieldNames.length; i++) {\n      this._invIdxs[fieldNames[i]].remove(id);\n    }\n    this._docs.delete(id);\n    this._idxSearcher.setDirty();\n  }\n\n  public updateDocument(doc: object, id: InvertedIndex.DocumentIndex = doc[this._id]): void {\n    this.removeDocument(doc, id);\n    this.addDocument(doc, id);\n  }\n\n  public clear(): void {\n    for (let id of this._docs) {\n      this.removeDocument(null, id);\n    }\n  }\n\n  public search(query: Query): Scorer.ScoreResults {\n    return this._idxSearcher.search(query);\n  }\n\n  public toJSON(): FullTextSearch.Serialization {\n    let serialized = {id: this._id, ii: {}};\n    let fieldNames = Object.keys(this._invIdxs);\n    for (let i = 0; i < fieldNames.length; i++) {\n      const fieldName = fieldNames[i];\n      serialized.ii[fieldName] = this._invIdxs[fieldName].toJSON();\n    }\n    return serialized;\n  }\n\n  public static fromJSONObject(serialized: FullTextSearch.Serialization, analyzers: Dict<Analyzer> = {}): FullTextSearch {\n    let fts = new FullTextSearch([], serialized.id);\n    let fieldNames = Object.keys(serialized.ii);\n    for (let i = 0; i < fieldNames.length; i++) {\n      const fieldName = fieldNames[i];\n      fts._invIdxs[fieldName] = InvertedIndex.fromJSONObject(serialized.ii[fieldName], analyzers[fieldName]);\n    }\n    return fts;\n  }\n}\n\nexport namespace FullTextSearch {\n  export interface FieldOptions extends InvertedIndex.FieldOptions {\n    field: string;\n  }\n\n  export interface Serialization {\n    id: string;\n    ii: Dict<InvertedIndex.Serialization>;\n  }\n}\n","import { FullTextSearch } from \"./full_text_search\";\nimport { analyze, StandardAnalyzer } from \"./analyzer/analyzer\";\nimport { whitespaceTokenizer } from \"./analyzer/tokenizer\";\nimport { lowercaseTokenFilter, uppercaseTokenFilter } from \"./analyzer/token_filter\";\n\nFullTextSearch[\"Analyzer\"] = {};\nFullTextSearch[\"Analyzer\"][\"analyze\"] = analyze;\nFullTextSearch[\"Analyzer\"][\"StandardAnalyzer\"] = StandardAnalyzer;\nFullTextSearch[\"Tokenizer\"] = {};\nFullTextSearch[\"Tokenizer\"][\"whitespaceTokenizer\"] = whitespaceTokenizer;\nFullTextSearch[\"TokenFilter\"] = {};\nFullTextSearch[\"TokenFilter\"][\"lowercaseTokenFilter\"] = lowercaseTokenFilter;\nFullTextSearch[\"TokenFilter\"][\"uppercaseTokenFilter\"] = uppercaseTokenFilter;\n\nexport {FullTextSearch,\n  analyze, StandardAnalyzer,\n  whitespaceTokenizer,\n  lowercaseTokenFilter, uppercaseTokenFilter\n};\nexport default FullTextSearch;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}